import{$ as ui,A as be,B as Ft,C as Lt,D as _t,E as mt,F as Je,G as Le,H as Ze,I as rt,Ia as _i,K as at,Ka as mi,L as ze,M as hi,O as Bt,P as Ut,Q as Vt,R as di,S as ot,T as Gt,U as bt,V as De,W as xe,X as lt,Y as Ht,Z as Xe,_ as ct,a as ti,aa as fi,b as Ne,ba as vt,c as ii,ca as yt,d as Ot,da as At,e as Rt,ea as Ye,g as It,h as ge,ha as jt,i as ni,j as $e,ja as pi,k as si,ka as St,l as gt,la as Et,m as ri,n as kt,na as gi,o as ai,p as oi,q as ue,r as li,s as Nt,u as Qe,v as me,w as ci,y as Ae,z as qe}from"./chunk-ATFCHT73.js";import{a as Re,b as Ue,c as xt,e as Ve,f as ei,g as ae}from"./chunk-J4ZR5Y2S.js";var wt=Ve(()=>{"use strict"});var yi=Ve((Un,vi)=>{"use strict";var Ki="bold|bolder|lighter|[1-9]00",Qi="italic|oblique",Ji="small-caps",Zi="ultra-condensed|extra-condensed|condensed|semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded",en="px|pt|pc|in|cm|mm|%|em|ex|ch|rem|q",bi=`'([^']+)'|"([^"]+)"|[\\w\\s-]+`,tn=new RegExp(`(${Ki}) +`,"i"),nn=new RegExp(`(${Qi}) +`,"i"),sn=new RegExp(`(${Ji}) +`,"i"),rn=new RegExp(`(${Zi}) +`,"i"),an=new RegExp(`([\\d\\.]+)(${en}) *((?:${bi})( *, *(?:${bi}))*)`),Wt={},on=16;vi.exports=M=>{if(Wt[M])return Wt[M];let e=an.exec(M);if(!e)return;let A={weight:"normal",style:"normal",stretch:"normal",variant:"normal",size:parseFloat(e[1]),unit:e[2],family:e[3].replace(/["']/g,"").replace(/ *, */g,",")},r,c,g,C,w=M.substring(0,e.index);switch((r=tn.exec(w))&&(A.weight=r[1]),(c=nn.exec(w))&&(A.style=c[1]),(g=sn.exec(w))&&(A.variant=g[1]),(C=rn.exec(w))&&(A.stretch=C[1]),A.unit){case"pt":A.size/=.75;break;case"pc":A.size*=16;break;case"in":A.size*=96;break;case"cm":A.size*=96/2.54;break;case"mm":A.size*=96/25.4;break;case"%":break;case"em":case"rem":A.size*=on/.75;break;case"q":A.size*=96/25.4/4;break}return Wt[M]=A}});var Ai=Ve(ht=>{"use strict";var ln=yi();ht.parseFont=ln;ht.createCanvas=function(M,e){return Object.assign(document.createElement("canvas"),{width:M,height:e})};ht.createImageData=function(M,e,A){switch(arguments.length){case 0:return new ImageData;case 1:return new ImageData(M);case 2:return new ImageData(M,e);default:return new ImageData(M,e,A)}};ht.loadImage=function(M,e){return new Promise(function(A,r){let c=Object.assign(document.createElement("img"),e);function g(){c.onload=null,c.onerror=null}c.onload=function(){g(),A(c)},c.onerror=function(){g(),r(new Error('Failed to load the image "'+M+'"'))},c.src=M})}});var Si=Ve(()=>{"use strict"});var zt=Ve(()=>{"use strict"});var $t=Ve(()=>{"use strict"});var Ei=Ve(()=>{"use strict"});var wi=Ve((exports,module)=>{"use strict";(function(e,A){typeof exports=="object"&&typeof module=="object"?module.exports=e.pdfjsLib=A():typeof define=="function"&&define.amd?define("pdfjs-dist/build/pdf",[],()=>e.pdfjsLib=A()):typeof exports=="object"?exports["pdfjs-dist/build/pdf"]=e.pdfjsLib=A():e["pdfjs-dist/build/pdf"]=e.pdfjsLib=A()})(globalThis,()=>(()=>{"use strict";var __webpack_modules__=[,(M,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=m,e.bytesToString=j,e.createValidAbsoluteUrl=T,e.getModificationDate=Se,e.getUuid=ke,e.getVerbosityLevel=B,e.info=H,e.isArrayBuffer=fe,e.isArrayEqual=Me,e.isNodeJS=void 0,e.normalizeUnicode=it,e.objectFromMap=W,e.objectSize=J,e.setVerbosityLevel=Y,e.shadow=F,e.string32=ie,e.stringToBytes=q,e.stringToPDFString=ce,e.stringToUTF8String=he,e.unreachable=f,e.utf8StringToString=de,e.warn=O;let A=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=A;let r=[1,0,0,1,0,0];e.IDENTITY_MATRIX=r;let c=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=c;let g=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=g;let C=1.35;e.LINE_FACTOR=C;let w=.35;e.LINE_DESCENT_FACTOR=w;let E=w/C;e.BASELINE_FACTOR=E;let b={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=b;let a={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=a;let i="pdfjs_internal_editor_";e.AnnotationEditorPrefix=i;let t={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=t;let o={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=o;let s={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=s;let n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=n;let d={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=d;let h={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=h;let y={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=y;let l={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=l;let u={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=u;let _={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=_;let S={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=S;let D={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=D;let R={O:"PageOpen",C:"PageClose"};e.PageActionEventType=R;let I={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=I;let G={NONE:0,BINARY:1};e.CMapCompressionType=G;let z={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=z;let $={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=$;let Q=I.WARNINGS;function Y(se){Number.isInteger(se)&&(Q=se)}function B(){return Q}function H(se){Q>=I.INFOS&&console.log(`Info: ${se}`)}function O(se){Q>=I.WARNINGS&&console.log(`Warning: ${se}`)}function f(se){throw new Error(se)}function m(se,te){se||f(te)}function v(se){switch(se?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function T(se,te=null,ee=null){if(!se)return null;try{if(ee&&typeof se=="string"&&(ee.addDefaultProtocol&&se.startsWith("www.")&&se.match(/\./g)?.length>=2&&(se=`http://${se}`),ee.tryConvertEncoding))try{se=he(se)}catch{}let le=te?new URL(se,te):new URL(se);if(v(le))return le}catch{}return null}function F(se,te,ee,le=!1){return Object.defineProperty(se,te,{value:ee,enumerable:!le,configurable:!0,writable:!1}),ee}let k=function(){function te(ee,le){this.constructor===te&&f("Cannot initialize BaseException."),this.message=ee,this.name=le}return te.prototype=new Error,te.constructor=te,te}();e.BaseException=k;class V extends k{constructor(te,ee){super(te,"PasswordException"),this.code=ee}}e.PasswordException=V;class L extends k{constructor(te,ee){super(te,"UnknownErrorException"),this.details=ee}}e.UnknownErrorException=L;class p extends k{constructor(te){super(te,"InvalidPDFException")}}e.InvalidPDFException=p;class P extends k{constructor(te){super(te,"MissingPDFException")}}e.MissingPDFException=P;class x extends k{constructor(te,ee){super(te,"UnexpectedResponseException"),this.status=ee}}e.UnexpectedResponseException=x;class N extends k{constructor(te){super(te,"FormatError")}}e.FormatError=N;class U extends k{constructor(te){super(te,"AbortException")}}e.AbortException=U;function j(se){(typeof se!="object"||se?.length===void 0)&&f("Invalid argument for bytesToString");let te=se.length,ee=8192;if(te<ee)return String.fromCharCode.apply(null,se);let le=[];for(let pe=0;pe<te;pe+=ee){let ve=Math.min(pe+ee,te),_e=se.subarray(pe,ve);le.push(String.fromCharCode.apply(null,_e))}return le.join("")}function q(se){typeof se!="string"&&f("Invalid argument for stringToBytes");let te=se.length,ee=new Uint8Array(te);for(let le=0;le<te;++le)ee[le]=se.charCodeAt(le)&255;return ee}function ie(se){return String.fromCharCode(se>>24&255,se>>16&255,se>>8&255,se&255)}function J(se){return Object.keys(se).length}function W(se){let te=Object.create(null);for(let[ee,le]of se)te[ee]=le;return te}function K(){let se=new Uint8Array(4);return se[0]=1,new Uint32Array(se.buffer,0,1)[0]===1}function X(){try{return new Function(""),!0}catch{return!1}}class Z{static get isLittleEndian(){return F(this,"isLittleEndian",K())}static get isEvalSupported(){return F(this,"isEvalSupported",X())}static get isOffscreenCanvasSupported(){return F(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?F(this,"platform",{isWin:!1,isMac:!1}):F(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return F(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}e.FeatureTest=Z;let ne=[...Array(256).keys()].map(se=>se.toString(16).padStart(2,"0"));class re{static makeHexColor(te,ee,le){return`#${ne[te]}${ne[ee]}${ne[le]}`}static scaleMinMax(te,ee){let le;te[0]?(te[0]<0&&(le=ee[0],ee[0]=ee[1],ee[1]=le),ee[0]*=te[0],ee[1]*=te[0],te[3]<0&&(le=ee[2],ee[2]=ee[3],ee[3]=le),ee[2]*=te[3],ee[3]*=te[3]):(le=ee[0],ee[0]=ee[2],ee[2]=le,le=ee[1],ee[1]=ee[3],ee[3]=le,te[1]<0&&(le=ee[2],ee[2]=ee[3],ee[3]=le),ee[2]*=te[1],ee[3]*=te[1],te[2]<0&&(le=ee[0],ee[0]=ee[1],ee[1]=le),ee[0]*=te[2],ee[1]*=te[2]),ee[0]+=te[4],ee[1]+=te[4],ee[2]+=te[5],ee[3]+=te[5]}static transform(te,ee){return[te[0]*ee[0]+te[2]*ee[1],te[1]*ee[0]+te[3]*ee[1],te[0]*ee[2]+te[2]*ee[3],te[1]*ee[2]+te[3]*ee[3],te[0]*ee[4]+te[2]*ee[5]+te[4],te[1]*ee[4]+te[3]*ee[5]+te[5]]}static applyTransform(te,ee){let le=te[0]*ee[0]+te[1]*ee[2]+ee[4],pe=te[0]*ee[1]+te[1]*ee[3]+ee[5];return[le,pe]}static applyInverseTransform(te,ee){let le=ee[0]*ee[3]-ee[1]*ee[2],pe=(te[0]*ee[3]-te[1]*ee[2]+ee[2]*ee[5]-ee[4]*ee[3])/le,ve=(-te[0]*ee[1]+te[1]*ee[0]+ee[4]*ee[1]-ee[5]*ee[0])/le;return[pe,ve]}static getAxialAlignedBoundingBox(te,ee){let le=this.applyTransform(te,ee),pe=this.applyTransform(te.slice(2,4),ee),ve=this.applyTransform([te[0],te[3]],ee),_e=this.applyTransform([te[2],te[1]],ee);return[Math.min(le[0],pe[0],ve[0],_e[0]),Math.min(le[1],pe[1],ve[1],_e[1]),Math.max(le[0],pe[0],ve[0],_e[0]),Math.max(le[1],pe[1],ve[1],_e[1])]}static inverseTransform(te){let ee=te[0]*te[3]-te[1]*te[2];return[te[3]/ee,-te[1]/ee,-te[2]/ee,te[0]/ee,(te[2]*te[5]-te[4]*te[3])/ee,(te[4]*te[1]-te[5]*te[0])/ee]}static singularValueDecompose2dScale(te){let ee=[te[0],te[2],te[1],te[3]],le=te[0]*ee[0]+te[1]*ee[2],pe=te[0]*ee[1]+te[1]*ee[3],ve=te[2]*ee[0]+te[3]*ee[2],_e=te[2]*ee[1]+te[3]*ee[3],Ge=(le+_e)/2,He=Math.sqrt((le+_e)**2-4*(le*_e-ve*pe))/2,Be=Ge+He||1,Ce=Ge-He||1;return[Math.sqrt(Be),Math.sqrt(Ce)]}static normalizeRect(te){let ee=te.slice(0);return te[0]>te[2]&&(ee[0]=te[2],ee[2]=te[0]),te[1]>te[3]&&(ee[1]=te[3],ee[3]=te[1]),ee}static intersect(te,ee){let le=Math.max(Math.min(te[0],te[2]),Math.min(ee[0],ee[2])),pe=Math.min(Math.max(te[0],te[2]),Math.max(ee[0],ee[2]));if(le>pe)return null;let ve=Math.max(Math.min(te[1],te[3]),Math.min(ee[1],ee[3])),_e=Math.min(Math.max(te[1],te[3]),Math.max(ee[1],ee[3]));return ve>_e?null:[le,ve,pe,_e]}static bezierBoundingBox(te,ee,le,pe,ve,_e,Ge,He){let Be=[],Ce=[[],[]],je,We,ut,Ee,ft,pt,Mt,Pt;for(let Dt=0;Dt<2;++Dt){if(Dt===0?(We=6*te-12*le+6*ve,je=-3*te+9*le-9*ve+3*Ge,ut=3*le-3*te):(We=6*ee-12*pe+6*_e,je=-3*ee+9*pe-9*_e+3*He,ut=3*pe-3*ee),Math.abs(je)<1e-12){if(Math.abs(We)<1e-12)continue;Ee=-ut/We,0<Ee&&Ee<1&&Be.push(Ee);continue}Mt=We*We-4*ut*je,Pt=Math.sqrt(Mt),!(Mt<0)&&(ft=(-We+Pt)/(2*je),0<ft&&ft<1&&Be.push(ft),pt=(-We-Pt)/(2*je),0<pt&&pt<1&&Be.push(pt))}let nt=Be.length,Oe,st=nt;for(;nt--;)Ee=Be[nt],Oe=1-Ee,Ce[0][nt]=Oe*Oe*Oe*te+3*Oe*Oe*Ee*le+3*Oe*Ee*Ee*ve+Ee*Ee*Ee*Ge,Ce[1][nt]=Oe*Oe*Oe*ee+3*Oe*Oe*Ee*pe+3*Oe*Ee*Ee*_e+Ee*Ee*Ee*He;return Ce[0][st]=te,Ce[1][st]=ee,Ce[0][st+1]=Ge,Ce[1][st+1]=He,Ce[0].length=Ce[1].length=st+2,[Math.min(...Ce[0]),Math.min(...Ce[1]),Math.max(...Ce[0]),Math.max(...Ce[1])]}}e.Util=re;let oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ce(se){if(se[0]>="\xEF"){let ee;if(se[0]==="\xFE"&&se[1]==="\xFF"?ee="utf-16be":se[0]==="\xFF"&&se[1]==="\xFE"?ee="utf-16le":se[0]==="\xEF"&&se[1]==="\xBB"&&se[2]==="\xBF"&&(ee="utf-8"),ee)try{let le=new TextDecoder(ee,{fatal:!0}),pe=q(se);return le.decode(pe)}catch(le){O(`stringToPDFString: "${le}".`)}}let te=[];for(let ee=0,le=se.length;ee<le;ee++){let pe=oe[se.charCodeAt(ee)];te.push(pe?String.fromCharCode(pe):se.charAt(ee))}return te.join("")}function he(se){return decodeURIComponent(escape(se))}function de(se){return unescape(encodeURIComponent(se))}function fe(se){return typeof se=="object"&&se?.byteLength!==void 0}function Me(se,te){if(se.length!==te.length)return!1;for(let ee=0,le=se.length;ee<le;ee++)if(se[ee]!==te[ee])return!1;return!0}function Se(se=new Date){return[se.getUTCFullYear().toString(),(se.getUTCMonth()+1).toString().padStart(2,"0"),se.getUTCDate().toString().padStart(2,"0"),se.getUTCHours().toString().padStart(2,"0"),se.getUTCMinutes().toString().padStart(2,"0"),se.getUTCSeconds().toString().padStart(2,"0")].join("")}class Ie{#e=!1;constructor(){this.promise=new Promise((te,ee)=>{this.resolve=le=>{this.#e=!0,te(le)},this.reject=le=>{this.#e=!0,ee(le)}})}get settled(){return this.#e}}e.PromiseCapability=Ie;let ye=null,Fe=null;function it(se){return ye||(ye=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Fe=new Map([["\uFB05","\u017Ft"]])),se.replaceAll(ye,(te,ee,le)=>ee?ee.normalize("NFKC"):Fe.get(le))}function ke(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();let se=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(se);else for(let te=0;te<32;te++)se[te]=Math.floor(Math.random()*255);return j(se)}let we="pdfjs_internal_id_";e.AnnotationPrefix=we},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(M){if(typeof M=="string"||M instanceof URL?M={url:M}:(0,_util.isArrayBuffer)(M)&&(M={data:M}),typeof M!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!M.url&&!M.data&&!M.range)throw new Error("Invalid parameter object: need either .data, .range or .url");let e=new PDFDocumentLoadingTask,{docId:A}=e,r=M.url?getUrlProp(M.url):null,c=M.data?getDataProp(M.data):null,g=M.httpHeaders||null,C=M.withCredentials===!0,w=M.password??null,E=M.range instanceof PDFDataRangeTransport?M.range:null,b=Number.isInteger(M.rangeChunkSize)&&M.rangeChunkSize>0?M.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,a=M.worker instanceof PDFWorker?M.worker:null,i=M.verbosity,t=typeof M.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(M.docBaseUrl)?M.docBaseUrl:null,o=typeof M.cMapUrl=="string"?M.cMapUrl:null,s=M.cMapPacked!==!1,n=M.CMapReaderFactory||DefaultCMapReaderFactory,d=typeof M.standardFontDataUrl=="string"?M.standardFontDataUrl:null,h=M.StandardFontDataFactory||DefaultStandardFontDataFactory,y=M.stopAtErrors!==!0,l=Number.isInteger(M.maxImageSize)&&M.maxImageSize>-1?M.maxImageSize:-1,u=M.isEvalSupported!==!1,_=typeof M.isOffscreenCanvasSupported=="boolean"?M.isOffscreenCanvasSupported:!_util.isNodeJS,S=Number.isInteger(M.canvasMaxAreaInBytes)?M.canvasMaxAreaInBytes:-1,D=typeof M.disableFontFace=="boolean"?M.disableFontFace:_util.isNodeJS,R=M.fontExtraProperties===!0,I=M.enableXfa===!0,G=M.ownerDocument||globalThis.document,z=M.disableRange===!0,$=M.disableStream===!0,Q=M.disableAutoFetch===!0,Y=M.pdfBug===!0,B=E?E.length:M.length??NaN,H=typeof M.useSystemFonts=="boolean"?M.useSystemFonts:!_util.isNodeJS&&!D,O=typeof M.useWorkerFetch=="boolean"?M.useWorkerFetch:n===_display_utils.DOMCMapReaderFactory&&h===_display_utils.DOMStandardFontDataFactory&&o&&d&&(0,_display_utils.isValidFetchUrl)(o,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(d,document.baseURI),f=M.canvasFactory||new DefaultCanvasFactory({ownerDocument:G}),m=M.filterFactory||new DefaultFilterFactory({docId:A,ownerDocument:G}),v=null;(0,_util.setVerbosityLevel)(i);let T={canvasFactory:f,filterFactory:m};if(O||(T.cMapReaderFactory=new n({baseUrl:o,isCompressed:s}),T.standardFontDataFactory=new h({baseUrl:d})),!a){let V={verbosity:i,port:_worker_options.GlobalWorkerOptions.workerPort};a=V.port?PDFWorker.fromPort(V):new PDFWorker(V),e._worker=a}let F={docId:A,apiVersion:"3.11.174",data:c,password:w,disableAutoFetch:Q,rangeChunkSize:b,length:B,docBaseUrl:t,enableXfa:I,evaluatorOptions:{maxImageSize:l,disableFontFace:D,ignoreErrors:y,isEvalSupported:u,isOffscreenCanvasSupported:_,canvasMaxAreaInBytes:S,fontExtraProperties:R,useSystemFonts:H,cMapUrl:O?o:null,standardFontDataUrl:O?d:null}},k={ignoreErrors:y,isEvalSupported:u,disableFontFace:D,fontExtraProperties:R,enableXfa:I,ownerDocument:G,disableAutoFetch:Q,pdfBug:Y,styleElement:v};return a.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");let V=_fetchDocument(a,F),L=new Promise(function(p){let P;E?P=new _transport_stream.PDFDataTransportStream({length:B,initialData:E.initialData,progressiveDone:E.progressiveDone,contentDispositionFilename:E.contentDispositionFilename,disableRange:z,disableStream:$},E):c||(P=(N=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(N):(0,_display_utils.isValidFetchUrl)(N.url)?new _displayFetch_stream.PDFFetchStream(N):new _displayNetwork.PDFNetworkStream(N))({url:r,length:B,httpHeaders:g,withCredentials:C,rangeChunkSize:b,disableRange:z,disableStream:$})),p(P)});return Promise.all([V,L]).then(function([p,P]){if(e.destroyed)throw new Error("Loading aborted");let x=new _message_handler.MessageHandler(A,p,a.port),N=new WorkerTransport(x,e,P,k,T);e._transport=N,x.send("Ready",null)})}).catch(e._capability.reject),e}function _fetchDocument(M,e){return ae(this,null,function*(){if(M.destroyed)throw new Error("Worker was destroyed");let A=yield M.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(M.destroyed)throw new Error("Worker was destroyed");return A})}function getUrlProp(M){if(M instanceof URL)return M.href;try{return new URL(M,window.location).href}catch{if(_util.isNodeJS&&typeof M=="string")return M}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(M){if(_util.isNodeJS&&typeof Buffer<"u"&&M instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(M instanceof Uint8Array&&M.byteLength===M.buffer.byteLength)return M;if(typeof M=="string")return(0,_util.stringToBytes)(M);if(typeof M=="object"&&!isNaN(M?.length)||(0,_util.isArrayBuffer)(M))return new Uint8Array(M);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}destroy(){return ae(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,A,r=!1,c=null){this.length=e,this.initialData=A,this.progressiveDone=r,this.contentDispositionFilename=c,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,A){for(let r of this._rangeListeners)r(e,A)}onDataProgress(e,A){this._readyCapability.promise.then(()=>{for(let r of this._progressListeners)r(e,A)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(let A of this._progressiveReadListeners)A(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,A){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,A){this._pdfInfo=e,this._transport=A,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(r=>{if(!r)return r;let c=[];for(let g in r)c.push(...r[g]);return c}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(e,A,r,c=!1){this._pageIndex=e,this._pageInfo=A,this._transport=r,this._stats=c?new _display_utils.StatTimer:null,this._pdfBug=c,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:A=this.rotate,offsetX:r=0,offsetY:c=0,dontFlip:g=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:A,offsetX:r,offsetY:c,dontFlip:g})}getAnnotations({intent:e="display"}={}){let A=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,A.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return ae(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:e,viewport:A,intent:r="display",annotationMode:c=_util.AnnotationMode.ENABLE,transform:g=null,background:C=null,optionalContentConfigPromise:w=null,annotationCanvasMap:E=null,pageColors:b=null,printAnnotationStorage:a=null}){this._stats?.time("Overall");let i=this._transport.getRenderingIntent(r,c,a);this.#t=!1,this.#n(),w||(w=this._transport.getOptionalContentConfig());let t=this._intentStates.get(i.cacheKey);t||(t=Object.create(null),this._intentStates.set(i.cacheKey,t)),t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null);let o=!!(i.renderingIntent&_util.RenderingIntentFlag.PRINT);t.displayReadyCapability||(t.displayReadyCapability=new _util.PromiseCapability,t.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(i));let s=h=>{t.renderTasks.delete(n),(this._maybeCleanupAfterRender||o)&&(this.#t=!0),this.#i(!o),h?(n.capability.reject(h),this._abortOperatorList({intentState:t,reason:h instanceof Error?h:new Error(h)})):n.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},n=new InternalRenderTask({callback:s,params:{canvasContext:e,viewport:A,transform:g,background:C},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:E,operatorList:t.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!o,pdfBug:this._pdfBug,pageColors:b});(t.renderTasks||=new Set).add(n);let d=n.task;return Promise.all([t.displayReadyCapability.promise,w]).then(([h,y])=>{if(this.destroyed){s();return}this._stats?.time("Rendering"),n.initializeGraphics({transparency:h,optionalContentConfig:y}),n.operatorListChanged()}).catch(s),d}getOperatorList({intent:e="display",annotationMode:A=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){function c(){C.operatorList.lastChunk&&(C.opListReadCapability.resolve(C.operatorList),C.renderTasks.delete(w))}let g=this._transport.getRenderingIntent(e,A,r,!0),C=this._intentStates.get(g.cacheKey);C||(C=Object.create(null),this._intentStates.set(g.cacheKey,C));let w;return C.opListReadCapability||(w=Object.create(null),w.operatorListChanged=c,C.opListReadCapability=new _util.PromiseCapability,(C.renderTasks||=new Set).add(w),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g)),C.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:A=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:A===!0},{highWaterMark:100,size(c){return c.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));let A=this.streamTextContent(e);return new Promise(function(r,c){function g(){C.read().then(function({value:E,done:b}){if(b){r(w);return}Object.assign(w.styles,E.styles),w.items.push(...E.items),g()},c)}let C=A.getReader(),w={items:[],styles:Object.create(null)};g()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let e=[];for(let A of this._intentStates.values())if(this._abortOperatorList({intentState:A,reason:new Error("Page was destroyed."),force:!0}),!A.opListReadCapability)for(let r of A.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),this.#t=!1,this.#n(),Promise.all(e)}cleanup(e=!1){this.#t=!0;let A=this.#i(!1);return e&&A&&(this._stats&&=new _display_utils.StatTimer),A}#i(e=!1){if(this.#n(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#i(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(let{renderTasks:A,operatorList:r}of this._intentStates.values())if(A.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#n(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,A){let r=this._intentStates.get(A);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(e))}_renderPageChunk(e,A){for(let r=0,c=e.length;r<c;r++)A.operatorList.fnArray.push(e.fnArray[r]),A.operatorList.argsArray.push(e.argsArray[r]);A.operatorList.lastChunk=e.lastChunk,A.operatorList.separateAnnots=e.separateAnnots;for(let r of A.renderTasks)r.operatorListChanged();e.lastChunk&&this.#i(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:A,annotationStorageSerializable:r}){let{map:c,transfers:g}=r,w=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:A,annotationStorage:c},g).getReader(),E=this._intentStates.get(A);E.streamReader=w;let b=()=>{w.read().then(({value:a,done:i})=>{if(i){E.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(a,E),b())},a=>{if(E.streamReader=null,!this._transport.destroyed){if(E.operatorList){E.operatorList.lastChunk=!0;for(let i of E.renderTasks)i.operatorListChanged();this.#i(!0)}if(E.displayReadyCapability)E.displayReadyCapability.reject(a);else if(E.opListReadCapability)E.opListReadCapability.reject(a);else throw a}})};b()}_abortOperatorList({intentState:e,reason:A,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(A instanceof _display_utils.RenderingCancelledException){let c=RENDERING_CANCELLED_TIMEOUT;A.extraDelay>0&&A.extraDelay<1e3&&(c+=A.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:A,force:!0})},c);return}}if(e.streamReader.cancel(new _util.AbortException(A.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(let[c,g]of this._intentStates)if(g===e){this._intentStates.delete(c);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(e,A){let r={data:structuredClone(e,A?{transfer:A}:null)};this.#t.then(()=>{for(let c of this.#e)c.call(this,r)})}addEventListener(e,A){this.#e.add(A)}removeEventListener(e,A){this.#e.delete(A)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof xt=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){let M=document?.currentScript?.src;M&&(PDFWorkerUtil.fallbackWorkerSrc=M.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(M,e){let A;try{if(A=new URL(M),!A.origin||A.origin==="null")return!1}catch{return!1}let r=new URL(e,A);return A.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(M){let e=`importScripts("${M}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts;constructor({name:M=null,port:e=null,verbosity:A=(0,_util.getVerbosityLevel)()}={}){if(this.name=M,this.destroyed=!1,this.verbosity=A,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(PDFWorker.#workerPorts?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(M){this._port=M,this._messageHandler=new _message_handler.MessageHandler("main","worker",M),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:M}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,M)||(M=PDFWorkerUtil.createCDNWrapper(new URL(M,window.location).href));let e=new Worker(M),A=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",c),A.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},c=()=>{this._webWorker||r()};e.addEventListener("error",c),A.on("test",C=>{if(e.removeEventListener("error",c),this.destroyed){r();return}C?(this._messageHandler=A,this._port=e,this._webWorker=e,this._readyCapability.resolve(),A.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),A.destroy(),e.terminate())}),A.on("ready",C=>{if(e.removeEventListener("error",c),this.destroyed){r();return}try{g()}catch{this._setupFakeWorker()}});let g=()=>{let C=new Uint8Array;A.send("test",C,[C.buffer])};g();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(M=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}let e=new LoopbackPort;this._port=e;let A=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(A+"_worker",A,e);M.setup(r,e);let c=new _message_handler.MessageHandler(A,A+"_worker",e);this._messageHandler=c,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})}).catch(M=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${M.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(M){if(!M?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");let e=this.#workerPorts?.get(M.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(M)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){let loader=()=>ae(this,null,function*(){let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof xt=="function"){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#i=new Map;#n=null;constructor(e,A,r,c,g){this.messageHandler=e,this.loadingTask=A,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:c.ownerDocument,styleElement:c.styleElement}),this._params=c,this.canvasFactory=g.canvasFactory,this.filterFactory=g.filterFactory,this.cMapReaderFactory=g.cMapReaderFactory,this.standardFontDataFactory=g.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(e,A=null){let r=this.#e.get(e);if(r)return r;let c=this.messageHandler.sendWithPromise(e,A);return this.#e.set(e,c),c}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,A=_util.AnnotationMode.ENABLE,r=null,c=!1){let g=_util.RenderingIntentFlag.DISPLAY,C=_annotation_storage.SerializableEmpty;switch(e){case"any":g=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":g=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(A){case _util.AnnotationMode.DISABLE:g+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:g+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:g+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,C=(g&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${A}`)}return c&&(g+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:g,cacheKey:`${g}_${C.hash}`,annotationStorageSerializable:C}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#n?.reject(new Error("Worker was destroyed during onPassword callback"));let e=[];for(let r of this.#t.values())e.push(r._destroy());this.#t.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let A=this.messageHandler.sendWithPromise("Terminate",null);return e.push(A),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:e,loadingTask:A}=this;e.on("GetReader",(r,c)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=g=>{this._lastProgress={loaded:g.loaded,total:g.total}},c.onPull=()=>{this._fullReader.read().then(function({value:g,done:C}){if(C){c.close();return}(0,_util.assert)(g instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(g),1,[g])}).catch(g=>{c.error(g)})},c.onCancel=g=>{this._fullReader.cancel(g),c.ready.catch(C=>{if(!this.destroyed)throw C})}}),e.on("ReaderHeadersReady",r=>{let c=new _util.PromiseCapability,g=this._fullReader;return g.headersReady.then(()=>{(!g.isStreamingSupported||!g.isRangeSupported)&&(this._lastProgress&&A.onProgress?.(this._lastProgress),g.onProgress=C=>{A.onProgress?.({loaded:C.loaded,total:C.total})}),c.resolve({isStreamingSupported:g.isStreamingSupported,isRangeSupported:g.isRangeSupported,contentLength:g.contentLength})},c.reject),c.promise}),e.on("GetRangeReader",(r,c)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let g=this._networkStream.getRangeReader(r.begin,r.end);if(!g){c.close();return}c.onPull=()=>{g.read().then(function({value:C,done:w}){if(w){c.close();return}(0,_util.assert)(C instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(C),1,[C])}).catch(C=>{c.error(C)})},c.onCancel=C=>{g.cancel(C),c.ready.catch(w=>{if(!this.destroyed)throw w})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,A._capability.resolve(new PDFDocumentProxy(r,this))}),e.on("DocException",function(r){let c;switch(r.name){case"PasswordException":c=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":c=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":c=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":c=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":c=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}A._capability.reject(c)}),e.on("PasswordRequest",r=>{if(this.#n=new _util.PromiseCapability,A.onPassword){let c=g=>{g instanceof Error?this.#n.reject(g):this.#n.resolve({password:g})};try{A.onPassword(c,r.code)}catch(g){this.#n.reject(g)}}else this.#n.reject(new _util.PasswordException(r.message,r.code));return this.#n.promise}),e.on("DataLoaded",r=>{A.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,c,g])=>{if(!this.destroyed&&!this.commonObjs.has(r))switch(c){case"Font":let C=this._params;if("error"in g){let b=g.error;(0,_util.warn)(`Error during font loading: ${b}`),this.commonObjs.resolve(r,b);break}let w=C.pdfBug&&globalThis.FontInspector?.enabled?(b,a)=>globalThis.FontInspector.fontAdded(b,a):null,E=new _font_loader.FontFaceObject(g,{isEvalSupported:C.isEvalSupported,disableFontFace:C.disableFontFace,ignoreErrors:C.ignoreErrors,inspectFont:w});this.fontLoader.bind(E).catch(b=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!C.fontExtraProperties&&E.data&&(E.data=null),this.commonObjs.resolve(r,E)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,g);break;default:throw new Error(`Got unknown common object type ${c}`)}}),e.on("obj",([r,c,g,C])=>{if(this.destroyed)return;let w=this.#t.get(c);if(!w.objs.has(r))switch(g){case"Image":if(w.objs.resolve(r,C),C){let E;if(C.bitmap){let{width:b,height:a}=C;E=b*a*4}else E=C.data?.length||0;E>_util.MAX_IMAGE_SIZE_TO_CACHE&&(w._maybeCleanupAfterRender=!0)}break;case"Pattern":w.objs.resolve(r,C);break;default:throw new Error(`Got unknown object type ${g}`)}}),e.on("DocProgress",r=>{this.destroyed||A.onProgress?.({loaded:r.loaded,total:r.total})}),e.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:e,transfers:A}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},A).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));let A=e-1,r=this.#i.get(A);if(r)return r;let c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:A}).then(g=>{if(this.destroyed)throw new Error("Transport destroyed");let C=new PDFPageProxy(A,g,this,this._params.pdfBug);return this.#t.set(A,C),C});return this.#i.set(A,c),c}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,A){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:A})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let e="GetMetadata",A=this.#e.get(e);if(A)return A;let r=this.messageHandler.sendWithPromise(e,null).then(c=>({info:c[0],metadata:c[1]?new _metadata.Metadata(c[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(e=!1){return ae(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let A of this.#t.values())if(!A.cleanup())throw new Error(`startCleanup: Page ${A.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}})}get loadingParams(){let{disableAutoFetch:e,enableXfa:A}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:A})}}class PDFObjects{#e=Object.create(null);#t(e){return this.#e[e]||={capability:new _util.PromiseCapability,data:null}}get(e,A=null){if(A){let c=this.#t(e);return c.capability.promise.then(()=>A(c.data)),null}let r=this.#e[e];if(!r?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,A=null){let r=this.#t(e);r.data=A,r.capability.resolve()}clear(){for(let e in this.#e){let{data:A}=this.#e[e];A?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){let{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;let{annotationCanvasMap:A}=this.#e;return e.form||e.canvas&&A?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:A,objs:r,commonObjs:c,annotationCanvasMap:g,operatorList:C,pageIndex:w,canvasFactory:E,filterFactory:b,useRequestAnimationFrame:a=!1,pdfBug:i=!1,pageColors:t=null}){this.callback=e,this.params=A,this.objs=r,this.commonObjs=c,this.annotationCanvasMap=g,this.operatorListIdx=null,this.operatorList=C,this._pageIndex=w,this.canvasFactory=E,this.filterFactory=b,this._pdfBug=i,this.pageColors=t,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=a===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=A.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:A}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:r,viewport:c,transform:g,background:C}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:A},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:g,viewport:c,transparency:e,background:C}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,A=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,A))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return ae(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))})}}let version="3.11.174";exports.version=version;let build="ce8716743";exports.build=build},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r=A(1),c=A(4),g=A(8);let C=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=C;class w{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(a,i){let t=this.#t.get(a);return t===void 0?i:Object.assign(i,t)}getRawValue(a){return this.#t.get(a)}remove(a){if(this.#t.delete(a),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let i of this.#t.values())if(i instanceof c.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(a,i){let t=this.#t.get(a),o=!1;if(t!==void 0)for(let[s,n]of Object.entries(i))t[s]!==n&&(o=!0,t[s]=n);else o=!0,this.#t.set(a,i);o&&this.#i(),i instanceof c.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type)}has(a){return this.#t.has(a)}getAll(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}setAll(a){for(let[i,t]of Object.entries(a))this.setValue(i,t)}get size(){return this.#t.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new E(this)}get serializable(){if(this.#t.size===0)return C;let a=new Map,i=new g.MurmurHash3_64,t=[],o=Object.create(null),s=!1;for(let[n,d]of this.#t){let h=d instanceof c.AnnotationEditor?d.serialize(!1,o):d;h&&(a.set(n,h),i.update(`${n}:${JSON.stringify(h)}`),s||=!!h.bitmap)}if(s)for(let n of a.values())n.bitmap&&t.push(n.bitmap);return a.size>0?{map:a,hash:i.hexdigest(),transfers:t}:C}}e.AnnotationStorage=w;class E extends w{#e;constructor(a){super();let{map:i,hash:t,transfers:o}=a.serializable,s=structuredClone(i,o?{transfer:o}:null);this.#e={map:s,hash:t,transfers:o}}get print(){(0,r.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=E},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r=A(5),c=A(1),g=A(6);class C{#e="";#t=!1;#i=null;#n=null;#o=null;#r=!1;#a=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#s=!1;#h=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#f=!1;#p=C._zIndex++;static _borderLineWidth=-1;static _colorManager=new r.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(b){this.constructor===C&&(0,c.unreachable)("Cannot initialize AnnotationEditor."),this.parent=b.parent,this.id=b.id,this.width=this.height=null,this.pageIndex=b.parent.pageIndex,this.name=b.name,this.div=null,this._uiManager=b.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=b.isCentered,this._structTreeParentId=null;let{rotation:a,rawDims:{pageWidth:i,pageHeight:t,pageX:o,pageY:s}}=this.parent.viewport;this.rotation=a,this.pageRotation=(360+a-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,t],this.pageTranslation=[o,s];let[n,d]=this.parentDimensions;this.x=b.x/n,this.y=b.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,c.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(b){let a=new w({id:b.parent.getNextId(),parent:b.parent,uiManager:b._uiManager});a.annotationElementId=b.annotationElementId,a.deleted=!0,a._uiManager.addToAnnotationStorage(a)}static initialize(b,a=null){if(C._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(t=>[t,b.get(t)])),a?.strings)for(let t of a.strings)C._l10nPromise.set(t,b.get(t));if(C._borderLineWidth!==-1)return;let i=getComputedStyle(document.documentElement);C._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(b,a){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(b){return!1}static paste(b,a){(0,c.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#f}set _isDraggable(b){this.#f=b,this.div?.classList.toggle("draggable",b)}center(){let[b,a]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*a/(b*2),this.y+=this.width*b/(a*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*a/(b*2),this.y-=this.width*b/(a*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(b){this._uiManager.addCommands(b)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(b){b!==null&&(this.pageIndex=b.pageIndex,this.pageDimensions=b.pageDimensions),this.parent=b}focusin(b){this._focusEventsAllowed&&(this.#s?this.#s=!1:this.parent.setSelected(this))}focusout(b){!this._focusEventsAllowed||!this.isAttachedToDOM||b.relatedTarget?.closest(`#${this.id}`)||(b.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(b,a,i,t){let[o,s]=this.parentDimensions;[i,t]=this.screenToPageTranslation(i,t),this.x=(b+i)/o,this.y=(a+t)/s,this.fixAndSetPosition()}#g([b,a],i,t){[i,t]=this.screenToPageTranslation(i,t),this.x+=i/b,this.y+=t/a,this.fixAndSetPosition()}translate(b,a){this.#g(this.parentDimensions,b,a)}translateInPage(b,a){this.#g(this.pageDimensions,b,a),this.div.scrollIntoView({block:"nearest"})}drag(b,a){let[i,t]=this.parentDimensions;if(this.x+=b/i,this.y+=a/t,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:h,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:s}=this,[n,d]=this.#_();o+=n,s+=d,this.div.style.left=`${(100*o).toFixed(2)}%`,this.div.style.top=`${(100*s).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#_(){let[b,a]=this.parentDimensions,{_borderLineWidth:i}=C,t=i/b,o=i/a;switch(this.rotation){case 90:return[-t,o];case 180:return[t,o];case 270:return[t,-o];default:return[-t,-o]}}fixAndSetPosition(){let[b,a]=this.pageDimensions,{x:i,y:t,width:o,height:s}=this;switch(o*=b,s*=a,i*=b,t*=a,this.rotation){case 0:i=Math.max(0,Math.min(b-o,i)),t=Math.max(0,Math.min(a-s,t));break;case 90:i=Math.max(0,Math.min(b-s,i)),t=Math.min(a,Math.max(o,t));break;case 180:i=Math.min(b,Math.max(o,i)),t=Math.min(a,Math.max(s,t));break;case 270:i=Math.min(b,Math.max(s,i)),t=Math.max(0,Math.min(a-o,t));break}this.x=i/=b,this.y=t/=a;let[n,d]=this.#_();i+=n,t+=d;let{style:h}=this.div;h.left=`${(100*i).toFixed(2)}%`,h.top=`${(100*t).toFixed(2)}%`,this.moveInDOM()}static#m(b,a,i){switch(i){case 90:return[a,-b];case 180:return[-b,-a];case 270:return[-a,b];default:return[b,a]}}screenToPageTranslation(b,a){return C.#m(b,a,this.parentRotation)}pageTranslationToScreen(b,a){return C.#m(b,a,360-this.parentRotation)}#u(b){switch(b){case 90:{let[a,i]=this.pageDimensions;return[0,-a/i,i/a,0]}case 180:return[-1,0,0,-1];case 270:{let[a,i]=this.pageDimensions;return[0,a/i,-i/a,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:b,pageDimensions:[a,i]}=this,t=a*b,o=i*b;return c.FeatureTest.isCSSRoundSupported?[Math.round(t),Math.round(o)]:[t,o]}setDims(b,a){let[i,t]=this.parentDimensions;this.div.style.width=`${(100*b/i).toFixed(2)}%`,this.#r||(this.div.style.height=`${(100*a/t).toFixed(2)}%`),this.#i?.classList.toggle("small",b<C.SMALL_EDITOR_SIZE||a<C.SMALL_EDITOR_SIZE)}fixDims(){let{style:b}=this.div,{height:a,width:i}=b,t=i.endsWith("%"),o=!this.#r&&a.endsWith("%");if(t&&o)return;let[s,n]=this.parentDimensions;t||(b.width=`${(100*parseFloat(i)/s).toFixed(2)}%`),!this.#r&&!o&&(b.height=`${(100*parseFloat(a)/n).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#b(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");let b=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||b.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(let a of b){let i=document.createElement("div");this.#a.append(i),i.classList.add("resizer",a),i.addEventListener("pointerdown",this.#w.bind(this,a)),i.addEventListener("contextmenu",g.noContextMenu)}this.div.prepend(this.#a)}#w(b,a){a.preventDefault();let{isMac:i}=c.FeatureTest.platform;if(a.button!==0||a.ctrlKey&&i)return;let t=this.#y.bind(this,b),o=this._isDraggable;this._isDraggable=!1;let s={passive:!0,capture:!0};window.addEventListener("pointermove",t,s);let n=this.x,d=this.y,h=this.width,y=this.height,l=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(a.target).cursor;let _=()=>{this._isDraggable=o,window.removeEventListener("pointerup",_),window.removeEventListener("blur",_),window.removeEventListener("pointermove",t,s),this.parent.div.style.cursor=l,this.div.style.cursor=u;let S=this.x,D=this.y,R=this.width,I=this.height;S===n&&D===d&&R===h&&I===y||this.addCommands({cmd:()=>{this.width=R,this.height=I,this.x=S,this.y=D;let[G,z]=this.parentDimensions;this.setDims(G*R,z*I),this.fixAndSetPosition()},undo:()=>{this.width=h,this.height=y,this.x=n,this.y=d;let[G,z]=this.parentDimensions;this.setDims(G*h,z*y),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",_),window.addEventListener("blur",_)}#y(b,a){let[i,t]=this.parentDimensions,o=this.x,s=this.y,n=this.width,d=this.height,h=C.MIN_SIZE/i,y=C.MIN_SIZE/t,l=L=>Math.round(L*1e4)/1e4,u=this.#u(this.rotation),_=(L,p)=>[u[0]*L+u[2]*p,u[1]*L+u[3]*p],S=this.#u(360-this.rotation),D=(L,p)=>[S[0]*L+S[2]*p,S[1]*L+S[3]*p],R,I,G=!1,z=!1;switch(b){case"topLeft":G=!0,R=(L,p)=>[0,0],I=(L,p)=>[L,p];break;case"topMiddle":R=(L,p)=>[L/2,0],I=(L,p)=>[L/2,p];break;case"topRight":G=!0,R=(L,p)=>[L,0],I=(L,p)=>[0,p];break;case"middleRight":z=!0,R=(L,p)=>[L,p/2],I=(L,p)=>[0,p/2];break;case"bottomRight":G=!0,R=(L,p)=>[L,p],I=(L,p)=>[0,0];break;case"bottomMiddle":R=(L,p)=>[L/2,p],I=(L,p)=>[L/2,0];break;case"bottomLeft":G=!0,R=(L,p)=>[0,p],I=(L,p)=>[L,0];break;case"middleLeft":z=!0,R=(L,p)=>[0,p/2],I=(L,p)=>[L,p/2];break}let $=R(n,d),Q=I(n,d),Y=_(...Q),B=l(o+Y[0]),H=l(s+Y[1]),O=1,f=1,[m,v]=this.screenToPageTranslation(a.movementX,a.movementY);if([m,v]=D(m/i,v/t),G){let L=Math.hypot(n,d);O=f=Math.max(Math.min(Math.hypot(Q[0]-$[0]-m,Q[1]-$[1]-v)/L,1/n,1/d),h/n,y/d)}else z?O=Math.max(h,Math.min(1,Math.abs(Q[0]-$[0]-m)))/n:f=Math.max(y,Math.min(1,Math.abs(Q[1]-$[1]-v)))/d;let T=l(n*O),F=l(d*f);Y=_(...I(T,F));let k=B-Y[0],V=H-Y[1];this.width=T,this.height=F,this.x=k,this.y=V,this.setDims(i*T,t*F),this.fixAndSetPosition()}addAltTextButton(){return ae(this,null,function*(){if(this.#i)return;let b=this.#i=document.createElement("button");b.className="altText";let a=yield C._l10nPromise.get("editor_alt_text_button_label");b.textContent=a,b.setAttribute("aria-label",a),b.tabIndex="0",b.addEventListener("contextmenu",g.noContextMenu),b.addEventListener("pointerdown",i=>i.stopPropagation()),b.addEventListener("click",i=>{i.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),b.addEventListener("keydown",i=>{i.target===b&&i.key==="Enter"&&(i.preventDefault(),this._uiManager.editAltText(this))}),this.#A(),this.div.append(b),C.SMALL_EDITOR_SIZE||(C.SMALL_EDITOR_SIZE=Math.min(128,Math.round(b.getBoundingClientRect().width*1.4)))})}#A(){return ae(this,null,function*(){let b=this.#i;if(!b)return;if(!this.#e&&!this.#t){b.classList.remove("done"),this.#n?.remove();return}C._l10nPromise.get("editor_alt_text_edit_button_label").then(i=>{b.setAttribute("aria-label",i)});let a=this.#n;if(!a){this.#n=a=document.createElement("span"),a.className="tooltip",a.setAttribute("role","tooltip");let i=a.id=`alt-text-tooltip-${this.id}`;b.setAttribute("aria-describedby",i);let t=100;b.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#n.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},t)}),b.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#n?.classList.remove("show")})}b.classList.add("done"),a.innerText=this.#t?yield C._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,a.parentNode||b.append(a)})}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:b,decorative:a}){this.#e===b&&this.#t===a||(this.#e=b,this.#t=a,this.#A())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);let[b,a]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*a/b).toFixed(2)}%`,this.div.style.maxHeight=`${(100*b/a).toFixed(2)}%`);let[i,t]=this.getInitialTranslation();return this.translate(i,t),(0,r.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(b){let{isMac:a}=c.FeatureTest.platform;if(b.button!==0||b.ctrlKey&&a){b.preventDefault();return}this.#s=!0,this.#S(b)}#S(b){if(!this._isDraggable)return;let a=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let i,t;a&&(i={passive:!0,capture:!0},t=s=>{let[n,d]=this.screenToPageTranslation(s.movementX,s.movementY);this._uiManager.dragSelectedEditors(n,d)},window.addEventListener("pointermove",t,i));let o=()=>{if(window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),a&&window.removeEventListener("pointermove",t,i),this.#s=!1,!this._uiManager.endDragSession()){let{isMac:s}=c.FeatureTest.platform;b.ctrlKey&&!s||b.shiftKey||b.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",o),window.addEventListener("blur",o)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(b,a,i){b.changeParent(this),this.x=a,this.y=i,this.fixAndSetPosition()}getRect(b,a){let i=this.parentScale,[t,o]=this.pageDimensions,[s,n]=this.pageTranslation,d=b/i,h=a/i,y=this.x*t,l=this.y*o,u=this.width*t,_=this.height*o;switch(this.rotation){case 0:return[y+d+s,o-l-h-_+n,y+d+u+s,o-l-h+n];case 90:return[y+h+s,o-l+d+n,y+h+_+s,o-l+d+u+n];case 180:return[y-d-u+s,o-l+h+n,y-d+s,o-l+h+_+n];case 270:return[y-h-_+s,o-l-d-u+n,y-h+s,o-l-d+n];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(b,a){let[i,t,o,s]=b,n=o-i,d=s-t;switch(this.rotation){case 0:return[i,a-s,n,d];case 90:return[i,a-t,d,n];case 180:return[o,a-t,n,d];case 270:return[o,a-s,d,n];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(b=!1,a=null){(0,c.unreachable)("An editor must be serializable")}static deserialize(b,a,i){let t=new this.prototype.constructor({parent:a,id:a.getNextId(),uiManager:i});t.rotation=b.rotation;let[o,s]=t.pageDimensions,[n,d,h,y]=t.getRectInCurrentCoords(b.rect,s);return t.x=n/o,t.y=d/s,t.width=h/o,t.height=y/s,t}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#i?.remove(),this.#i=null,this.#n=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#b(),this.#a.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(b,a){}disableEditing(){this.#i&&(this.#i.hidden=!0)}enableEditing(){this.#i&&(this.#i.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#h}set isEditing(b){this.#h=b,this.parent&&(b?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(b,a){this.#r=!0;let i=b/a,{style:t}=this.div;t.aspectRatio=i,t.height="auto"}static get MIN_SIZE(){return 16}}e.AnnotationEditor=C;class w extends C{constructor(b){super(b),this.annotationElementId=b.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=g,e.opacityToHex=C;var r=A(1),c=A(6);function g(o,s,n){for(let d of n)s.addEventListener(d,o[d].bind(o))}function C(o){return Math.round(Math.min(255,Math.max(1,255*o))).toString(16).padStart(2,"0")}class w{#e=0;getId(){return`${r.AnnotationEditorPrefix}${this.#e++}`}}class E{#e=(0,r.getUuid)();#t=0;#i=null;static get _isSVGFittingCanvas(){let s='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',d=new OffscreenCanvas(1,3).getContext("2d"),h=new Image;h.src=s;let y=h.decode().then(()=>(d.drawImage(h,0,0,1,1,0,0,1,3),new Uint32Array(d.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,r.shadow)(this,"_isSVGFittingCanvas",y)}#n(s,n){return ae(this,null,function*(){this.#i||=new Map;let d=this.#i.get(s);if(d===null)return null;if(d?.bitmap)return d.refCounter+=1,d;try{d||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let h;if(typeof n=="string"){d.url=n;let y=yield fetch(n);if(!y.ok)throw new Error(y.statusText);h=yield y.blob()}else h=d.file=n;if(h.type==="image/svg+xml"){let y=E._isSVGFittingCanvas,l=new FileReader,u=new Image,_=new Promise((S,D)=>{u.onload=()=>{d.bitmap=u,d.isSvg=!0,S()},l.onload=()=>ae(this,null,function*(){let R=d.svgUrl=l.result;u.src=(yield y)?`${R}#svgView(preserveAspectRatio(none))`:R}),u.onerror=l.onerror=D});l.readAsDataURL(h),yield _}else d.bitmap=yield createImageBitmap(h);d.refCounter=1}catch(h){console.error(h),d=null}return this.#i.set(s,d),d&&this.#i.set(d.id,d),d})}getFromFile(s){return ae(this,null,function*(){let{lastModified:n,name:d,size:h,type:y}=s;return this.#n(`${n}_${d}_${h}_${y}`,s)})}getFromUrl(s){return ae(this,null,function*(){return this.#n(s,s)})}getFromId(s){return ae(this,null,function*(){this.#i||=new Map;let n=this.#i.get(s);return n?n.bitmap?(n.refCounter+=1,n):n.file?this.getFromFile(n.file):this.getFromUrl(n.url):null})}getSvgUrl(s){let n=this.#i.get(s);return n?.isSvg?n.svgUrl:null}deleteId(s){this.#i||=new Map;let n=this.#i.get(s);n&&(n.refCounter-=1,n.refCounter===0&&(n.bitmap=null))}isValidId(s){return s.startsWith(`image_${this.#e}_`)}}class b{#e=[];#t=!1;#i;#n=-1;constructor(s=128){this.#i=s}add({cmd:s,undo:n,mustExec:d,type:h=NaN,overwriteIfSameType:y=!1,keepUndo:l=!1}){if(d&&s(),this.#t)return;let u={cmd:s,undo:n,type:h};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(u);return}if(y&&this.#e[this.#n].type===h){l&&(u.undo=this.#e[this.#n].undo),this.#e[this.#n]=u;return}let _=this.#n+1;_===this.#i?this.#e.splice(0,1):(this.#n=_,_<this.#e.length&&this.#e.splice(_)),this.#e.push(u)}undo(){this.#n!==-1&&(this.#t=!0,this.#e[this.#n].undo(),this.#t=!1,this.#n-=1)}redo(){this.#n<this.#e.length-1&&(this.#n+=1,this.#t=!0,this.#e[this.#n].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=b;class a{constructor(s){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:n}=r.FeatureTest.platform;for(let[d,h,y={}]of s)for(let l of d){let u=l.startsWith("mac+");n&&u?(this.callbacks.set(l.slice(4),{callback:h,options:y}),this.allKeys.add(l.split("+").at(-1))):!n&&!u&&(this.callbacks.set(l,{callback:h,options:y}),this.allKeys.add(l.split("+").at(-1)))}}#e(s){s.altKey&&this.buffer.push("alt"),s.ctrlKey&&this.buffer.push("ctrl"),s.metaKey&&this.buffer.push("meta"),s.shiftKey&&this.buffer.push("shift"),this.buffer.push(s.key);let n=this.buffer.join("+");return this.buffer.length=0,n}exec(s,n){if(!this.allKeys.has(n.key))return;let d=this.callbacks.get(this.#e(n));if(!d)return;let{callback:h,options:{bubbles:y=!1,args:l=[],checker:u=null}}=d;u&&!u(s,n)||(h.bind(s,...l)(),y||(n.stopPropagation(),n.preventDefault()))}}e.KeyboardManager=a;class i{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let s=new Map([["CanvasText",null],["Canvas",null]]);return(0,c.getColorValues)(s),(0,r.shadow)(this,"_colors",s)}convert(s){let n=(0,c.getRGB)(s);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(let[d,h]of this._colors)if(h.every((y,l)=>y===n[l]))return i._colorsMapping.get(d);return n}getHexCode(s){let n=this._colors.get(s);return n?r.Util.makeHexColor(...n):s}}e.ColorManager=i;let t=(()=>{class o{#e=null;#t=new Map;#i=new Map;#n=null;#o=null;#r=new b;#a=0;#l=new Set;#c=null;#s=null;#h=new Set;#d=null;#f=new w;#p=!1;#g=!1;#_=null;#m=r.AnnotationEditorType.NONE;#u=new Set;#b=null;#w=this.blur.bind(this);#y=this.focus.bind(this);#A=this.copy.bind(this);#S=this.cut.bind(this);#I=this.paste.bind(this);#R=this.keydown.bind(this);#k=this.onEditingAction.bind(this);#v=this.onPageChanging.bind(this);#M=this.onScaleChanging.bind(this);#P=this.onRotationChanging.bind(this);#D={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#E=[0,0];#T=null;#x=null;#L=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let n=o.prototype,d=l=>{let{activeElement:u}=document;return u&&l.#x.contains(u)&&l.hasSomethingToControl()},h=this.TRANSLATE_SMALL,y=this.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new a([[["ctrl+a","mac+meta+a"],n.selectAll],[["ctrl+z","mac+meta+z"],n.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],n.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],n.delete],[["Escape","mac+Escape"],n.unselectAll],[["ArrowLeft","mac+ArrowLeft"],n.translateSelectedEditors,{args:[-h,0],checker:d}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],n.translateSelectedEditors,{args:[-y,0],checker:d}],[["ArrowRight","mac+ArrowRight"],n.translateSelectedEditors,{args:[h,0],checker:d}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],n.translateSelectedEditors,{args:[y,0],checker:d}],[["ArrowUp","mac+ArrowUp"],n.translateSelectedEditors,{args:[0,-h],checker:d}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],n.translateSelectedEditors,{args:[0,-y],checker:d}],[["ArrowDown","mac+ArrowDown"],n.translateSelectedEditors,{args:[0,h],checker:d}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],n.translateSelectedEditors,{args:[0,y],checker:d}]]))}constructor(n,d,h,y,l,u){this.#x=n,this.#L=d,this.#n=h,this._eventBus=y,this._eventBus._on("editingaction",this.#k),this._eventBus._on("pagechanging",this.#v),this._eventBus._on("scalechanging",this.#M),this._eventBus._on("rotationchanging",this.#P),this.#o=l.annotationStorage,this.#d=l.filterFactory,this.#b=u,this.viewParameters={realScale:c.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#N(),this.#U(),this._eventBus._off("editingaction",this.#k),this._eventBus._off("pagechanging",this.#v),this._eventBus._off("scalechanging",this.#M),this._eventBus._off("rotationchanging",this.#P);for(let n of this.#i.values())n.destroy();this.#i.clear(),this.#t.clear(),this.#h.clear(),this.#e=null,this.#u.clear(),this.#r.destroy(),this.#n.destroy()}get hcmFilter(){return(0,r.shadow)(this,"hcmFilter",this.#b?this.#d.addHCMFilter(this.#b.foreground,this.#b.background):"none")}get direction(){return(0,r.shadow)(this,"direction",getComputedStyle(this.#x).direction)}editAltText(n){this.#n?.editAltText(this,n)}onPageChanging({pageNumber:n}){this.#a=n-1}focusMainContainer(){this.#x.focus()}findParent(n,d){for(let h of this.#i.values()){let{x:y,y:l,width:u,height:_}=h.div.getBoundingClientRect();if(n>=y&&n<=y+u&&d>=l&&d<=l+_)return h}return null}disableUserSelect(n=!1){this.#L.classList.toggle("noUserSelect",n)}addShouldRescale(n){this.#h.add(n)}removeShouldRescale(n){this.#h.delete(n)}onScaleChanging({scale:n}){this.commitOrRemove(),this.viewParameters.realScale=n*c.PixelsPerInch.PDF_TO_CSS_UNITS;for(let d of this.#h)d.onScaleChanging()}onRotationChanging({pagesRotation:n}){this.commitOrRemove(),this.viewParameters.rotation=n}addToAnnotationStorage(n){!n.isEmpty()&&this.#o&&!this.#o.has(n.id)&&this.#o.setValue(n.id,n)}#B(){window.addEventListener("focus",this.#y),window.addEventListener("blur",this.#w)}#U(){window.removeEventListener("focus",this.#y),window.removeEventListener("blur",this.#w)}blur(){if(!this.hasSelection)return;let{activeElement:n}=document;for(let d of this.#u)if(d.div.contains(n)){this.#_=[d,n],d._focusEventsAllowed=!1;break}}focus(){if(!this.#_)return;let[n,d]=this.#_;this.#_=null,d.addEventListener("focusin",()=>{n._focusEventsAllowed=!0},{once:!0}),d.focus()}#V(){window.addEventListener("keydown",this.#R,{capture:!0})}#N(){window.removeEventListener("keydown",this.#R,{capture:!0})}#F(){document.addEventListener("copy",this.#A),document.addEventListener("cut",this.#S),document.addEventListener("paste",this.#I)}#O(){document.removeEventListener("copy",this.#A),document.removeEventListener("cut",this.#S),document.removeEventListener("paste",this.#I)}addEditListeners(){this.#V(),this.#F()}removeEditListeners(){this.#N(),this.#O()}copy(n){if(n.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;let d=[];for(let h of this.#u){let y=h.serialize(!0);y&&d.push(y)}d.length!==0&&n.clipboardData.setData("application/pdfjs",JSON.stringify(d))}cut(n){this.copy(n),this.delete()}paste(n){n.preventDefault();let{clipboardData:d}=n;for(let l of d.items)for(let u of this.#s)if(u.isHandlingMimeForPasting(l.type)){u.paste(l,this.currentLayer);return}let h=d.getData("application/pdfjs");if(!h)return;try{h=JSON.parse(h)}catch(l){(0,r.warn)(`paste: "${l.message}".`);return}if(!Array.isArray(h))return;this.unselectAll();let y=this.currentLayer;try{let l=[];for(let S of h){let D=y.deserialize(S);if(!D)return;l.push(D)}let u=()=>{for(let S of l)this.#j(S);this.#W(l)},_=()=>{for(let S of l)S.remove()};this.addCommands({cmd:u,undo:_,mustExec:!0})}catch(l){(0,r.warn)(`paste: "${l.message}".`)}}keydown(n){this.getActive()?.shouldGetKeyboardEvents()||o._keyboardManager.exec(this,n)}onEditingAction(n){["undo","redo","delete","selectAll"].includes(n.name)&&this[n.name]()}#C(n){Object.entries(n).some(([h,y])=>this.#D[h]!==y)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#D,n)})}#G(n){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:n})}setEditingState(n){n?(this.#B(),this.#V(),this.#F(),this.#C({isEditing:this.#m!==r.AnnotationEditorType.NONE,isEmpty:this.#H(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#U(),this.#N(),this.#O(),this.#C({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(n){if(!this.#s){this.#s=n;for(let d of this.#s)this.#G(d.defaultPropertiesToUpdate)}}getId(){return this.#f.getId()}get currentLayer(){return this.#i.get(this.#a)}getLayer(n){return this.#i.get(n)}get currentPageIndex(){return this.#a}addLayer(n){this.#i.set(n.pageIndex,n),this.#p?n.enable():n.disable()}removeLayer(n){this.#i.delete(n.pageIndex)}updateMode(n,d=null){if(this.#m!==n){if(this.#m=n,n===r.AnnotationEditorType.NONE){this.setEditingState(!1),this.#$();return}this.setEditingState(!0),this.#z(),this.unselectAll();for(let h of this.#i.values())h.updateMode(n);if(d){for(let h of this.#t.values())if(h.annotationElementId===d){this.setSelected(h),h.enterInEditMode();break}}}}updateToolbar(n){n!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:n})}updateParams(n,d){if(this.#s){if(n===r.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(n);return}for(let h of this.#u)h.updateParams(n,d);for(let h of this.#s)h.updateDefaultParams(n,d)}}enableWaiting(n=!1){if(this.#g!==n){this.#g=n;for(let d of this.#i.values())n?d.disableClick():d.enableClick(),d.div.classList.toggle("waiting",n)}}#z(){if(!this.#p){this.#p=!0;for(let n of this.#i.values())n.enable()}}#$(){if(this.unselectAll(),this.#p){this.#p=!1;for(let n of this.#i.values())n.disable()}}getEditors(n){let d=[];for(let h of this.#t.values())h.pageIndex===n&&d.push(h);return d}getEditor(n){return this.#t.get(n)}addEditor(n){this.#t.set(n.id,n)}removeEditor(n){this.#t.delete(n.id),this.unselect(n),(!n.annotationElementId||!this.#l.has(n.annotationElementId))&&this.#o?.remove(n.id)}addDeletedAnnotationElement(n){this.#l.add(n.annotationElementId),n.deleted=!0}isDeletedAnnotationElement(n){return this.#l.has(n)}removeDeletedAnnotationElement(n){this.#l.delete(n.annotationElementId),n.deleted=!1}#j(n){let d=this.#i.get(n.pageIndex);d?d.addOrRebuild(n):this.addEditor(n)}setActiveEditor(n){this.#e!==n&&(this.#e=n,n&&this.#G(n.propertiesToUpdate))}toggleSelected(n){if(this.#u.has(n)){this.#u.delete(n),n.unselect(),this.#C({hasSelectedEditor:this.hasSelection});return}this.#u.add(n),n.select(),this.#G(n.propertiesToUpdate),this.#C({hasSelectedEditor:!0})}setSelected(n){for(let d of this.#u)d!==n&&d.unselect();this.#u.clear(),this.#u.add(n),n.select(),this.#G(n.propertiesToUpdate),this.#C({hasSelectedEditor:!0})}isSelected(n){return this.#u.has(n)}unselect(n){n.unselect(),this.#u.delete(n),this.#C({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#r.undo(),this.#C({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#H()})}redo(){this.#r.redo(),this.#C({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#H()})}addCommands(n){this.#r.add(n),this.#C({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#H()})}#H(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(let n of this.#t.values())return n.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let n=[...this.#u],d=()=>{for(let y of n)y.remove()},h=()=>{for(let y of n)this.#j(y)};this.addCommands({cmd:d,undo:h,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#W(n){this.#u.clear();for(let d of n)d.isEmpty()||(this.#u.add(d),d.select());this.#C({hasSelectedEditor:!0})}selectAll(){for(let n of this.#u)n.commit();this.#W(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(let n of this.#u)n.unselect();this.#u.clear(),this.#C({hasSelectedEditor:!1})}}translateSelectedEditors(n,d,h=!1){if(h||this.commitOrRemove(),!this.hasSelection)return;this.#E[0]+=n,this.#E[1]+=d;let[y,l]=this.#E,u=[...this.#u],_=1e3;this.#T&&clearTimeout(this.#T),this.#T=setTimeout(()=>{this.#T=null,this.#E[0]=this.#E[1]=0,this.addCommands({cmd:()=>{for(let S of u)this.#t.has(S.id)&&S.translateInPage(y,l)},undo:()=>{for(let S of u)this.#t.has(S.id)&&S.translateInPage(-y,-l)},mustExec:!1})},_);for(let S of u)S.translateInPage(n,d)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(let n of this.#u)this.#c.set(n,{savedX:n.x,savedY:n.y,savedPageIndex:n.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);let n=this.#c;this.#c=null;let d=!1;for(let[{x:y,y:l,pageIndex:u},_]of n)_.newX=y,_.newY=l,_.newPageIndex=u,d||=y!==_.savedX||l!==_.savedY||u!==_.savedPageIndex;if(!d)return!1;let h=(y,l,u,_)=>{if(this.#t.has(y.id)){let S=this.#i.get(_);S?y._setParentAndPosition(S,l,u):(y.pageIndex=_,y.x=l,y.y=u)}};return this.addCommands({cmd:()=>{for(let[y,{newX:l,newY:u,newPageIndex:_}]of n)h(y,l,u,_)},undo:()=>{for(let[y,{savedX:l,savedY:u,savedPageIndex:_}]of n)h(y,l,u,_)},mustExec:!0}),!0}dragSelectedEditors(n,d){if(this.#c)for(let h of this.#c.keys())h.drag(n,d)}rebuild(n){if(n.parent===null){let d=this.getLayer(n.pageIndex);d?(d.changeParent(n),d.addOrRebuild(n)):(this.addEditor(n),this.addToAnnotationStorage(n),n.rebuild())}else n.parent.addOrRebuild(n)}isActive(n){return this.#e===n}getActive(){return this.#e}getMode(){return this.#m}get imageManager(){return(0,r.shadow)(this,"imageManager",new E)}}return o})();e.AnnotationEditorUIManager=t},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=D,e.getColorValues=$,e.getCurrentTransform=Q,e.getCurrentTransformInverse=Y,e.getFilenameFromUrl=h,e.getPdfFilenameFromUrl=y,e.getRGB=z,e.getXfaPageViewport=G,e.isDataScheme=n,e.isPdfFile=d,e.isValidFetchUrl=u,e.loadScript=S,e.noContextMenu=_,e.setLayerDimensions=B;var r=A(7),c=A(1);let g="http://www.w3.org/2000/svg";class C{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=C;class w extends r.BaseFilterFactory{#e;#t;#i;#n;#o;#r;#a;#l;#c;#s;#h=0;constructor({docId:O,ownerDocument:f=globalThis.document}={}){super(),this.#i=O,this.#n=f}get#d(){return this.#e||=new Map}get#f(){if(!this.#t){let O=this.#n.createElement("div"),{style:f}=O;f.visibility="hidden",f.contain="strict",f.width=f.height=0,f.position="absolute",f.top=f.left=0,f.zIndex=-1;let m=this.#n.createElementNS(g,"svg");m.setAttribute("width",0),m.setAttribute("height",0),this.#t=this.#n.createElementNS(g,"defs"),O.append(m),m.append(this.#t),this.#n.body.append(O)}return this.#t}addFilter(O){if(!O)return"none";let f=this.#d.get(O);if(f)return f;let m,v,T,F;if(O.length===1){let p=O[0],P=new Array(256);for(let x=0;x<256;x++)P[x]=p[x]/255;F=m=v=T=P.join(",")}else{let[p,P,x]=O,N=new Array(256),U=new Array(256),j=new Array(256);for(let q=0;q<256;q++)N[q]=p[q]/255,U[q]=P[q]/255,j[q]=x[q]/255;m=N.join(","),v=U.join(","),T=j.join(","),F=`${m}${v}${T}`}if(f=this.#d.get(F),f)return this.#d.set(O,f),f;let k=`g_${this.#i}_transfer_map_${this.#h++}`,V=`url(#${k})`;this.#d.set(O,V),this.#d.set(F,V);let L=this.#g(k);return this.#m(m,v,T,L),V}addHCMFilter(O,f){let m=`${O}-${f}`;if(this.#r===m)return this.#a;if(this.#r=m,this.#a="none",this.#o?.remove(),!O||!f)return this.#a;let v=this.#u(O);O=c.Util.makeHexColor(...v);let T=this.#u(f);if(f=c.Util.makeHexColor(...T),this.#f.style.color="",O==="#000000"&&f==="#ffffff"||O===f)return this.#a;let F=new Array(256);for(let P=0;P<=255;P++){let x=P/255;F[P]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}let k=F.join(","),V=`g_${this.#i}_hcm_filter`,L=this.#l=this.#g(V);this.#m(k,k,k,L),this.#p(L);let p=(P,x)=>{let N=v[P]/255,U=T[P]/255,j=new Array(x+1);for(let q=0;q<=x;q++)j[q]=N+q/x*(U-N);return j.join(",")};return this.#m(p(0,5),p(1,5),p(2,5),L),this.#a=`url(#${V})`,this.#a}addHighlightHCMFilter(O,f,m,v){let T=`${O}-${f}-${m}-${v}`;if(this.#c===T)return this.#s;if(this.#c=T,this.#s="none",this.#l?.remove(),!O||!f)return this.#s;let[F,k]=[O,f].map(this.#u.bind(this)),V=Math.round(.2126*F[0]+.7152*F[1]+.0722*F[2]),L=Math.round(.2126*k[0]+.7152*k[1]+.0722*k[2]),[p,P]=[m,v].map(this.#u.bind(this));L<V&&([V,L,p,P]=[L,V,P,p]),this.#f.style.color="";let x=(j,q,ie)=>{let J=new Array(256),W=(L-V)/ie,K=j/255,X=(q-j)/(255*ie),Z=0;for(let ne=0;ne<=ie;ne++){let re=Math.round(V+ne*W),oe=K+ne*X;for(let ce=Z;ce<=re;ce++)J[ce]=oe;Z=re+1}for(let ne=Z;ne<256;ne++)J[ne]=J[Z-1];return J.join(",")},N=`g_${this.#i}_hcm_highlight_filter`,U=this.#l=this.#g(N);return this.#p(U),this.#m(x(p[0],P[0],5),x(p[1],P[1],5),x(p[2],P[2],5),U),this.#s=`url(#${N})`,this.#s}destroy(O=!1){O&&(this.#a||this.#s)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#h=0)}#p(O){let f=this.#n.createElementNS(g,"feColorMatrix");f.setAttribute("type","matrix"),f.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),O.append(f)}#g(O){let f=this.#n.createElementNS(g,"filter");return f.setAttribute("color-interpolation-filters","sRGB"),f.setAttribute("id",O),this.#f.append(f),f}#_(O,f,m){let v=this.#n.createElementNS(g,f);v.setAttribute("type","discrete"),v.setAttribute("tableValues",m),O.append(v)}#m(O,f,m,v){let T=this.#n.createElementNS(g,"feComponentTransfer");v.append(T),this.#_(T,"feFuncR",O),this.#_(T,"feFuncG",f),this.#_(T,"feFuncB",m)}#u(O){return this.#f.style.color=O,z(getComputedStyle(this.#f).getPropertyValue("color"))}}e.DOMFilterFactory=w;class E extends r.BaseCanvasFactory{constructor({ownerDocument:O=globalThis.document}={}){super(),this._document=O}_createCanvas(O,f){let m=this._document.createElement("canvas");return m.width=O,m.height=f,m}}e.DOMCanvasFactory=E;function b(H,O=!1){return ae(this,null,function*(){if(u(H,document.baseURI)){let f=yield fetch(H);if(!f.ok)throw new Error(f.statusText);return O?new Uint8Array(yield f.arrayBuffer()):(0,c.stringToBytes)(yield f.text())}return new Promise((f,m)=>{let v=new XMLHttpRequest;v.open("GET",H,!0),O&&(v.responseType="arraybuffer"),v.onreadystatechange=()=>{if(v.readyState===XMLHttpRequest.DONE){if(v.status===200||v.status===0){let T;if(O&&v.response?T=new Uint8Array(v.response):!O&&v.responseText&&(T=(0,c.stringToBytes)(v.responseText)),T){f(T);return}}m(new Error(v.statusText))}},v.send(null)})})}class a extends r.BaseCMapReaderFactory{_fetchData(O,f){return b(O,this.isCompressed).then(m=>({cMapData:m,compressionType:f}))}}e.DOMCMapReaderFactory=a;class i extends r.BaseStandardFontDataFactory{_fetchData(O){return b(O,!0)}}e.DOMStandardFontDataFactory=i;class t extends r.BaseSVGFactory{_createSVG(O){return document.createElementNS(g,O)}}e.DOMSVGFactory=t;class o{constructor({viewBox:O,scale:f,rotation:m,offsetX:v=0,offsetY:T=0,dontFlip:F=!1}){this.viewBox=O,this.scale=f,this.rotation=m,this.offsetX=v,this.offsetY=T;let k=(O[2]+O[0])/2,V=(O[3]+O[1])/2,L,p,P,x;switch(m%=360,m<0&&(m+=360),m){case 180:L=-1,p=0,P=0,x=1;break;case 90:L=0,p=1,P=1,x=0;break;case 270:L=0,p=-1,P=-1,x=0;break;case 0:L=1,p=0,P=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}F&&(P=-P,x=-x);let N,U,j,q;L===0?(N=Math.abs(V-O[1])*f+v,U=Math.abs(k-O[0])*f+T,j=(O[3]-O[1])*f,q=(O[2]-O[0])*f):(N=Math.abs(k-O[0])*f+v,U=Math.abs(V-O[1])*f+T,j=(O[2]-O[0])*f,q=(O[3]-O[1])*f),this.transform=[L*f,p*f,P*f,x*f,N-L*f*k-P*f*V,U-p*f*k-x*f*V],this.width=j,this.height=q}get rawDims(){let{viewBox:O}=this;return(0,c.shadow)(this,"rawDims",{pageWidth:O[2]-O[0],pageHeight:O[3]-O[1],pageX:O[0],pageY:O[1]})}clone({scale:O=this.scale,rotation:f=this.rotation,offsetX:m=this.offsetX,offsetY:v=this.offsetY,dontFlip:T=!1}={}){return new o({viewBox:this.viewBox.slice(),scale:O,rotation:f,offsetX:m,offsetY:v,dontFlip:T})}convertToViewportPoint(O,f){return c.Util.applyTransform([O,f],this.transform)}convertToViewportRectangle(O){let f=c.Util.applyTransform([O[0],O[1]],this.transform),m=c.Util.applyTransform([O[2],O[3]],this.transform);return[f[0],f[1],m[0],m[1]]}convertToPdfPoint(O,f){return c.Util.applyInverseTransform([O,f],this.transform)}}e.PageViewport=o;class s extends c.BaseException{constructor(O,f=0){super(O,"RenderingCancelledException"),this.extraDelay=f}}e.RenderingCancelledException=s;function n(H){let O=H.length,f=0;for(;f<O&&H[f].trim()==="";)f++;return H.substring(f,f+5).toLowerCase()==="data:"}function d(H){return typeof H=="string"&&/\.pdf$/i.test(H)}function h(H,O=!1){return O||([H]=H.split(/[#?]/,1)),H.substring(H.lastIndexOf("/")+1)}function y(H,O="document.pdf"){if(typeof H!="string")return O;if(n(H))return(0,c.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),O;let f=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,m=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,v=f.exec(H),T=m.exec(v[1])||m.exec(v[2])||m.exec(v[3]);if(T&&(T=T[0],T.includes("%")))try{T=m.exec(decodeURIComponent(T))[0]}catch{}return T||O}class l{started=Object.create(null);times=[];time(O){O in this.started&&(0,c.warn)(`Timer is already running for ${O}`),this.started[O]=Date.now()}timeEnd(O){O in this.started||(0,c.warn)(`Timer has not been started for ${O}`),this.times.push({name:O,start:this.started[O],end:Date.now()}),delete this.started[O]}toString(){let O=[],f=0;for(let{name:m}of this.times)f=Math.max(m.length,f);for(let{name:m,start:v,end:T}of this.times)O.push(`${m.padEnd(f)} ${T-v}ms
`);return O.join("")}}e.StatTimer=l;function u(H,O){try{let{protocol:f}=O?new URL(H,O):new URL(H);return f==="http:"||f==="https:"}catch{return!1}}function _(H){H.preventDefault()}function S(H,O=!1){return new Promise((f,m)=>{let v=document.createElement("script");v.src=H,v.onload=function(T){O&&v.remove(),f(T)},v.onerror=function(){m(new Error(`Cannot load script at: ${v.src}`))},(document.head||document.documentElement).append(v)})}function D(H){console.log("Deprecated API usage: "+H)}let R;class I{static toDateObject(O){if(!O||typeof O!="string")return null;R||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let f=R.exec(O);if(!f)return null;let m=parseInt(f[1],10),v=parseInt(f[2],10);v=v>=1&&v<=12?v-1:0;let T=parseInt(f[3],10);T=T>=1&&T<=31?T:1;let F=parseInt(f[4],10);F=F>=0&&F<=23?F:0;let k=parseInt(f[5],10);k=k>=0&&k<=59?k:0;let V=parseInt(f[6],10);V=V>=0&&V<=59?V:0;let L=f[7]||"Z",p=parseInt(f[8],10);p=p>=0&&p<=23?p:0;let P=parseInt(f[9],10)||0;return P=P>=0&&P<=59?P:0,L==="-"?(F+=p,k+=P):L==="+"&&(F-=p,k-=P),new Date(Date.UTC(m,v,T,F,k,V))}}e.PDFDateString=I;function G(H,{scale:O=1,rotation:f=0}){let{width:m,height:v}=H.attributes.style,T=[0,0,parseInt(m),parseInt(v)];return new o({viewBox:T,scale:O,rotation:f})}function z(H){if(H.startsWith("#")){let O=parseInt(H.slice(1),16);return[(O&16711680)>>16,(O&65280)>>8,O&255]}return H.startsWith("rgb(")?H.slice(4,-1).split(",").map(O=>parseInt(O)):H.startsWith("rgba(")?H.slice(5,-1).split(",").map(O=>parseInt(O)).slice(0,3):((0,c.warn)(`Not a valid color format: "${H}"`),[0,0,0])}function $(H){let O=document.createElement("span");O.style.visibility="hidden",document.body.append(O);for(let f of H.keys()){O.style.color=f;let m=window.getComputedStyle(O).color;H.set(f,z(m))}O.remove()}function Q(H){let{a:O,b:f,c:m,d:v,e:T,f:F}=H.getTransform();return[O,f,m,v,T,F]}function Y(H){let{a:O,b:f,c:m,d:v,e:T,f:F}=H.getTransform().invertSelf();return[O,f,m,v,T,F]}function B(H,O,f=!1,m=!0){if(O instanceof o){let{pageWidth:v,pageHeight:T}=O.rawDims,{style:F}=H,k=c.FeatureTest.isCSSRoundSupported,V=`var(--scale-factor) * ${v}px`,L=`var(--scale-factor) * ${T}px`,p=k?`round(${V}, 1px)`:`calc(${V})`,P=k?`round(${L}, 1px)`:`calc(${L})`;!f||O.rotation%180===0?(F.width=p,F.height=P):(F.width=P,F.height=p)}m&&H.setAttribute("data-main-rotation",O.rotation)}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=A(1);class c{constructor(){this.constructor===c&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(a){return"none"}addHCMFilter(a,i){return"none"}addHighlightHCMFilter(a,i,t,o){return"none"}destroy(a=!1){}}e.BaseFilterFactory=c;class g{constructor(){this.constructor===g&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(a,i){if(a<=0||i<=0)throw new Error("Invalid canvas size");let t=this._createCanvas(a,i);return{canvas:t,context:t.getContext("2d")}}reset(a,i,t){if(!a.canvas)throw new Error("Canvas is not specified");if(i<=0||t<=0)throw new Error("Invalid canvas size");a.canvas.width=i,a.canvas.height=t}destroy(a){if(!a.canvas)throw new Error("Canvas is not specified");a.canvas.width=0,a.canvas.height=0,a.canvas=null,a.context=null}_createCanvas(a,i){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=g;class C{constructor({baseUrl:a=null,isCompressed:i=!0}){this.constructor===C&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=a,this.isCompressed=i}fetch(i){return ae(this,arguments,function*({name:a}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!a)throw new Error("CMap name must be specified.");let t=this.baseUrl+a+(this.isCompressed?".bcmap":""),o=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(t,o).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})})}_fetchData(a,i){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=C;class w{constructor({baseUrl:a=null}){this.constructor===w&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=a}fetch(i){return ae(this,arguments,function*({filename:a}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!a)throw new Error("Font filename must be specified.");let t=`${this.baseUrl}${a}`;return this._fetchData(t).catch(o=>{throw new Error(`Unable to load font data at: ${t}`)})})}_fetchData(a){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=w;class E{constructor(){this.constructor===E&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(a,i,t=!1){if(a<=0||i<=0)throw new Error("Invalid SVG dimensions");let o=this._createSVG("svg:svg");return o.setAttribute("version","1.1"),t||(o.setAttribute("width",`${a}px`),o.setAttribute("height",`${i}px`)),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("viewBox",`0 0 ${a} ${i}`),o}createElement(a){if(typeof a!="string")throw new Error("Invalid SVG element type");return this._createSVG(a)}_createSVG(a){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=E},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=A(1);let c=3285377520,g=4294901760,C=65535;class w{constructor(b){this.h1=b?b&4294967295:c,this.h2=b?b&4294967295:c}update(b){let a,i;if(typeof b=="string"){a=new Uint8Array(b.length*2),i=0;for(let D=0,R=b.length;D<R;D++){let I=b.charCodeAt(D);I<=255?a[i++]=I:(a[i++]=I>>>8,a[i++]=I&255)}}else if((0,r.isArrayBuffer)(b))a=b.slice(),i=a.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");let t=i>>2,o=i-t*4,s=new Uint32Array(a.buffer,0,t),n=0,d=0,h=this.h1,y=this.h2,l=3432918353,u=461845907,_=l&C,S=u&C;for(let D=0;D<t;D++)D&1?(n=s[D],n=n*l&g|n*_&C,n=n<<15|n>>>17,n=n*u&g|n*S&C,h^=n,h=h<<13|h>>>19,h=h*5+3864292196):(d=s[D],d=d*l&g|d*_&C,d=d<<15|d>>>17,d=d*u&g|d*S&C,y^=d,y=y<<13|y>>>19,y=y*5+3864292196);switch(n=0,o){case 3:n^=a[t*4+2]<<16;case 2:n^=a[t*4+1]<<8;case 1:n^=a[t*4],n=n*l&g|n*_&C,n=n<<15|n>>>17,n=n*u&g|n*S&C,t&1?h^=n:y^=n}this.h1=h,this.h2=y}hexdigest(){let b=this.h1,a=this.h2;return b^=a>>>1,b=b*3981806797&g|b*36045&C,a=a*4283543511&g|((a<<16|b>>>16)*2950163797&g)>>>16,b^=a>>>1,b=b*444984403&g|b*60499&C,a=a*3301882366&g|((a<<16|b>>>16)*3120437893&g)>>>16,b^=a>>>1,(b>>>0).toString(16).padStart(8,"0")+(a>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=w},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r=A(1);class c{#e=new Set;constructor({ownerDocument:w=globalThis.document,styleElement:E=null}){this._document=w,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(w){this.nativeFontFaces.add(w),this._document.fonts.add(w)}removeNativeFontFace(w){this.nativeFontFaces.delete(w),this._document.fonts.delete(w)}insertRule(w){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let E=this.styleElement.sheet;E.insertRule(w,E.cssRules.length)}clear(){for(let w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(w){return ae(this,null,function*(){if(!(!w||this.#e.has(w.loadedName))){if((0,r.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:E,src:b,style:a}=w,i=new FontFace(E,b,a);this.addNativeFontFace(i);try{yield i.load(),this.#e.add(E)}catch{(0,r.warn)(`Cannot load system font: ${w.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(i)}return}(0,r.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(w){return ae(this,null,function*(){if(w.attached||w.missingFile&&!w.systemFontInfo)return;if(w.attached=!0,w.systemFontInfo){yield this.loadSystemFont(w.systemFontInfo);return}if(this.isFontLoadingAPISupported){let b=w.createNativeFontFace();if(b){this.addNativeFontFace(b);try{yield b.loaded}catch(a){throw(0,r.warn)(`Failed to load font '${b.family}': '${a}'.`),w.disableFontFace=!0,a}}return}let E=w.createFontFaceRule();if(E){if(this.insertRule(E),this.isSyncFontLoadingSupported)return;yield new Promise(b=>{let a=this._queueLoadingCallback(b);this._prepareFontLoadEvent(w,a)})}})}get isFontLoadingAPISupported(){let w=!!this._document?.fonts;return(0,r.shadow)(this,"isFontLoadingAPISupported",w)}get isSyncFontLoadingSupported(){let w=!1;return(r.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(w=!0),(0,r.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){function E(){for((0,r.assert)(!a.done,"completeRequest() cannot be called twice."),a.done=!0;b.length>0&&b[0].done;){let i=b.shift();setTimeout(i.callback,0)}}let{loadingRequests:b}=this,a={done:!1,complete:E,callback:w};return b.push(a),a}get _loadTestFont(){let w=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,r.shadow)(this,"_loadTestFont",w)}_prepareFontLoadEvent(w,E){function b(G,z){return G.charCodeAt(z)<<24|G.charCodeAt(z+1)<<16|G.charCodeAt(z+2)<<8|G.charCodeAt(z+3)&255}function a(G,z,$,Q){let Y=G.substring(0,z),B=G.substring(z+$);return Y+Q+B}let i,t,o=this._document.createElement("canvas");o.width=1,o.height=1;let s=o.getContext("2d"),n=0;function d(G,z){if(++n>30){(0,r.warn)("Load test font never loaded."),z();return}if(s.font="30px "+G,s.fillText(".",0,20),s.getImageData(0,0,1,1).data[3]>0){z();return}setTimeout(d.bind(null,G,z))}let h=`lt${Date.now()}${this.loadTestFontId++}`,y=this._loadTestFont;y=a(y,976,h.length,h);let u=16,_=1482184792,S=b(y,u);for(i=0,t=h.length-3;i<t;i+=4)S=S-_+b(h,i)|0;i<h.length&&(S=S-_+b(h+"XXX",i)|0),y=a(y,u,4,(0,r.string32)(S));let D=`url(data:font/opentype;base64,${btoa(y)});`,R=`@font-face {font-family:"${h}";src:${D}}`;this.insertRule(R);let I=this._document.createElement("div");I.style.visibility="hidden",I.style.width=I.style.height="10px",I.style.position="absolute",I.style.top=I.style.left="0px";for(let G of[w.loadedName,h]){let z=this._document.createElement("span");z.textContent="Hi",z.style.fontFamily=G,I.append(z)}this._document.body.append(I),d(h,()=>{I.remove(),E.complete()})}}e.FontLoader=c;class g{constructor(w,{isEvalSupported:E=!0,disableFontFace:b=!1,ignoreErrors:a=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(let t in w)this[t]=w[t];this.isEvalSupported=E!==!1,this.disableFontFace=b===!0,this.ignoreErrors=a===!0,this._inspectFont=i}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let w;if(!this.cssFontInfo)w=new FontFace(this.loadedName,this.data,{});else{let E={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(E.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,E)}return this._inspectFont?.(this),w}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let w=(0,r.bytesToString)(this.data),E=`url(data:${this.mimetype};base64,${btoa(w)});`,b;if(!this.cssFontInfo)b=`@font-face {font-family:"${this.loadedName}";src:${E}}`;else{let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),b=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${E}}`}return this._inspectFont?.(this,E),b}getPathGenerator(w,E){if(this.compiledGlyphs[E]!==void 0)return this.compiledGlyphs[E];let b;try{b=w.get(this.loadedName+"_path_"+E)}catch(a){if(!this.ignoreErrors)throw a;return(0,r.warn)(`getPathGenerator - ignoring character: "${a}".`),this.compiledGlyphs[E]=function(i,t){}}if(this.isEvalSupported&&r.FeatureTest.isEvalSupported){let a=[];for(let i of b){let t=i.args!==void 0?i.args.join(","):"";a.push("c.",i.cmd,"(",t,`);
`)}return this.compiledGlyphs[E]=new Function("c","size",a.join(""))}return this.compiledGlyphs[E]=function(a,i){for(let t of b)t.cmd==="scale"&&(t.args=[i,-i]),a[t.cmd].apply(a,t.args)}}}e.FontFaceObject=g},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=A(7),c=A(1);let g=function(a){return new Promise((i,t)=>{wt().readFile(a,(s,n)=>{if(s||!n){t(new Error(s));return}i(new Uint8Array(n))})})};class C extends r.BaseFilterFactory{}e.NodeFilterFactory=C;class w extends r.BaseCanvasFactory{_createCanvas(i,t){return Ai().createCanvas(i,t)}}e.NodeCanvasFactory=w;class E extends r.BaseCMapReaderFactory{_fetchData(i,t){return g(i).then(o=>({cMapData:o,compressionType:t}))}}e.NodeCMapReaderFactory=E;class b extends r.BaseStandardFontDataFactory{_fetchData(i){return g(i)}}e.NodeStandardFontDataFactory=b},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r=A(1),c=A(6),g=A(12),C=A(13);let w=16,E=100,b=4096,a=15,i=10,t=1e3,o=16;function s(f,m){if(f._removeMirroring)throw new Error("Context is already forwarding operations.");f.__originalSave=f.save,f.__originalRestore=f.restore,f.__originalRotate=f.rotate,f.__originalScale=f.scale,f.__originalTranslate=f.translate,f.__originalTransform=f.transform,f.__originalSetTransform=f.setTransform,f.__originalResetTransform=f.resetTransform,f.__originalClip=f.clip,f.__originalMoveTo=f.moveTo,f.__originalLineTo=f.lineTo,f.__originalBezierCurveTo=f.bezierCurveTo,f.__originalRect=f.rect,f.__originalClosePath=f.closePath,f.__originalBeginPath=f.beginPath,f._removeMirroring=()=>{f.save=f.__originalSave,f.restore=f.__originalRestore,f.rotate=f.__originalRotate,f.scale=f.__originalScale,f.translate=f.__originalTranslate,f.transform=f.__originalTransform,f.setTransform=f.__originalSetTransform,f.resetTransform=f.__originalResetTransform,f.clip=f.__originalClip,f.moveTo=f.__originalMoveTo,f.lineTo=f.__originalLineTo,f.bezierCurveTo=f.__originalBezierCurveTo,f.rect=f.__originalRect,f.closePath=f.__originalClosePath,f.beginPath=f.__originalBeginPath,delete f._removeMirroring},f.save=function(){m.save(),this.__originalSave()},f.restore=function(){m.restore(),this.__originalRestore()},f.translate=function(T,F){m.translate(T,F),this.__originalTranslate(T,F)},f.scale=function(T,F){m.scale(T,F),this.__originalScale(T,F)},f.transform=function(T,F,k,V,L,p){m.transform(T,F,k,V,L,p),this.__originalTransform(T,F,k,V,L,p)},f.setTransform=function(T,F,k,V,L,p){m.setTransform(T,F,k,V,L,p),this.__originalSetTransform(T,F,k,V,L,p)},f.resetTransform=function(){m.resetTransform(),this.__originalResetTransform()},f.rotate=function(T){m.rotate(T),this.__originalRotate(T)},f.clip=function(T){m.clip(T),this.__originalClip(T)},f.moveTo=function(v,T){m.moveTo(v,T),this.__originalMoveTo(v,T)},f.lineTo=function(v,T){m.lineTo(v,T),this.__originalLineTo(v,T)},f.bezierCurveTo=function(v,T,F,k,V,L){m.bezierCurveTo(v,T,F,k,V,L),this.__originalBezierCurveTo(v,T,F,k,V,L)},f.rect=function(v,T,F,k){m.rect(v,T,F,k),this.__originalRect(v,T,F,k)},f.closePath=function(){m.closePath(),this.__originalClosePath()},f.beginPath=function(){m.beginPath(),this.__originalBeginPath()}}class n{constructor(m){this.canvasFactory=m,this.cache=Object.create(null)}getCanvas(m,v,T){let F;return this.cache[m]!==void 0?(F=this.cache[m],this.canvasFactory.reset(F,v,T)):(F=this.canvasFactory.create(v,T),this.cache[m]=F),F}delete(m){delete this.cache[m]}clear(){for(let m in this.cache){let v=this.cache[m];this.canvasFactory.destroy(v),delete this.cache[m]}}}function d(f,m,v,T,F,k,V,L,p,P){let[x,N,U,j,q,ie]=(0,c.getCurrentTransform)(f);if(N===0&&U===0){let K=V*x+q,X=Math.round(K),Z=L*j+ie,ne=Math.round(Z),re=(V+p)*x+q,oe=Math.abs(Math.round(re)-X)||1,ce=(L+P)*j+ie,he=Math.abs(Math.round(ce)-ne)||1;return f.setTransform(Math.sign(x),0,0,Math.sign(j),X,ne),f.drawImage(m,v,T,F,k,0,0,oe,he),f.setTransform(x,N,U,j,q,ie),[oe,he]}if(x===0&&j===0){let K=L*U+q,X=Math.round(K),Z=V*N+ie,ne=Math.round(Z),re=(L+P)*U+q,oe=Math.abs(Math.round(re)-X)||1,ce=(V+p)*N+ie,he=Math.abs(Math.round(ce)-ne)||1;return f.setTransform(0,Math.sign(N),Math.sign(U),0,X,ne),f.drawImage(m,v,T,F,k,0,0,he,oe),f.setTransform(x,N,U,j,q,ie),[he,oe]}f.drawImage(m,v,T,F,k,V,L,p,P);let J=Math.hypot(x,N),W=Math.hypot(U,j);return[J*p,W*P]}function h(f){let{width:m,height:v}=f;if(m>t||v>t)return null;let T=1e3,F=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),k=m+1,V=new Uint8Array(k*(v+1)),L,p,P,x=m+7&-8,N=new Uint8Array(x*v),U=0;for(let W of f.data){let K=128;for(;K>0;)N[U++]=W&K?0:255,K>>=1}let j=0;for(U=0,N[U]!==0&&(V[0]=1,++j),p=1;p<m;p++)N[U]!==N[U+1]&&(V[p]=N[U]?2:1,++j),U++;for(N[U]!==0&&(V[p]=2,++j),L=1;L<v;L++){U=L*x,P=L*k,N[U-x]!==N[U]&&(V[P]=N[U]?1:8,++j);let W=(N[U]?4:0)+(N[U-x]?8:0);for(p=1;p<m;p++)W=(W>>2)+(N[U+1]?4:0)+(N[U-x+1]?8:0),F[W]&&(V[P+p]=F[W],++j),U++;if(N[U-x]!==N[U]&&(V[P+p]=N[U]?2:4,++j),j>T)return null}for(U=x*(v-1),P=L*k,N[U]!==0&&(V[P]=8,++j),p=1;p<m;p++)N[U]!==N[U+1]&&(V[P+p]=N[U]?4:8,++j),U++;if(N[U]!==0&&(V[P+p]=4,++j),j>T)return null;let q=new Int32Array([0,k,-1,0,-k,0,0,0,1]),ie=new Path2D;for(L=0;j&&L<=v;L++){let W=L*k,K=W+m;for(;W<K&&!V[W];)W++;if(W===K)continue;ie.moveTo(W%k,L);let X=W,Z=V[W];do{let ne=q[Z];do W+=ne;while(!V[W]);let re=V[W];re!==5&&re!==10?(Z=re,V[W]=0):(Z=re&51*Z>>4,V[W]&=Z>>2|Z<<2),ie.lineTo(W%k,W/k|0),V[W]||--j}while(X!==W);--L}return N=null,V=null,function(W){W.save(),W.scale(1/m,-1/v),W.translate(0,-v),W.fill(ie),W.beginPath(),W.restore()}}class y{constructor(m,v){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=r.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=r.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,m,v])}clone(){let m=Object.create(this);return m.clipBox=this.clipBox.slice(),m}setCurrentPoint(m,v){this.x=m,this.y=v}updatePathMinMax(m,v,T){[v,T]=r.Util.applyTransform([v,T],m),this.minX=Math.min(this.minX,v),this.minY=Math.min(this.minY,T),this.maxX=Math.max(this.maxX,v),this.maxY=Math.max(this.maxY,T)}updateRectMinMax(m,v){let T=r.Util.applyTransform(v,m),F=r.Util.applyTransform(v.slice(2),m);this.minX=Math.min(this.minX,T[0],F[0]),this.minY=Math.min(this.minY,T[1],F[1]),this.maxX=Math.max(this.maxX,T[0],F[0]),this.maxY=Math.max(this.maxY,T[1],F[1])}updateScalingPathMinMax(m,v){r.Util.scaleMinMax(m,v),this.minX=Math.min(this.minX,v[0]),this.maxX=Math.max(this.maxX,v[1]),this.minY=Math.min(this.minY,v[2]),this.maxY=Math.max(this.maxY,v[3])}updateCurvePathMinMax(m,v,T,F,k,V,L,p,P,x){let N=r.Util.bezierBoundingBox(v,T,F,k,V,L,p,P);if(x){x[0]=Math.min(x[0],N[0],N[2]),x[1]=Math.max(x[1],N[0],N[2]),x[2]=Math.min(x[2],N[1],N[3]),x[3]=Math.max(x[3],N[1],N[3]);return}this.updateRectMinMax(m,N)}getPathBoundingBox(m=g.PathType.FILL,v=null){let T=[this.minX,this.minY,this.maxX,this.maxY];if(m===g.PathType.STROKE){v||(0,r.unreachable)("Stroke bounding box must include transform.");let F=r.Util.singularValueDecompose2dScale(v),k=F[0]*this.lineWidth/2,V=F[1]*this.lineWidth/2;T[0]-=k,T[1]-=V,T[2]+=k,T[3]+=V}return T}updateClipFromPath(){let m=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(m||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(m){this.clipBox=m,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(m=g.PathType.FILL,v=null){return r.Util.intersect(this.clipBox,this.getPathBoundingBox(m,v))}}function l(f,m){if(typeof ImageData<"u"&&m instanceof ImageData){f.putImageData(m,0,0);return}let v=m.height,T=m.width,F=v%o,k=(v-F)/o,V=F===0?k:k+1,L=f.createImageData(T,o),p=0,P,x=m.data,N=L.data,U,j,q,ie;if(m.kind===r.ImageKind.GRAYSCALE_1BPP){let J=x.byteLength,W=new Uint32Array(N.buffer,0,N.byteLength>>2),K=W.length,X=T+7>>3,Z=4294967295,ne=r.FeatureTest.isLittleEndian?4278190080:255;for(U=0;U<V;U++){for(q=U<k?o:F,P=0,j=0;j<q;j++){let re=J-p,oe=0,ce=re>X?T:re*8-7,he=ce&-8,de=0,fe=0;for(;oe<he;oe+=8)fe=x[p++],W[P++]=fe&128?Z:ne,W[P++]=fe&64?Z:ne,W[P++]=fe&32?Z:ne,W[P++]=fe&16?Z:ne,W[P++]=fe&8?Z:ne,W[P++]=fe&4?Z:ne,W[P++]=fe&2?Z:ne,W[P++]=fe&1?Z:ne;for(;oe<ce;oe++)de===0&&(fe=x[p++],de=128),W[P++]=fe&de?Z:ne,de>>=1}for(;P<K;)W[P++]=0;f.putImageData(L,0,U*o)}}else if(m.kind===r.ImageKind.RGBA_32BPP){for(j=0,ie=T*o*4,U=0;U<k;U++)N.set(x.subarray(p,p+ie)),p+=ie,f.putImageData(L,0,j),j+=o;U<V&&(ie=T*F*4,N.set(x.subarray(p,p+ie)),f.putImageData(L,0,j))}else if(m.kind===r.ImageKind.RGB_24BPP)for(q=o,ie=T*q,U=0;U<V;U++){for(U>=k&&(q=F,ie=T*q),P=0,j=ie;j--;)N[P++]=x[p++],N[P++]=x[p++],N[P++]=x[p++],N[P++]=255;f.putImageData(L,0,U*o)}else throw new Error(`bad image kind: ${m.kind}`)}function u(f,m){if(m.bitmap){f.drawImage(m.bitmap,0,0);return}let v=m.height,T=m.width,F=v%o,k=(v-F)/o,V=F===0?k:k+1,L=f.createImageData(T,o),p=0,P=m.data,x=L.data;for(let N=0;N<V;N++){let U=N<k?o:F;({srcPos:p}=(0,C.convertBlackAndWhiteToRGBA)({src:P,srcPos:p,dest:x,width:T,height:U,nonBlackColor:0})),f.putImageData(L,0,N*o)}}function _(f,m){let v=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let T of v)f[T]!==void 0&&(m[T]=f[T]);f.setLineDash!==void 0&&(m.setLineDash(f.getLineDash()),m.lineDashOffset=f.lineDashOffset)}function S(f){if(f.strokeStyle=f.fillStyle="#000000",f.fillRule="nonzero",f.globalAlpha=1,f.lineWidth=1,f.lineCap="butt",f.lineJoin="miter",f.miterLimit=10,f.globalCompositeOperation="source-over",f.font="10px sans-serif",f.setLineDash!==void 0&&(f.setLineDash([]),f.lineDashOffset=0),!r.isNodeJS){let{filter:m}=f;m!=="none"&&m!==""&&(f.filter="none")}}function D(f,m,v,T){let F=f.length;for(let k=3;k<F;k+=4){let V=f[k];if(V===0)f[k-3]=m,f[k-2]=v,f[k-1]=T;else if(V<255){let L=255-V;f[k-3]=f[k-3]*V+m*L>>8,f[k-2]=f[k-2]*V+v*L>>8,f[k-1]=f[k-1]*V+T*L>>8}}}function R(f,m,v){let T=f.length,F=1/255;for(let k=3;k<T;k+=4){let V=v?v[f[k]]:f[k];m[k]=m[k]*V*F|0}}function I(f,m,v){let T=f.length;for(let F=3;F<T;F+=4){let k=f[F-3]*77+f[F-2]*152+f[F-1]*28;m[F]=v?m[F]*v[k>>8]>>8:m[F]*k>>16}}function G(f,m,v,T,F,k,V,L,p,P,x){let N=!!k,U=N?k[0]:0,j=N?k[1]:0,q=N?k[2]:0,ie=F==="Luminosity"?I:R,W=Math.min(T,Math.ceil(1048576/v));for(let K=0;K<T;K+=W){let X=Math.min(W,T-K),Z=f.getImageData(L-P,K+(p-x),v,X),ne=m.getImageData(L,K+p,v,X);N&&D(Z.data,U,j,q),ie(Z.data,ne.data,V),m.putImageData(ne,L,K+p)}}function z(f,m,v,T){let F=T[0],k=T[1],V=T[2]-F,L=T[3]-k;V===0||L===0||(G(m.context,v,V,L,m.subtype,m.backdrop,m.transferMap,F,k,m.offsetX,m.offsetY),f.save(),f.globalAlpha=1,f.globalCompositeOperation="source-over",f.setTransform(1,0,0,1,0,0),f.drawImage(v.canvas,0,0),f.restore())}function $(f,m){let v=r.Util.singularValueDecompose2dScale(f);v[0]=Math.fround(v[0]),v[1]=Math.fround(v[1]);let T=Math.fround((globalThis.devicePixelRatio||1)*c.PixelsPerInch.PDF_TO_CSS_UNITS);return m!==void 0?m:v[0]<=T||v[1]<=T}let Q=["butt","round","square"],Y=["miter","round","bevel"],B={},H={};class O{constructor(m,v,T,F,k,{optionalContentConfig:V,markedContentStack:L=null},p,P){this.ctx=m,this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=v,this.objs=T,this.canvasFactory=F,this.filterFactory=k,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=L||[],this.optionalContentConfig=V,this.cachedCanvases=new n(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=p,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=P,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(m,v=null){return typeof m=="string"?m.startsWith("g_")?this.commonObjs.get(m):this.objs.get(m):v}beginDrawing({transform:m,viewport:v,transparency:T=!1,background:F=null}){let k=this.ctx.canvas.width,V=this.ctx.canvas.height,L=this.ctx.fillStyle;if(this.ctx.fillStyle=F||"#ffffff",this.ctx.fillRect(0,0,k,V),this.ctx.fillStyle=L,T){let p=this.cachedCanvases.getCanvas("transparent",k,V);this.compositeCtx=this.ctx,this.transparentCanvas=p.canvas,this.ctx=p.context,this.ctx.save(),this.ctx.transform(...(0,c.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),S(this.ctx),m&&(this.ctx.transform(...m),this.outputScaleX=m[0],this.outputScaleY=m[0]),this.ctx.transform(...v.transform),this.viewportScale=v.scale,this.baseTransform=(0,c.getCurrentTransform)(this.ctx)}executeOperatorList(m,v,T,F){let k=m.argsArray,V=m.fnArray,L=v||0,p=k.length;if(p===L)return L;let P=p-L>i&&typeof T=="function",x=P?Date.now()+a:0,N=0,U=this.commonObjs,j=this.objs,q;for(;;){if(F!==void 0&&L===F.nextBreakPoint)return F.breakIt(L,T),L;if(q=V[L],q!==r.OPS.dependency)this[q].apply(this,k[L]);else for(let ie of k[L]){let J=ie.startsWith("g_")?U:j;if(!J.has(ie))return J.get(ie,T),L}if(L++,L===p)return L;if(P&&++N>i){if(Date.now()>x)return T(),L;N=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let m of this._cachedBitmapsMap.values()){for(let v of m.values())typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement&&(v.width=v.height=0);m.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let m=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(m!=="none"){let v=this.ctx.filter;this.ctx.filter=m,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=v}}}_scaleImage(m,v){let T=m.width,F=m.height,k=Math.max(Math.hypot(v[0],v[1]),1),V=Math.max(Math.hypot(v[2],v[3]),1),L=T,p=F,P="prescale1",x,N;for(;k>2&&L>1||V>2&&p>1;){let U=L,j=p;k>2&&L>1&&(U=L>=16384?Math.floor(L/2)-1||1:Math.ceil(L/2),k/=L/U),V>2&&p>1&&(j=p>=16384?Math.floor(p/2)-1||1:Math.ceil(p)/2,V/=p/j),x=this.cachedCanvases.getCanvas(P,U,j),N=x.context,N.clearRect(0,0,U,j),N.drawImage(m,0,0,L,p,0,0,U,j),m=x.canvas,L=U,p=j,P=P==="prescale1"?"prescale2":"prescale1"}return{img:m,paintWidth:L,paintHeight:p}}_createMaskCanvas(m){let v=this.ctx,{width:T,height:F}=m,k=this.current.fillColor,V=this.current.patternFill,L=(0,c.getCurrentTransform)(v),p,P,x,N;if((m.bitmap||m.data)&&m.count>1){let oe=m.bitmap||m.data.buffer;P=JSON.stringify(V?L:[L.slice(0,4),k]),p=this._cachedBitmapsMap.get(oe),p||(p=new Map,this._cachedBitmapsMap.set(oe,p));let ce=p.get(P);if(ce&&!V){let he=Math.round(Math.min(L[0],L[2])+L[4]),de=Math.round(Math.min(L[1],L[3])+L[5]);return{canvas:ce,offsetX:he,offsetY:de}}x=ce}x||(N=this.cachedCanvases.getCanvas("maskCanvas",T,F),u(N.context,m));let U=r.Util.transform(L,[1/T,0,0,-1/F,0,0]);U=r.Util.transform(U,[1,0,0,1,0,-F]);let j=r.Util.applyTransform([0,0],U),q=r.Util.applyTransform([T,F],U),ie=r.Util.normalizeRect([j[0],j[1],q[0],q[1]]),J=Math.round(ie[2]-ie[0])||1,W=Math.round(ie[3]-ie[1])||1,K=this.cachedCanvases.getCanvas("fillCanvas",J,W),X=K.context,Z=Math.min(j[0],q[0]),ne=Math.min(j[1],q[1]);X.translate(-Z,-ne),X.transform(...U),x||(x=this._scaleImage(N.canvas,(0,c.getCurrentTransformInverse)(X)),x=x.img,p&&V&&p.set(P,x)),X.imageSmoothingEnabled=$((0,c.getCurrentTransform)(X),m.interpolate),d(X,x,0,0,x.width,x.height,0,0,T,F),X.globalCompositeOperation="source-in";let re=r.Util.transform((0,c.getCurrentTransformInverse)(X),[1,0,0,1,-Z,-ne]);return X.fillStyle=V?k.getPattern(v,this,re,g.PathType.FILL):k,X.fillRect(0,0,T,F),p&&!V&&(this.cachedCanvases.delete("fillCanvas"),p.set(P,K.canvas)),{canvas:K.canvas,offsetX:Math.round(Z),offsetY:Math.round(ne)}}setLineWidth(m){m!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=m,this.ctx.lineWidth=m}setLineCap(m){this.ctx.lineCap=Q[m]}setLineJoin(m){this.ctx.lineJoin=Y[m]}setMiterLimit(m){this.ctx.miterLimit=m}setDash(m,v){let T=this.ctx;T.setLineDash!==void 0&&(T.setLineDash(m),T.lineDashOffset=v)}setRenderingIntent(m){}setFlatness(m){}setGState(m){for(let[v,T]of m)switch(v){case"LW":this.setLineWidth(T);break;case"LC":this.setLineCap(T);break;case"LJ":this.setLineJoin(T);break;case"ML":this.setMiterLimit(T);break;case"D":this.setDash(T[0],T[1]);break;case"RI":this.setRenderingIntent(T);break;case"FL":this.setFlatness(T);break;case"Font":this.setFont(T[0],T[1]);break;case"CA":this.current.strokeAlpha=T;break;case"ca":this.current.fillAlpha=T,this.ctx.globalAlpha=T;break;case"BM":this.ctx.globalCompositeOperation=T;break;case"SMask":this.current.activeSMask=T?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(T);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let m=this.inSMaskMode;this.current.activeSMask&&!m?this.beginSMaskMode():!this.current.activeSMask&&m&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let m=this.ctx.canvas.width,v=this.ctx.canvas.height,T="smaskGroupAt"+this.groupLevel,F=this.cachedCanvases.getCanvas(T,m,v);this.suspendedCtx=this.ctx,this.ctx=F.context;let k=this.ctx;k.setTransform(...(0,c.getCurrentTransform)(this.suspendedCtx)),_(this.suspendedCtx,k),s(k,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),_(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(m){if(!this.current.activeSMask)return;m?(m[0]=Math.floor(m[0]),m[1]=Math.floor(m[1]),m[2]=Math.ceil(m[2]),m[3]=Math.ceil(m[3])):m=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let v=this.current.activeSMask,T=this.suspendedCtx;z(T,v,this.ctx,m),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(_(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let m=this.current;this.stateStack.push(m),this.current=m.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),_(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(m,v,T,F,k,V){this.ctx.transform(m,v,T,F,k,V),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(m,v,T){let F=this.ctx,k=this.current,V=k.x,L=k.y,p,P,x=(0,c.getCurrentTransform)(F),N=x[0]===0&&x[3]===0||x[1]===0&&x[2]===0,U=N?T.slice(0):null;for(let j=0,q=0,ie=m.length;j<ie;j++)switch(m[j]|0){case r.OPS.rectangle:V=v[q++],L=v[q++];let J=v[q++],W=v[q++],K=V+J,X=L+W;F.moveTo(V,L),J===0||W===0?F.lineTo(K,X):(F.lineTo(K,L),F.lineTo(K,X),F.lineTo(V,X)),N||k.updateRectMinMax(x,[V,L,K,X]),F.closePath();break;case r.OPS.moveTo:V=v[q++],L=v[q++],F.moveTo(V,L),N||k.updatePathMinMax(x,V,L);break;case r.OPS.lineTo:V=v[q++],L=v[q++],F.lineTo(V,L),N||k.updatePathMinMax(x,V,L);break;case r.OPS.curveTo:p=V,P=L,V=v[q+4],L=v[q+5],F.bezierCurveTo(v[q],v[q+1],v[q+2],v[q+3],V,L),k.updateCurvePathMinMax(x,p,P,v[q],v[q+1],v[q+2],v[q+3],V,L,U),q+=6;break;case r.OPS.curveTo2:p=V,P=L,F.bezierCurveTo(V,L,v[q],v[q+1],v[q+2],v[q+3]),k.updateCurvePathMinMax(x,p,P,V,L,v[q],v[q+1],v[q+2],v[q+3],U),V=v[q+2],L=v[q+3],q+=4;break;case r.OPS.curveTo3:p=V,P=L,V=v[q+2],L=v[q+3],F.bezierCurveTo(v[q],v[q+1],V,L,V,L),k.updateCurvePathMinMax(x,p,P,v[q],v[q+1],V,L,V,L,U),q+=4;break;case r.OPS.closePath:F.closePath();break}N&&k.updateScalingPathMinMax(x,U),k.setCurrentPoint(V,L)}closePath(){this.ctx.closePath()}stroke(m=!0){let v=this.ctx,T=this.current.strokeColor;v.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof T=="object"&&T?.getPattern?(v.save(),v.strokeStyle=T.getPattern(v,this,(0,c.getCurrentTransformInverse)(v),g.PathType.STROKE),this.rescaleAndStroke(!1),v.restore()):this.rescaleAndStroke(!0)),m&&this.consumePath(this.current.getClippedPathBoundingBox()),v.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(m=!0){let v=this.ctx,T=this.current.fillColor,F=this.current.patternFill,k=!1;F&&(v.save(),v.fillStyle=T.getPattern(v,this,(0,c.getCurrentTransformInverse)(v),g.PathType.FILL),k=!0);let V=this.current.getClippedPathBoundingBox();this.contentVisible&&V!==null&&(this.pendingEOFill?(v.fill("evenodd"),this.pendingEOFill=!1):v.fill()),k&&v.restore(),m&&this.consumePath(V)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=B}eoClip(){this.pendingClip=H}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let m=this.pendingTextPaths,v=this.ctx;if(m===void 0){v.beginPath();return}v.save(),v.beginPath();for(let T of m)v.setTransform(...T.transform),v.translate(T.x,T.y),T.addToPath(v,T.fontSize);v.restore(),v.clip(),v.beginPath(),delete this.pendingTextPaths}setCharSpacing(m){this.current.charSpacing=m}setWordSpacing(m){this.current.wordSpacing=m}setHScale(m){this.current.textHScale=m/100}setLeading(m){this.current.leading=-m}setFont(m,v){let T=this.commonObjs.get(m),F=this.current;if(!T)throw new Error(`Can't find font for ${m}`);if(F.fontMatrix=T.fontMatrix||r.FONT_IDENTITY_MATRIX,(F.fontMatrix[0]===0||F.fontMatrix[3]===0)&&(0,r.warn)("Invalid font matrix for font "+m),v<0?(v=-v,F.fontDirection=-1):F.fontDirection=1,this.current.font=T,this.current.fontSize=v,T.isType3Font)return;let k=T.loadedName||"sans-serif",V=T.systemFontInfo?.css||`"${k}", ${T.fallbackName}`,L="normal";T.black?L="900":T.bold&&(L="bold");let p=T.italic?"italic":"normal",P=v;v<w?P=w:v>E&&(P=E),this.current.fontSizeScale=v/P,this.ctx.font=`${p} ${L} ${P}px ${V}`}setTextRenderingMode(m){this.current.textRenderingMode=m}setTextRise(m){this.current.textRise=m}moveText(m,v){this.current.x=this.current.lineX+=m,this.current.y=this.current.lineY+=v}setLeadingMoveText(m,v){this.setLeading(-v),this.moveText(m,v)}setTextMatrix(m,v,T,F,k,V){this.current.textMatrix=[m,v,T,F,k,V],this.current.textMatrixScale=Math.hypot(m,v),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(m,v,T,F){let k=this.ctx,V=this.current,L=V.font,p=V.textRenderingMode,P=V.fontSize/V.fontSizeScale,x=p&r.TextRenderingMode.FILL_STROKE_MASK,N=!!(p&r.TextRenderingMode.ADD_TO_PATH_FLAG),U=V.patternFill&&!L.missingFile,j;(L.disableFontFace||N||U)&&(j=L.getPathGenerator(this.commonObjs,m)),L.disableFontFace||U?(k.save(),k.translate(v,T),k.beginPath(),j(k,P),F&&k.setTransform(...F),(x===r.TextRenderingMode.FILL||x===r.TextRenderingMode.FILL_STROKE)&&k.fill(),(x===r.TextRenderingMode.STROKE||x===r.TextRenderingMode.FILL_STROKE)&&k.stroke(),k.restore()):((x===r.TextRenderingMode.FILL||x===r.TextRenderingMode.FILL_STROKE)&&k.fillText(m,v,T),(x===r.TextRenderingMode.STROKE||x===r.TextRenderingMode.FILL_STROKE)&&k.strokeText(m,v,T)),N&&(this.pendingTextPaths||=[]).push({transform:(0,c.getCurrentTransform)(k),x:v,y:T,fontSize:P,addToPath:j})}get isFontSubpixelAAEnabled(){let{context:m}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);m.scale(1.5,1),m.fillText("I",0,10);let v=m.getImageData(0,0,10,10).data,T=!1;for(let F=3;F<v.length;F+=4)if(v[F]>0&&v[F]<255){T=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",T)}showText(m){let v=this.current,T=v.font;if(T.isType3Font)return this.showType3Text(m);let F=v.fontSize;if(F===0)return;let k=this.ctx,V=v.fontSizeScale,L=v.charSpacing,p=v.wordSpacing,P=v.fontDirection,x=v.textHScale*P,N=m.length,U=T.vertical,j=U?1:-1,q=T.defaultVMetrics,ie=F*v.fontMatrix[0],J=v.textRenderingMode===r.TextRenderingMode.FILL&&!T.disableFontFace&&!v.patternFill;k.save(),k.transform(...v.textMatrix),k.translate(v.x,v.y+v.textRise),P>0?k.scale(x,-1):k.scale(x,1);let W;if(v.patternFill){k.save();let re=v.fillColor.getPattern(k,this,(0,c.getCurrentTransformInverse)(k),g.PathType.FILL);W=(0,c.getCurrentTransform)(k),k.restore(),k.fillStyle=re}let K=v.lineWidth,X=v.textMatrixScale;if(X===0||K===0){let re=v.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;(re===r.TextRenderingMode.STROKE||re===r.TextRenderingMode.FILL_STROKE)&&(K=this.getSinglePixelWidth())}else K/=X;if(V!==1&&(k.scale(V,V),K/=V),k.lineWidth=K,T.isInvalidPDFjsFont){let re=[],oe=0;for(let ce of m)re.push(ce.unicode),oe+=ce.width;k.fillText(re.join(""),0,0),v.x+=oe*ie*x,k.restore(),this.compose();return}let Z=0,ne;for(ne=0;ne<N;++ne){let re=m[ne];if(typeof re=="number"){Z+=j*re*F/1e3;continue}let oe=!1,ce=(re.isSpace?p:0)+L,he=re.fontChar,de=re.accent,fe,Me,Se=re.width;if(U){let ye=re.vmetric||q,Fe=-(re.vmetric?ye[1]:Se*.5)*ie,it=ye[2]*ie;Se=ye?-ye[0]:Se,fe=Fe/V,Me=(Z+it)/V}else fe=Z/V,Me=0;if(T.remeasure&&Se>0){let ye=k.measureText(he).width*1e3/F*V;if(Se<ye&&this.isFontSubpixelAAEnabled){let Fe=Se/ye;oe=!0,k.save(),k.scale(Fe,1),fe/=Fe}else Se!==ye&&(fe+=(Se-ye)/2e3*F/V)}if(this.contentVisible&&(re.isInFont||T.missingFile)){if(J&&!de)k.fillText(he,fe,Me);else if(this.paintChar(he,fe,Me,W),de){let ye=fe+F*de.offset.x/V,Fe=Me-F*de.offset.y/V;this.paintChar(de.fontChar,ye,Fe,W)}}let Ie=U?Se*ie-ce*P:Se*ie+ce*P;Z+=Ie,oe&&k.restore()}U?v.y-=Z:v.x+=Z*x,k.restore(),this.compose()}showType3Text(m){let v=this.ctx,T=this.current,F=T.font,k=T.fontSize,V=T.fontDirection,L=F.vertical?1:-1,p=T.charSpacing,P=T.wordSpacing,x=T.textHScale*V,N=T.fontMatrix||r.FONT_IDENTITY_MATRIX,U=m.length,j=T.textRenderingMode===r.TextRenderingMode.INVISIBLE,q,ie,J,W;if(!(j||k===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,v.save(),v.transform(...T.textMatrix),v.translate(T.x,T.y),v.scale(x,V),q=0;q<U;++q){if(ie=m[q],typeof ie=="number"){W=L*ie*k/1e3,this.ctx.translate(W,0),T.x+=W*x;continue}let K=(ie.isSpace?P:0)+p,X=F.charProcOperatorList[ie.operatorListId];if(!X){(0,r.warn)(`Type3 character "${ie.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ie,this.save(),v.scale(k,k),v.transform(...N),this.executeOperatorList(X),this.restore()),J=r.Util.applyTransform([ie.width,0],N)[0]*k+K,v.translate(J,0),T.x+=J*x}v.restore(),this.processingType3=null}}setCharWidth(m,v){}setCharWidthAndBounds(m,v,T,F,k,V){this.ctx.rect(T,F,k-T,V-F),this.ctx.clip(),this.endPath()}getColorN_Pattern(m){let v;if(m[0]==="TilingPattern"){let T=m[1],F=this.baseTransform||(0,c.getCurrentTransform)(this.ctx),k={createCanvasGraphics:V=>new O(V,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};v=new g.TilingPattern(m,T,this.ctx,k,F)}else v=this._getPattern(m[1],m[2]);return v}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(m,v,T){let F=r.Util.makeHexColor(m,v,T);this.ctx.strokeStyle=F,this.current.strokeColor=F}setFillRGBColor(m,v,T){let F=r.Util.makeHexColor(m,v,T);this.ctx.fillStyle=F,this.current.fillColor=F,this.current.patternFill=!1}_getPattern(m,v=null){let T;return this.cachedPatterns.has(m)?T=this.cachedPatterns.get(m):(T=(0,g.getShadingPattern)(this.getObject(m)),this.cachedPatterns.set(m,T)),v&&(T.matrix=v),T}shadingFill(m){if(!this.contentVisible)return;let v=this.ctx;this.save();let T=this._getPattern(m);v.fillStyle=T.getPattern(v,this,(0,c.getCurrentTransformInverse)(v),g.PathType.SHADING);let F=(0,c.getCurrentTransformInverse)(v);if(F){let{width:k,height:V}=v.canvas,[L,p,P,x]=r.Util.getAxialAlignedBoundingBox([0,0,k,V],F);this.ctx.fillRect(L,p,P-L,x-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(m,v){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(m)&&m.length===6&&this.transform(...m),this.baseTransform=(0,c.getCurrentTransform)(this.ctx),v)){let T=v[2]-v[0],F=v[3]-v[1];this.ctx.rect(v[0],v[1],T,F),this.current.updateRectMinMax((0,c.getCurrentTransform)(this.ctx),v),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(m){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let v=this.ctx;m.isolated||(0,r.info)("TODO: Support non-isolated groups."),m.knockout&&(0,r.warn)("Knockout groups not supported.");let T=(0,c.getCurrentTransform)(v);if(m.matrix&&v.transform(...m.matrix),!m.bbox)throw new Error("Bounding box is required.");let F=r.Util.getAxialAlignedBoundingBox(m.bbox,(0,c.getCurrentTransform)(v)),k=[0,0,v.canvas.width,v.canvas.height];F=r.Util.intersect(F,k)||[0,0,0,0];let V=Math.floor(F[0]),L=Math.floor(F[1]),p=Math.max(Math.ceil(F[2])-V,1),P=Math.max(Math.ceil(F[3])-L,1),x=1,N=1;p>b&&(x=p/b,p=b),P>b&&(N=P/b,P=b),this.current.startNewPathAndClipBox([0,0,p,P]);let U="groupAt"+this.groupLevel;m.smask&&(U+="_smask_"+this.smaskCounter++%2);let j=this.cachedCanvases.getCanvas(U,p,P),q=j.context;q.scale(1/x,1/N),q.translate(-V,-L),q.transform(...T),m.smask?this.smaskStack.push({canvas:j.canvas,context:q,offsetX:V,offsetY:L,scaleX:x,scaleY:N,subtype:m.smask.subtype,backdrop:m.smask.backdrop,transferMap:m.smask.transferMap||null,startTransformInverse:null}):(v.setTransform(1,0,0,1,0,0),v.translate(V,L),v.scale(x,N),v.save()),_(v,q),this.ctx=q,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(v),this.groupLevel++}endGroup(m){if(!this.contentVisible)return;this.groupLevel--;let v=this.ctx,T=this.groupStack.pop();if(this.ctx=T,this.ctx.imageSmoothingEnabled=!1,m.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let F=(0,c.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...F);let k=r.Util.getAxialAlignedBoundingBox([0,0,v.canvas.width,v.canvas.height],F);this.ctx.drawImage(v.canvas,0,0),this.ctx.restore(),this.compose(k)}}beginAnnotation(m,v,T,F,k){if(this.#e(),S(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(v)&&v.length===4){let V=v[2]-v[0],L=v[3]-v[1];if(k&&this.annotationCanvasMap){T=T.slice(),T[4]-=v[0],T[5]-=v[1],v=v.slice(),v[0]=v[1]=0,v[2]=V,v[3]=L;let[p,P]=r.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(this.ctx)),{viewportScale:x}=this,N=Math.ceil(V*this.outputScaleX*x),U=Math.ceil(L*this.outputScaleY*x);this.annotationCanvas=this.canvasFactory.create(N,U);let{canvas:j,context:q}=this.annotationCanvas;this.annotationCanvasMap.set(m,j),this.annotationCanvas.savedCtx=this.ctx,this.ctx=q,this.ctx.save(),this.ctx.setTransform(p,0,0,-P,0,L*P),S(this.ctx)}else S(this.ctx),this.ctx.rect(v[0],v[1],V,L),this.ctx.clip(),this.endPath()}this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...T),this.transform(...F)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(m){if(!this.contentVisible)return;let v=m.count;m=this.getObject(m.data,m),m.count=v;let T=this.ctx,F=this.processingType3;if(F&&(F.compiled===void 0&&(F.compiled=h(m)),F.compiled)){F.compiled(T);return}let k=this._createMaskCanvas(m),V=k.canvas;T.save(),T.setTransform(1,0,0,1,0,0),T.drawImage(V,k.offsetX,k.offsetY),T.restore(),this.compose()}paintImageMaskXObjectRepeat(m,v,T=0,F=0,k,V){if(!this.contentVisible)return;m=this.getObject(m.data,m);let L=this.ctx;L.save();let p=(0,c.getCurrentTransform)(L);L.transform(v,T,F,k,0,0);let P=this._createMaskCanvas(m);L.setTransform(1,0,0,1,P.offsetX-p[4],P.offsetY-p[5]);for(let x=0,N=V.length;x<N;x+=2){let U=r.Util.transform(p,[v,T,F,k,V[x],V[x+1]]),[j,q]=r.Util.applyTransform([0,0],U);L.drawImage(P.canvas,j,q)}L.restore(),this.compose()}paintImageMaskXObjectGroup(m){if(!this.contentVisible)return;let v=this.ctx,T=this.current.fillColor,F=this.current.patternFill;for(let k of m){let{data:V,width:L,height:p,transform:P}=k,x=this.cachedCanvases.getCanvas("maskCanvas",L,p),N=x.context;N.save();let U=this.getObject(V,k);u(N,U),N.globalCompositeOperation="source-in",N.fillStyle=F?T.getPattern(N,this,(0,c.getCurrentTransformInverse)(v),g.PathType.FILL):T,N.fillRect(0,0,L,p),N.restore(),v.save(),v.transform(...P),v.scale(1,-1),d(v,x.canvas,0,0,L,p,0,-1,1,1),v.restore()}this.compose()}paintImageXObject(m){if(!this.contentVisible)return;let v=this.getObject(m);if(!v){(0,r.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(v)}paintImageXObjectRepeat(m,v,T,F){if(!this.contentVisible)return;let k=this.getObject(m);if(!k){(0,r.warn)("Dependent image isn't ready yet");return}let V=k.width,L=k.height,p=[];for(let P=0,x=F.length;P<x;P+=2)p.push({transform:[v,0,0,T,F[P],F[P+1]],x:0,y:0,w:V,h:L});this.paintInlineImageXObjectGroup(k,p)}applyTransferMapsToCanvas(m){return this.current.transferMaps!=="none"&&(m.filter=this.current.transferMaps,m.drawImage(m.canvas,0,0),m.filter="none"),m.canvas}applyTransferMapsToBitmap(m){if(this.current.transferMaps==="none")return m.bitmap;let{bitmap:v,width:T,height:F}=m,k=this.cachedCanvases.getCanvas("inlineImage",T,F),V=k.context;return V.filter=this.current.transferMaps,V.drawImage(v,0,0),V.filter="none",k.canvas}paintInlineImageXObject(m){if(!this.contentVisible)return;let v=m.width,T=m.height,F=this.ctx;if(this.save(),!r.isNodeJS){let{filter:L}=F;L!=="none"&&L!==""&&(F.filter="none")}F.scale(1/v,-1/T);let k;if(m.bitmap)k=this.applyTransferMapsToBitmap(m);else if(typeof HTMLElement=="function"&&m instanceof HTMLElement||!m.data)k=m;else{let p=this.cachedCanvases.getCanvas("inlineImage",v,T).context;l(p,m),k=this.applyTransferMapsToCanvas(p)}let V=this._scaleImage(k,(0,c.getCurrentTransformInverse)(F));F.imageSmoothingEnabled=$((0,c.getCurrentTransform)(F),m.interpolate),d(F,V.img,0,0,V.paintWidth,V.paintHeight,0,-T,v,T),this.compose(),this.restore()}paintInlineImageXObjectGroup(m,v){if(!this.contentVisible)return;let T=this.ctx,F;if(m.bitmap)F=m.bitmap;else{let k=m.width,V=m.height,p=this.cachedCanvases.getCanvas("inlineImage",k,V).context;l(p,m),F=this.applyTransferMapsToCanvas(p)}for(let k of v)T.save(),T.transform(...k.transform),T.scale(1,-1),d(T,F,k.x,k.y,k.w,k.h,0,-1,1,1),T.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(m){}markPointProps(m,v){}beginMarkedContent(m){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(m,v){m==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(v)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(m){let v=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(m);let T=this.ctx;this.pendingClip&&(v||(this.pendingClip===H?T.clip("evenodd"):T.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),T.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let m=(0,c.getCurrentTransform)(this.ctx);if(m[1]===0&&m[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(m[0]),Math.abs(m[3]));else{let v=Math.abs(m[0]*m[3]-m[2]*m[1]),T=Math.hypot(m[0],m[2]),F=Math.hypot(m[1],m[3]);this._cachedGetSinglePixelWidth=Math.max(T,F)/v}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:m}=this.current,{a:v,b:T,c:F,d:k}=this.ctx.getTransform(),V,L;if(T===0&&F===0){let p=Math.abs(v),P=Math.abs(k);if(p===P)if(m===0)V=L=1/p;else{let x=p*m;V=L=x<1?1/x:1}else if(m===0)V=1/p,L=1/P;else{let x=p*m,N=P*m;V=x<1?1/x:1,L=N<1?1/N:1}}else{let p=Math.abs(v*k-T*F),P=Math.hypot(v,T),x=Math.hypot(F,k);if(m===0)V=x/p,L=P/p;else{let N=m*p;V=x>N?x/N:1,L=P>N?P/N:1}}this._cachedScaleForStroking[0]=V,this._cachedScaleForStroking[1]=L}return this._cachedScaleForStroking}rescaleAndStroke(m){let{ctx:v}=this,{lineWidth:T}=this.current,[F,k]=this.getScaleForStroking();if(v.lineWidth=T||1,F===1&&k===1){v.stroke();return}let V=v.getLineDash();if(m&&v.save(),v.scale(F,k),V.length>0){let L=Math.max(F,k);v.setLineDash(V.map(p=>p/L)),v.lineDashOffset/=L}v.stroke(),m&&v.restore()}isContentVisible(){for(let m=this.markedContentStack.length-1;m>=0;m--)if(!this.markedContentStack[m].visible)return!1;return!0}}e.CanvasGraphics=O;for(let f in r.OPS)O.prototype[f]!==void 0&&(O.prototype[r.OPS[f]]=O.prototype[f])},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=o;var r=A(1),c=A(6);let g={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=g;function C(d,h){if(!h)return;let y=h[2]-h[0],l=h[3]-h[1],u=new Path2D;u.rect(h[0],h[1],y,l),d.clip(u)}class w{constructor(){this.constructor===w&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class E extends w{constructor(h){super(),this._type=h[1],this._bbox=h[2],this._colorStops=h[3],this._p0=h[4],this._p1=h[5],this._r0=h[6],this._r1=h[7],this.matrix=null}_createGradient(h){let y;this._type==="axial"?y=h.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(y=h.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let l of this._colorStops)y.addColorStop(l[0],l[1]);return y}getPattern(h,y,l,u){let _;if(u===g.STROKE||u===g.FILL){let S=y.current.getClippedPathBoundingBox(u,(0,c.getCurrentTransform)(h))||[0,0,0,0],D=Math.ceil(S[2]-S[0])||1,R=Math.ceil(S[3]-S[1])||1,I=y.cachedCanvases.getCanvas("pattern",D,R,!0),G=I.context;G.clearRect(0,0,G.canvas.width,G.canvas.height),G.beginPath(),G.rect(0,0,G.canvas.width,G.canvas.height),G.translate(-S[0],-S[1]),l=r.Util.transform(l,[1,0,0,1,S[0],S[1]]),G.transform(...y.baseTransform),this.matrix&&G.transform(...this.matrix),C(G,this._bbox),G.fillStyle=this._createGradient(G),G.fill(),_=h.createPattern(I.canvas,"no-repeat");let z=new DOMMatrix(l);_.setTransform(z)}else C(h,this._bbox),_=this._createGradient(h);return _}}function b(d,h,y,l,u,_,S,D){let R=h.coords,I=h.colors,G=d.data,z=d.width*4,$;R[y+1]>R[l+1]&&($=y,y=l,l=$,$=_,_=S,S=$),R[l+1]>R[u+1]&&($=l,l=u,u=$,$=S,S=D,D=$),R[y+1]>R[l+1]&&($=y,y=l,l=$,$=_,_=S,S=$);let Q=(R[y]+h.offsetX)*h.scaleX,Y=(R[y+1]+h.offsetY)*h.scaleY,B=(R[l]+h.offsetX)*h.scaleX,H=(R[l+1]+h.offsetY)*h.scaleY,O=(R[u]+h.offsetX)*h.scaleX,f=(R[u+1]+h.offsetY)*h.scaleY;if(Y>=f)return;let m=I[_],v=I[_+1],T=I[_+2],F=I[S],k=I[S+1],V=I[S+2],L=I[D],p=I[D+1],P=I[D+2],x=Math.round(Y),N=Math.round(f),U,j,q,ie,J,W,K,X;for(let Z=x;Z<=N;Z++){if(Z<H){let he=Z<Y?0:(Y-Z)/(Y-H);U=Q-(Q-B)*he,j=m-(m-F)*he,q=v-(v-k)*he,ie=T-(T-V)*he}else{let he;Z>f?he=1:H===f?he=0:he=(H-Z)/(H-f),U=B-(B-O)*he,j=F-(F-L)*he,q=k-(k-p)*he,ie=V-(V-P)*he}let ne;Z<Y?ne=0:Z>f?ne=1:ne=(Y-Z)/(Y-f),J=Q-(Q-O)*ne,W=m-(m-L)*ne,K=v-(v-p)*ne,X=T-(T-P)*ne;let re=Math.round(Math.min(U,J)),oe=Math.round(Math.max(U,J)),ce=z*Z+re*4;for(let he=re;he<=oe;he++)ne=(U-he)/(U-J),ne<0?ne=0:ne>1&&(ne=1),G[ce++]=j-(j-W)*ne|0,G[ce++]=q-(q-K)*ne|0,G[ce++]=ie-(ie-X)*ne|0,G[ce++]=255}}function a(d,h,y){let l=h.coords,u=h.colors,_,S;switch(h.type){case"lattice":let D=h.verticesPerRow,R=Math.floor(l.length/D)-1,I=D-1;for(_=0;_<R;_++){let G=_*D;for(let z=0;z<I;z++,G++)b(d,y,l[G],l[G+1],l[G+D],u[G],u[G+1],u[G+D]),b(d,y,l[G+D+1],l[G+1],l[G+D],u[G+D+1],u[G+1],u[G+D])}break;case"triangles":for(_=0,S=l.length;_<S;_+=3)b(d,y,l[_],l[_+1],l[_+2],u[_],u[_+1],u[_+2]);break;default:throw new Error("illegal figure")}}class i extends w{constructor(h){super(),this._coords=h[2],this._colors=h[3],this._figures=h[4],this._bounds=h[5],this._bbox=h[7],this._background=h[8],this.matrix=null}_createMeshCanvas(h,y,l){let D=Math.floor(this._bounds[0]),R=Math.floor(this._bounds[1]),I=Math.ceil(this._bounds[2])-D,G=Math.ceil(this._bounds[3])-R,z=Math.min(Math.ceil(Math.abs(I*h[0]*1.1)),3e3),$=Math.min(Math.ceil(Math.abs(G*h[1]*1.1)),3e3),Q=I/z,Y=G/$,B={coords:this._coords,colors:this._colors,offsetX:-D,offsetY:-R,scaleX:1/Q,scaleY:1/Y},H=z+2*2,O=$+2*2,f=l.getCanvas("mesh",H,O,!1),m=f.context,v=m.createImageData(z,$);if(y){let F=v.data;for(let k=0,V=F.length;k<V;k+=4)F[k]=y[0],F[k+1]=y[1],F[k+2]=y[2],F[k+3]=255}for(let F of this._figures)a(v,F,B);return m.putImageData(v,2,2),{canvas:f.canvas,offsetX:D-2*Q,offsetY:R-2*Y,scaleX:Q,scaleY:Y}}getPattern(h,y,l,u){C(h,this._bbox);let _;if(u===g.SHADING)_=r.Util.singularValueDecompose2dScale((0,c.getCurrentTransform)(h));else if(_=r.Util.singularValueDecompose2dScale(y.baseTransform),this.matrix){let D=r.Util.singularValueDecompose2dScale(this.matrix);_=[_[0]*D[0],_[1]*D[1]]}let S=this._createMeshCanvas(_,u===g.SHADING?null:this._background,y.cachedCanvases);return u!==g.SHADING&&(h.setTransform(...y.baseTransform),this.matrix&&h.transform(...this.matrix)),h.translate(S.offsetX,S.offsetY),h.scale(S.scaleX,S.scaleY),h.createPattern(S.canvas,"no-repeat")}}class t extends w{getPattern(){return"hotpink"}}function o(d){switch(d[0]){case"RadialAxial":return new E(d);case"Mesh":return new i(d);case"Dummy":return new t}throw new Error(`Unknown IR type: ${d[0]}`)}let s={COLORED:1,UNCOLORED:2},n=(()=>{class d{static MAX_PATTERN_SIZE=3e3;constructor(y,l,u,_,S){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=l,this.ctx=u,this.canvasGraphicsFactory=_,this.baseTransform=S}createPatternCanvas(y){let l=this.operatorList,u=this.bbox,_=this.xstep,S=this.ystep,D=this.paintType,R=this.tilingType,I=this.color,G=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+R);let z=u[0],$=u[1],Q=u[2],Y=u[3],B=r.Util.singularValueDecompose2dScale(this.matrix),H=r.Util.singularValueDecompose2dScale(this.baseTransform),O=[B[0]*H[0],B[1]*H[1]],f=this.getSizeAndScale(_,this.ctx.canvas.width,O[0]),m=this.getSizeAndScale(S,this.ctx.canvas.height,O[1]),v=y.cachedCanvases.getCanvas("pattern",f.size,m.size,!0),T=v.context,F=G.createCanvasGraphics(T);F.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(F,D,I);let k=z,V=$,L=Q,p=Y;return z<0&&(k=0,L+=Math.abs(z)),$<0&&(V=0,p+=Math.abs($)),T.translate(-(f.scale*k),-(m.scale*V)),F.transform(f.scale,0,0,m.scale,0,0),T.save(),this.clipBbox(F,k,V,L,p),F.baseTransform=(0,c.getCurrentTransform)(F.ctx),F.executeOperatorList(l),F.endDrawing(),{canvas:v.canvas,scaleX:f.scale,scaleY:m.scale,offsetX:k,offsetY:V}}getSizeAndScale(y,l,u){y=Math.abs(y);let _=Math.max(d.MAX_PATTERN_SIZE,l),S=Math.ceil(y*u);return S>=_?S=_:u=S/y,{scale:u,size:S}}clipBbox(y,l,u,_,S){let D=_-l,R=S-u;y.ctx.rect(l,u,D,R),y.current.updateRectMinMax((0,c.getCurrentTransform)(y.ctx),[l,u,_,S]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,l,u){let _=y.ctx,S=y.current;switch(l){case s.COLORED:let D=this.ctx;_.fillStyle=D.fillStyle,_.strokeStyle=D.strokeStyle,S.fillColor=D.fillStyle,S.strokeColor=D.strokeStyle;break;case s.UNCOLORED:let R=r.Util.makeHexColor(u[0],u[1],u[2]);_.fillStyle=R,_.strokeStyle=R,S.fillColor=R,S.strokeColor=R;break;default:throw new r.FormatError(`Unsupported paint type: ${l}`)}}getPattern(y,l,u,_){let S=u;_!==g.SHADING&&(S=r.Util.transform(S,l.baseTransform),this.matrix&&(S=r.Util.transform(S,this.matrix)));let D=this.createPatternCanvas(l),R=new DOMMatrix(S);R=R.translate(D.offsetX,D.offsetY),R=R.scale(1/D.scaleX,1/D.scaleY);let I=y.createPattern(D.canvas,"repeat");return I.setTransform(R),I}}return d})();e.TilingPattern=n},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=g,e.convertToRGBA=c,e.grayToRGBA=w;var r=A(1);function c(E){switch(E.kind){case r.ImageKind.GRAYSCALE_1BPP:return g(E);case r.ImageKind.RGB_24BPP:return C(E)}return null}function g({src:E,srcPos:b=0,dest:a,width:i,height:t,nonBlackColor:o=4294967295,inverseDecode:s=!1}){let n=r.FeatureTest.isLittleEndian?4278190080:255,[d,h]=s?[o,n]:[n,o],y=i>>3,l=i&7,u=E.length;a=new Uint32Array(a.buffer);let _=0;for(let S=0;S<t;S++){for(let R=b+y;b<R;b++){let I=b<u?E[b]:255;a[_++]=I&128?h:d,a[_++]=I&64?h:d,a[_++]=I&32?h:d,a[_++]=I&16?h:d,a[_++]=I&8?h:d,a[_++]=I&4?h:d,a[_++]=I&2?h:d,a[_++]=I&1?h:d}if(l===0)continue;let D=b<u?E[b++]:255;for(let R=0;R<l;R++)a[_++]=D&1<<7-R?h:d}return{srcPos:b,destPos:_}}function C({src:E,srcPos:b=0,dest:a,destPos:i=0,width:t,height:o}){let s=0,n=E.length>>2,d=new Uint32Array(E.buffer,b,n);if(r.FeatureTest.isLittleEndian){for(;s<n-2;s+=3,i+=4){let h=d[s],y=d[s+1],l=d[s+2];a[i]=h|4278190080,a[i+1]=h>>>24|y<<8|4278190080,a[i+2]=y>>>16|l<<16|4278190080,a[i+3]=l>>>8|4278190080}for(let h=s*4,y=E.length;h<y;h+=3)a[i++]=E[h]|E[h+1]<<8|E[h+2]<<16|4278190080}else{for(;s<n-2;s+=3,i+=4){let h=d[s],y=d[s+1],l=d[s+2];a[i]=h|255,a[i+1]=h<<24|y>>>8|255,a[i+2]=y<<16|l>>>16|255,a[i+3]=l<<8|255}for(let h=s*4,y=E.length;h<y;h+=3)a[i++]=E[h]<<24|E[h+1]<<16|E[h+2]<<8|255}return{srcPos:b,destPos:i}}function w(E,b){if(r.FeatureTest.isLittleEndian)for(let a=0,i=E.length;a<i;a++)b[a]=E[a]*65793|4278190080;else for(let a=0,i=E.length;a<i;a++)b[a]=E[a]*16843008|255}},(M,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;let A=Object.create(null);e.GlobalWorkerOptions=A,A.workerPort=null,A.workerSrc=""},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=A(1);let c={UNKNOWN:0,DATA:1,ERROR:2},g={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function C(E){switch(E instanceof Error||typeof E=="object"&&E!==null||(0,r.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),E.name){case"AbortException":return new r.AbortException(E.message);case"MissingPDFException":return new r.MissingPDFException(E.message);case"PasswordException":return new r.PasswordException(E.message,E.code);case"UnexpectedResponseException":return new r.UnexpectedResponseException(E.message,E.status);case"UnknownErrorException":return new r.UnknownErrorException(E.message,E.details);default:return new r.UnknownErrorException(E.message,E.toString())}}class w{constructor(b,a,i){this.sourceName=b,this.targetName=a,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{let o=t.data;if(o.targetName!==this.sourceName)return;if(o.stream){this.#t(o);return}if(o.callback){let n=o.callbackId,d=this.callbackCapabilities[n];if(!d)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],o.callback===c.DATA)d.resolve(o.data);else if(o.callback===c.ERROR)d.reject(C(o.reason));else throw new Error("Unexpected callback case");return}let s=this.actionHandler[o.action];if(!s)throw new Error(`Unknown action from worker: ${o.action}`);if(o.callbackId){let n=this.sourceName,d=o.sourceName;new Promise(function(h){h(s(o.data))}).then(function(h){i.postMessage({sourceName:n,targetName:d,callback:c.DATA,callbackId:o.callbackId,data:h})},function(h){i.postMessage({sourceName:n,targetName:d,callback:c.ERROR,callbackId:o.callbackId,reason:C(h)})});return}if(o.streamId){this.#e(o);return}s(o.data)},i.addEventListener("message",this._onComObjOnMessage)}on(b,a){let i=this.actionHandler;if(i[b])throw new Error(`There is already an actionName called "${b}"`);i[b]=a}send(b,a,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,data:a},i)}sendWithPromise(b,a,i){let t=this.callbackId++,o=new r.PromiseCapability;this.callbackCapabilities[t]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:b,callbackId:t,data:a},i)}catch(s){o.reject(s)}return o.promise}sendWithStream(b,a,i,t){let o=this.streamId++,s=this.sourceName,n=this.targetName,d=this.comObj;return new ReadableStream({start:h=>{let y=new r.PromiseCapability;return this.streamControllers[o]={controller:h,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:s,targetName:n,action:b,streamId:o,data:a,desiredSize:h.desiredSize},t),y.promise},pull:h=>{let y=new r.PromiseCapability;return this.streamControllers[o].pullCall=y,d.postMessage({sourceName:s,targetName:n,stream:g.PULL,streamId:o,desiredSize:h.desiredSize}),y.promise},cancel:h=>{(0,r.assert)(h instanceof Error,"cancel must have a valid reason");let y=new r.PromiseCapability;return this.streamControllers[o].cancelCall=y,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:s,targetName:n,stream:g.CANCEL,streamId:o,reason:C(h)}),y.promise}},i)}#e(b){let a=b.streamId,i=this.sourceName,t=b.sourceName,o=this.comObj,s=this,n=this.actionHandler[b.action],d={enqueue(h,y=1,l){if(this.isCancelled)return;let u=this.desiredSize;this.desiredSize-=y,u>0&&this.desiredSize<=0&&(this.sinkCapability=new r.PromiseCapability,this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:t,stream:g.ENQUEUE,streamId:a,chunk:h},l)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:t,stream:g.CLOSE,streamId:a}),delete s.streamSinks[a])},error(h){(0,r.assert)(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:t,stream:g.ERROR,streamId:a,reason:C(h)}))},sinkCapability:new r.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:b.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[a]=d,new Promise(function(h){h(n(b.data,d))}).then(function(){o.postMessage({sourceName:i,targetName:t,stream:g.START_COMPLETE,streamId:a,success:!0})},function(h){o.postMessage({sourceName:i,targetName:t,stream:g.START_COMPLETE,streamId:a,reason:C(h)})})}#t(b){let a=b.streamId,i=this.sourceName,t=b.sourceName,o=this.comObj,s=this.streamControllers[a],n=this.streamSinks[a];switch(b.stream){case g.START_COMPLETE:b.success?s.startCall.resolve():s.startCall.reject(C(b.reason));break;case g.PULL_COMPLETE:b.success?s.pullCall.resolve():s.pullCall.reject(C(b.reason));break;case g.PULL:if(!n){o.postMessage({sourceName:i,targetName:t,stream:g.PULL_COMPLETE,streamId:a,success:!0});break}n.desiredSize<=0&&b.desiredSize>0&&n.sinkCapability.resolve(),n.desiredSize=b.desiredSize,new Promise(function(d){d(n.onPull?.())}).then(function(){o.postMessage({sourceName:i,targetName:t,stream:g.PULL_COMPLETE,streamId:a,success:!0})},function(d){o.postMessage({sourceName:i,targetName:t,stream:g.PULL_COMPLETE,streamId:a,reason:C(d)})});break;case g.ENQUEUE:if((0,r.assert)(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(b.chunk);break;case g.CLOSE:if((0,r.assert)(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#i(s,a);break;case g.ERROR:(0,r.assert)(s,"error should have stream controller"),s.controller.error(C(b.reason)),this.#i(s,a);break;case g.CANCEL_COMPLETE:b.success?s.cancelCall.resolve():s.cancelCall.reject(C(b.reason)),this.#i(s,a);break;case g.CANCEL:if(!n)break;new Promise(function(d){d(n.onCancel?.(C(b.reason)))}).then(function(){o.postMessage({sourceName:i,targetName:t,stream:g.CANCEL_COMPLETE,streamId:a,success:!0})},function(d){o.postMessage({sourceName:i,targetName:t,stream:g.CANCEL_COMPLETE,streamId:a,reason:C(d)})}),n.sinkCapability.reject(C(b.reason)),n.isCancelled=!0,delete this.streamSinks[a];break;default:throw new Error("Unexpected stream case")}}#i(b,a){return ae(this,null,function*(){yield Promise.allSettled([b.startCall?.promise,b.pullCall?.promise,b.cancelCall?.promise]),delete this.streamControllers[a]})}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=w},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r=A(1);class c{#e;#t;constructor({parsedData:C,rawData:w}){this.#e=C,this.#t=w}getRaw(){return this.#t}get(C){return this.#e.get(C)??null}getAll(){return(0,r.objectFromMap)(this.#e)}has(C){return this.#e.has(C)}}e.Metadata=c},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r=A(1),c=A(8);let g=Symbol("INTERNAL");class C{#e=!0;constructor(b,a){this.name=b,this.intent=a}get visible(){return this.#e}_setVisible(b,a){b!==g&&(0,r.unreachable)("Internal method `_setVisible` called."),this.#e=a}}class w{#e=null;#t=new Map;#i=null;#n=null;constructor(b){if(this.name=null,this.creator=null,b!==null){this.name=b.name,this.creator=b.creator,this.#n=b.order;for(let a of b.groups)this.#t.set(a.id,new C(a.name,a.intent));if(b.baseState==="OFF")for(let a of this.#t.values())a._setVisible(g,!1);for(let a of b.on)this.#t.get(a)._setVisible(g,!0);for(let a of b.off)this.#t.get(a)._setVisible(g,!1);this.#i=this.getHash()}}#o(b){let a=b.length;if(a<2)return!0;let i=b[0];for(let t=1;t<a;t++){let o=b[t],s;if(Array.isArray(o))s=this.#o(o);else if(this.#t.has(o))s=this.#t.get(o).visible;else return(0,r.warn)(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return i==="And"}isVisible(b){if(this.#t.size===0)return!0;if(!b)return(0,r.warn)("Optional content group not defined."),!0;if(b.type==="OCG")return this.#t.has(b.id)?this.#t.get(b.id).visible:((0,r.warn)(`Optional content group not found: ${b.id}`),!0);if(b.type==="OCMD"){if(b.expression)return this.#o(b.expression);if(!b.policy||b.policy==="AnyOn"){for(let a of b.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(this.#t.get(a).visible)return!0}return!1}else if(b.policy==="AllOn"){for(let a of b.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(!this.#t.get(a).visible)return!1}return!0}else if(b.policy==="AnyOff"){for(let a of b.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(!this.#t.get(a).visible)return!0}return!1}else if(b.policy==="AllOff"){for(let a of b.ids){if(!this.#t.has(a))return(0,r.warn)(`Optional content group not found: ${a}`),!0;if(this.#t.get(a).visible)return!1}return!0}return(0,r.warn)(`Unknown optional content policy ${b.policy}.`),!0}return(0,r.warn)(`Unknown group type ${b.type}.`),!0}setVisibility(b,a=!0){if(!this.#t.has(b)){(0,r.warn)(`Optional content group not found: ${b}`);return}this.#t.get(b)._setVisible(g,!!a),this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,r.objectFromMap)(this.#t):null}getGroup(b){return this.#t.get(b)||null}getHash(){if(this.#e!==null)return this.#e;let b=new c.MurmurHash3_64;for(let[a,i]of this.#t)b.update(`${a}:${i.visible}`);return this.#e=b.hexdigest()}}e.OptionalContentConfig=w},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=A(1),c=A(6);class g{constructor({length:b,initialData:a,progressiveDone:i=!1,contentDispositionFilename:t=null,disableRange:o=!1,disableStream:s=!1},n){if((0,r.assert)(n,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=i,this._contentDispositionFilename=t,a?.length>0){let d=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=n,this._isStreamingSupported=!s,this._isRangeSupported=!o,this._contentLength=b,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,h)=>{this._onReceiveData({begin:d,chunk:h})}),this._pdfDataRangeTransport.addProgressListener((d,h)=>{this._onProgress({loaded:d,total:h})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:b,chunk:a}){let i=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;if(b===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{let t=this._rangeReaders.some(function(o){return o._begin!==b?!1:(o._enqueue(i),!0)});(0,r.assert)(t,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(b){b.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:b.loaded}):this._fullRequestReader?.onProgress?.({loaded:b.loaded,total:b.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(b){let a=this._rangeReaders.indexOf(b);a>=0&&this._rangeReaders.splice(a,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let b=this._queuedChunks;return this._queuedChunks=null,new C(this,b,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(b,a){if(a<=this._progressiveDataLength)return null;let i=new w(this,b,a);return this._pdfDataRangeTransport.requestDataRange(b,a),this._rangeReaders.push(i),i}cancelAllRequests(b){this._fullRequestReader?.cancel(b);for(let a of this._rangeReaders.slice(0))a.cancel(b);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=g;class C{constructor(b,a,i=!1,t=null){this._stream=b,this._done=i||!1,this._filename=(0,c.isPdfFile)(t)?t:null,this._queuedChunks=a||[],this._loaded=0;for(let o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),b._fullRequestReader=this,this.onProgress=null}_enqueue(b){this._done||(this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunks.push(b),this._loaded+=b.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return ae(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let b=new r.PromiseCapability;return this._requests.push(b),b.promise})}cancel(b){this._done=!0;for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class w{constructor(b,a,i){this._stream=b,this._begin=a,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(b){if(!this._done){if(this._requests.length===0)this._queuedChunk=b;else{this._requests.shift().resolve({value:b,done:!1});for(let i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return ae(this,null,function*(){if(this._queuedChunk){let a=this._queuedChunk;return this._queuedChunk=null,{value:a,done:!1}}if(this._done)return{value:void 0,done:!0};let b=new r.PromiseCapability;return this._requests.push(b),b.promise})}cancel(b){this._done=!0;for(let a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=A(1),c=A(20);function g(i,t,o){return{method:"GET",headers:i,signal:o.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function C(i){let t=new Headers;for(let o in i){let s=i[o];s!==void 0&&t.append(o,s)}return t}function w(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:((0,r.warn)(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class E{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(t,o){if(o<=this._progressiveDataLength)return null;let s=new a(this,t,o);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let o of this._rangeRequestReaders.slice(0))o.cancel(t)}}e.PDFFetchStream=E;class b{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let o=t.source;this._withCredentials=o.withCredentials||!1,this._contentLength=o.length,this._headersCapability=new r.PromiseCapability,this._disableRange=o.disableRange||!1,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!o.disableStream,this._isRangeSupported=!o.disableRange,this._headers=C(this._stream.httpHeaders);let s=o.url;fetch(s,g(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!(0,c.validateResponseStatus)(n.status))throw(0,c.createResponseStatusError)(n.status,s);this._reader=n.body.getReader(),this._headersCapability.resolve();let d=l=>n.headers.get(l),{allowRangeRequests:h,suggestedLength:y}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=y||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ae(this,null,function*(){yield this._headersCapability.promise;let{value:t,done:o}=yield this._reader.read();return o?{value:t,done:o}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:w(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class a{constructor(t,o,s){this._stream=t,this._reader=null,this._loaded=0;let n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController,this._headers=C(this._stream.httpHeaders),this._headers.append("Range",`bytes=${o}-${s-1}`);let d=n.url;fetch(d,g(this._headers,this._withCredentials,this._abortController)).then(h=>{if(!(0,c.validateResponseStatus)(h.status))throw(0,c.createResponseStatusError)(h.status,d);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return ae(this,null,function*(){yield this._readCapability.promise;let{value:t,done:o}=yield this._reader.read();return o?{value:t,done:o}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:w(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=E,e.extractFilenameFromHeader=w,e.validateRangeRequestCapabilities=C,e.validateResponseStatus=b;var r=A(1),c=A(21),g=A(6);function C({getResponseHeader:a,isHttp:i,rangeChunkSize:t,disableRange:o}){let s={allowRangeRequests:!1,suggestedLength:void 0},n=parseInt(a("Content-Length"),10);return!Number.isInteger(n)||(s.suggestedLength=n,n<=2*t)||o||!i||a("Accept-Ranges")!=="bytes"||(a("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function w(a){let i=a("Content-Disposition");if(i){let t=(0,c.getFilenameFromContentDispositionHeader)(i);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if((0,g.isPdfFile)(t))return t}return null}function E(a,i){return a===404||a===0&&i.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+i+'".'):new r.UnexpectedResponseException(`Unexpected server response (${a}) while retrieving PDF "${i}".`,a)}function b(a){return a===200||a===206}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=c;var r=A(1);function c(g){let C=!0,w=E("filename\\*","i").exec(g);if(w){w=w[1];let n=t(w);return n=unescape(n),n=o(n),n=s(n),a(n)}if(w=i(g),w){let n=s(w);return a(n)}if(w=E("filename","i").exec(g),w){w=w[1];let n=t(w);return n=s(n),a(n)}function E(n,d){return new RegExp("(?:^|;)\\s*"+n+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function b(n,d){if(n){if(!/^[\x00-\xFF]+$/.test(d))return d;try{let h=new TextDecoder(n,{fatal:!0}),y=(0,r.stringToBytes)(d);d=h.decode(y),C=!1}catch{}}return d}function a(n){return C&&/[\x80-\xff]/.test(n)&&(n=b("utf-8",n),C&&(n=b("iso-8859-1",n))),n}function i(n){let d=[],h,y=E("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=y.exec(n))!==null;){let[,u,_,S]=h;if(u=parseInt(u,10),u in d){if(u===0)break;continue}d[u]=[_,S]}let l=[];for(let u=0;u<d.length&&u in d;++u){let[_,S]=d[u];S=t(S),_&&(S=unescape(S),u===0&&(S=o(S))),l.push(S)}return l.join("")}function t(n){if(n.startsWith('"')){let d=n.slice(1).split('\\"');for(let h=0;h<d.length;++h){let y=d[h].indexOf('"');y!==-1&&(d[h]=d[h].slice(0,y),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}n=d.join('"')}return n}function o(n){let d=n.indexOf("'");if(d===-1)return n;let h=n.slice(0,d),l=n.slice(d+1).replace(/^[^']*'/,"");return b(h,l)}function s(n){return!n.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(n)?n:n.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,y,l){if(y==="q"||y==="Q")return l=l.replaceAll("_"," "),l=l.replaceAll(/=([0-9a-fA-F]{2})/g,function(u,_){return String.fromCharCode(parseInt(_,16))}),b(h,l);try{l=atob(l)}catch{}return b(h,l)})}return""}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=A(1),c=A(20);let g=200,C=206;function w(t){let o=t.response;return typeof o!="string"?o:(0,r.stringToBytes)(o).buffer}class E{constructor(o,s={}){this.url=o,this.isHttp=/^https?:/i.test(o),this.httpHeaders=this.isHttp&&s.httpHeaders||Object.create(null),this.withCredentials=s.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(o,s,n){let d={begin:o,end:s};for(let h in n)d[h]=n[h];return this.request(d)}requestFull(o){return this.request(o)}request(o){let s=new XMLHttpRequest,n=this.currXhrId++,d=this.pendingRequests[n]={xhr:s};s.open("GET",this.url),s.withCredentials=this.withCredentials;for(let h in this.httpHeaders){let y=this.httpHeaders[h];y!==void 0&&s.setRequestHeader(h,y)}return this.isHttp&&"begin"in o&&"end"in o?(s.setRequestHeader("Range",`bytes=${o.begin}-${o.end-1}`),d.expectedStatus=C):d.expectedStatus=g,s.responseType="arraybuffer",o.onError&&(s.onerror=function(h){o.onError(s.status)}),s.onreadystatechange=this.onStateChange.bind(this,n),s.onprogress=this.onProgress.bind(this,n),d.onHeadersReceived=o.onHeadersReceived,d.onDone=o.onDone,d.onError=o.onError,d.onProgress=o.onProgress,s.send(null),n}onProgress(o,s){let n=this.pendingRequests[o];n&&n.onProgress?.(s)}onStateChange(o,s){let n=this.pendingRequests[o];if(!n)return;let d=n.xhr;if(d.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),d.readyState!==4||!(o in this.pendingRequests))return;if(delete this.pendingRequests[o],d.status===0&&this.isHttp){n.onError?.(d.status);return}let h=d.status||g;if(!(h===g&&n.expectedStatus===C)&&h!==n.expectedStatus){n.onError?.(d.status);return}let l=w(d);if(h===C){let u=d.getResponseHeader("Content-Range"),_=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);n.onDone({begin:parseInt(_[1],10),chunk:l})}else l?n.onDone({begin:0,chunk:l}):n.onError?.(d.status)}getRequestXhr(o){return this.pendingRequests[o].xhr}isPendingRequest(o){return o in this.pendingRequests}abortRequest(o){let s=this.pendingRequests[o].xhr;delete this.pendingRequests[o],s.abort()}}class b{constructor(o){this._source=o,this._manager=new E(o.url,{httpHeaders:o.httpHeaders,withCredentials:o.withCredentials}),this._rangeChunkSize=o.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(o){let s=this._rangeRequestReaders.indexOf(o);s>=0&&this._rangeRequestReaders.splice(s,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new a(this._manager,this._source),this._fullRequestReader}getRangeReader(o,s){let n=new i(this._manager,o,s);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(o){this._fullRequestReader?.cancel(o);for(let s of this._rangeRequestReaders.slice(0))s.cancel(o)}}e.PDFNetworkStream=b;class a{constructor(o,s){this._manager=o;let n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=s.url,this._fullRequestId=o.requestFull(n),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=s.disableRange||!1,this._contentLength=s.length,this._rangeChunkSize=s.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let o=this._fullRequestId,s=this._manager.getRequestXhr(o),n=y=>s.getResponseHeader(y),{allowRangeRequests:d,suggestedLength:h}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(o),this._headersReceivedCapability.resolve()}_onDone(o){if(o&&(this._requests.length>0?this._requests.shift().resolve({value:o.chunk,done:!1}):this._cachedChunks.push(o.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(o){this._storedError=(0,c.createResponseStatusError)(o,this._url),this._headersReceivedCapability.reject(this._storedError);for(let s of this._requests)s.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(o){this.onProgress?.({loaded:o.loaded,total:o.lengthComputable?o.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){return ae(this,null,function*(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let o=new r.PromiseCapability;return this._requests.push(o),o.promise})}cancel(o){this._done=!0,this._headersReceivedCapability.reject(o);for(let s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class i{constructor(o,s,n){this._manager=o;let d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=o.url,this._requestId=o.requestRange(s,n,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(o){let s=o.chunk;this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunk=s,this._done=!0;for(let n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(o){this._storedError=(0,c.createResponseStatusError)(o,this._url);for(let s of this._requests)s.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(o){this.isStreamingSupported||this.onProgress?.({loaded:o.loaded})}get isStreamingSupported(){return!1}read(){return ae(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let s=this._queuedChunk;return this._queuedChunk=null,{value:s,done:!1}}if(this._done)return{value:void 0,done:!0};let o=new r.PromiseCapability;return this._requests.push(o),o.promise})}cancel(o){this._done=!0;for(let s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=A(1),c=A(20);let g=/^file:\/\/\/[a-zA-Z]:\//;function C(n){let d=Si(),h=d.parse(n);return h.protocol==="file:"||h.host?h:/^[a-z]:[/\\]/i.test(n)?d.parse(`file:///${n}`):(h.host||(h.protocol="file:"),h)}class w{constructor(d){this.source=d,this.url=C(d.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new o(this):new i(this),this._fullRequestReader}getRangeReader(d,h){if(h<=this._progressiveDataLength)return null;let y=this.isFsUrl?new s(this,d,h):new t(this,d,h);return this._rangeRequestReaders.push(y),y}cancelAllRequests(d){this._fullRequestReader?.cancel(d);for(let h of this._rangeRequestReaders.slice(0))h.cancel(d)}}e.PDFNodeStream=w;class E{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;let h=d.source;this._contentLength=h.length,this._loaded=0,this._filename=null,this._disableRange=h.disableRange||!1,this._rangeChunkSize=h.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!h.disableStream,this._isRangeSupported=!h.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return ae(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let d=this._readableStream.read();return d===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=d.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(d).buffer,done:!1})})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",h=>{this._error(h)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class b{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;let h=d.source;this._isStreamingSupported=!h.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){return ae(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let d=this._readableStream.read();return d===null?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=d.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(d).buffer,done:!1})})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",h=>{this._error(h)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function a(n,d){return{protocol:n.protocol,auth:n.auth,host:n.hostname,port:n.port,path:n.path,method:"GET",headers:d}}class i extends E{constructor(d){super(d);let h=y=>{if(y.statusCode===404){let S=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S,this._headersCapability.reject(S);return}this._headersCapability.resolve(),this._setReadableStream(y);let l=S=>this._readableStream.headers[S.toLowerCase()],{allowRangeRequests:u,suggestedLength:_}=(0,c.validateRangeRequestCapabilities)({getResponseHeader:l,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=_||this._contentLength,this._filename=(0,c.extractFilenameFromHeader)(l)};if(this._request=null,this._url.protocol==="http:"){let y=zt();this._request=y.request(a(this._url,d.httpHeaders),h)}else{let y=$t();this._request=y.request(a(this._url,d.httpHeaders),h)}this._request.on("error",y=>{this._storedError=y,this._headersCapability.reject(y)}),this._request.end()}}class t extends b{constructor(d,h,y){super(d),this._httpHeaders={};for(let u in d.httpHeaders){let _=d.httpHeaders[u];_!==void 0&&(this._httpHeaders[u]=_)}this._httpHeaders.Range=`bytes=${h}-${y-1}`;let l=u=>{if(u.statusCode===404){let _=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=_;return}this._setReadableStream(u)};if(this._request=null,this._url.protocol==="http:"){let u=zt();this._request=u.request(a(this._url,this._httpHeaders),l)}else{let u=$t();this._request=u.request(a(this._url,this._httpHeaders),l)}this._request.on("error",u=>{this._storedError=u}),this._request.end()}}class o extends E{constructor(d){super(d);let h=decodeURIComponent(this._url.path);g.test(this._url.href)&&(h=h.replace(/^\//,""));let y=wt();y.lstat(h,(l,u)=>{if(l){l.code==="ENOENT"&&(l=new r.MissingPDFException(`Missing PDF "${h}".`)),this._storedError=l,this._headersCapability.reject(l);return}this._contentLength=u.size,this._setReadableStream(y.createReadStream(h)),this._headersCapability.resolve()})}}class s extends b{constructor(d,h,y){super(d);let l=decodeURIComponent(this._url.path);g.test(this._url.href)&&(l=l.replace(/^\//,""));let u=wt();this._setReadableStream(u.createReadStream(l,{start:h,end:y-1}))}}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=A(6),c=A(1);let g={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},C="http://www.w3.org/XML/1998/namespace",w="http://www.w3.org/1999/xlink",E=["butt","round","square"],b=["miter","round","bevel"],a=function(u,_="",S=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!S)return URL.createObjectURL(new Blob([u],{type:_}));let D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",R=`data:${_};base64,`;for(let I=0,G=u.length;I<G;I+=3){let z=u[I]&255,$=u[I+1]&255,Q=u[I+2]&255,Y=z>>2,B=(z&3)<<4|$>>4,H=I+1<G?($&15)<<2|Q>>6:64,O=I+2<G?Q&63:64;R+=D[Y]+D[B]+D[H]+D[O]}return R},i=function(){let u=new Uint8Array([137,80,78,71,13,10,26,10]),_=12,S=new Int32Array(256);for(let Q=0;Q<256;Q++){let Y=Q;for(let B=0;B<8;B++)Y=Y&1?3988292384^Y>>1&2147483647:Y>>1&2147483647;S[Q]=Y}function D(Q,Y,B){let H=-1;for(let O=Y;O<B;O++){let f=(H^Q[O])&255,m=S[f];H=H>>>8^m}return H^-1}function R(Q,Y,B,H){let O=H,f=Y.length;B[O]=f>>24&255,B[O+1]=f>>16&255,B[O+2]=f>>8&255,B[O+3]=f&255,O+=4,B[O]=Q.charCodeAt(0)&255,B[O+1]=Q.charCodeAt(1)&255,B[O+2]=Q.charCodeAt(2)&255,B[O+3]=Q.charCodeAt(3)&255,O+=4,B.set(Y,O),O+=Y.length;let m=D(B,H+4,O);B[O]=m>>24&255,B[O+1]=m>>16&255,B[O+2]=m>>8&255,B[O+3]=m&255}function I(Q,Y,B){let H=1,O=0;for(let f=Y;f<B;++f)H=(H+(Q[f]&255))%65521,O=(O+H)%65521;return O<<16|H}function G(Q){if(!c.isNodeJS)return z(Q);try{let Y=parseInt(process.versions.node)>=8?Q:Buffer.from(Q),B=Ei().deflateSync(Y,{level:9});return B instanceof Uint8Array?B:new Uint8Array(B)}catch(Y){(0,c.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Y)}return z(Q)}function z(Q){let Y=Q.length,B=65535,H=Math.ceil(Y/B),O=new Uint8Array(2+Y+H*5+4),f=0;O[f++]=120,O[f++]=156;let m=0;for(;Y>B;)O[f++]=0,O[f++]=255,O[f++]=255,O[f++]=0,O[f++]=0,O.set(Q.subarray(m,m+B),f),f+=B,m+=B,Y-=B;O[f++]=1,O[f++]=Y&255,O[f++]=Y>>8&255,O[f++]=~Y&65535&255,O[f++]=(~Y&65535)>>8&255,O.set(Q.subarray(m),f),f+=Q.length-m;let v=I(Q,0,Q.length);return O[f++]=v>>24&255,O[f++]=v>>16&255,O[f++]=v>>8&255,O[f++]=v&255,O}function $(Q,Y,B,H){let O=Q.width,f=Q.height,m,v,T,F=Q.data;switch(Y){case c.ImageKind.GRAYSCALE_1BPP:v=0,m=1,T=O+7>>3;break;case c.ImageKind.RGB_24BPP:v=2,m=8,T=O*3;break;case c.ImageKind.RGBA_32BPP:v=6,m=8,T=O*4;break;default:throw new Error("invalid format")}let k=new Uint8Array((1+T)*f),V=0,L=0;for(let j=0;j<f;++j)k[V++]=0,k.set(F.subarray(L,L+T),V),L+=T,V+=T;if(Y===c.ImageKind.GRAYSCALE_1BPP&&H){V=0;for(let j=0;j<f;j++){V++;for(let q=0;q<T;q++)k[V++]^=255}}let p=new Uint8Array([O>>24&255,O>>16&255,O>>8&255,O&255,f>>24&255,f>>16&255,f>>8&255,f&255,m,v,0,0,0]),P=G(k),x=u.length+_*3+p.length+P.length,N=new Uint8Array(x),U=0;return N.set(u,U),U+=u.length,R("IHDR",p,N,U),U+=_+p.length,R("IDATA",P,N,U),U+=_+P.length,R("IEND",new Uint8Array(0),N,U),a(N,"image/png",B)}return function(Y,B,H){let O=Y.kind===void 0?c.ImageKind.GRAYSCALE_1BPP:Y.kind;return $(Y,O,B,H)}}();class t{constructor(){this.fontSizeScale=1,this.fontWeight=g.fontWeight,this.fontSize=0,this.textMatrix=c.IDENTITY_MATRIX,this.fontMatrix=c.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=c.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=g.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(_,S){this.x=_,this.y=S}}function o(u){let _=[],S=[];for(let D of u){if(D.fn==="save"){_.push({fnId:92,fn:"group",items:[]}),S.push(_),_=_.at(-1).items;continue}D.fn==="restore"?_=S.pop():_.push(D)}return _}function s(u){if(Number.isInteger(u))return u.toString();let _=u.toFixed(10),S=_.length-1;if(_[S]!=="0")return _;do S--;while(_[S]==="0");return _.substring(0,_[S]==="."?S:S+1)}function n(u){if(u[4]===0&&u[5]===0){if(u[1]===0&&u[2]===0)return u[0]===1&&u[3]===1?"":`scale(${s(u[0])} ${s(u[3])})`;if(u[0]===u[3]&&u[1]===-u[2]){let _=Math.acos(u[0])*180/Math.PI;return`rotate(${s(_)})`}}else if(u[0]===1&&u[1]===0&&u[2]===0&&u[3]===1)return`translate(${s(u[4])} ${s(u[5])})`;return`matrix(${s(u[0])} ${s(u[1])} ${s(u[2])} ${s(u[3])} ${s(u[4])} ${s(u[5])})`}let d=0,h=0,y=0;class l{constructor(_,S,D=!1){(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new t,this.transformMatrix=c.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=_,this.objs=S,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!D,this._operatorIdMapping=[];for(let R in c.OPS)this._operatorIdMapping[c.OPS[R]]=R}getObject(_,S=null){return typeof _=="string"?_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_):S}save(){this.transformStack.push(this.transformMatrix);let _=this.current;this.extraStack.push(_),this.current=_.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(_){this.save(),this.executeOpTree(_),this.restore()}loadDependencies(_){let S=_.fnArray,D=_.argsArray;for(let R=0,I=S.length;R<I;R++)if(S[R]===c.OPS.dependency)for(let G of D[R]){let z=G.startsWith("g_")?this.commonObjs:this.objs,$=new Promise(Q=>{z.get(G,Q)});this.current.dependencies.push($)}return Promise.all(this.current.dependencies)}transform(_,S,D,R,I,G){let z=[_,S,D,R,I,G];this.transformMatrix=c.Util.transform(this.transformMatrix,z),this.tgrp=null}getSVG(_,S){this.viewport=S;let D=this._initialize(S);return this.loadDependencies(_).then(()=>(this.transformMatrix=c.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(_)),D))}convertOpList(_){let S=this._operatorIdMapping,D=_.argsArray,R=_.fnArray,I=[];for(let G=0,z=R.length;G<z;G++){let $=R[G];I.push({fnId:$,fn:S[$],args:D[G]})}return o(I)}executeOpTree(_){for(let S of _){let D=S.fn,R=S.fnId,I=S.args;switch(R|0){case c.OPS.beginText:this.beginText();break;case c.OPS.dependency:break;case c.OPS.setLeading:this.setLeading(I);break;case c.OPS.setLeadingMoveText:this.setLeadingMoveText(I[0],I[1]);break;case c.OPS.setFont:this.setFont(I);break;case c.OPS.showText:this.showText(I[0]);break;case c.OPS.showSpacedText:this.showText(I[0]);break;case c.OPS.endText:this.endText();break;case c.OPS.moveText:this.moveText(I[0],I[1]);break;case c.OPS.setCharSpacing:this.setCharSpacing(I[0]);break;case c.OPS.setWordSpacing:this.setWordSpacing(I[0]);break;case c.OPS.setHScale:this.setHScale(I[0]);break;case c.OPS.setTextMatrix:this.setTextMatrix(I[0],I[1],I[2],I[3],I[4],I[5]);break;case c.OPS.setTextRise:this.setTextRise(I[0]);break;case c.OPS.setTextRenderingMode:this.setTextRenderingMode(I[0]);break;case c.OPS.setLineWidth:this.setLineWidth(I[0]);break;case c.OPS.setLineJoin:this.setLineJoin(I[0]);break;case c.OPS.setLineCap:this.setLineCap(I[0]);break;case c.OPS.setMiterLimit:this.setMiterLimit(I[0]);break;case c.OPS.setFillRGBColor:this.setFillRGBColor(I[0],I[1],I[2]);break;case c.OPS.setStrokeRGBColor:this.setStrokeRGBColor(I[0],I[1],I[2]);break;case c.OPS.setStrokeColorN:this.setStrokeColorN(I);break;case c.OPS.setFillColorN:this.setFillColorN(I);break;case c.OPS.shadingFill:this.shadingFill(I[0]);break;case c.OPS.setDash:this.setDash(I[0],I[1]);break;case c.OPS.setRenderingIntent:this.setRenderingIntent(I[0]);break;case c.OPS.setFlatness:this.setFlatness(I[0]);break;case c.OPS.setGState:this.setGState(I[0]);break;case c.OPS.fill:this.fill();break;case c.OPS.eoFill:this.eoFill();break;case c.OPS.stroke:this.stroke();break;case c.OPS.fillStroke:this.fillStroke();break;case c.OPS.eoFillStroke:this.eoFillStroke();break;case c.OPS.clip:this.clip("nonzero");break;case c.OPS.eoClip:this.clip("evenodd");break;case c.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case c.OPS.paintImageXObject:this.paintImageXObject(I[0]);break;case c.OPS.paintInlineImageXObject:this.paintInlineImageXObject(I[0]);break;case c.OPS.paintImageMaskXObject:this.paintImageMaskXObject(I[0]);break;case c.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(I[0],I[1]);break;case c.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case c.OPS.closePath:this.closePath();break;case c.OPS.closeStroke:this.closeStroke();break;case c.OPS.closeFillStroke:this.closeFillStroke();break;case c.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case c.OPS.nextLine:this.nextLine();break;case c.OPS.transform:this.transform(I[0],I[1],I[2],I[3],I[4],I[5]);break;case c.OPS.constructPath:this.constructPath(I[0],I[1]);break;case c.OPS.endPath:this.endPath();break;case 92:this.group(S.items);break;default:(0,c.warn)(`Unimplemented operator ${D}`);break}}}setWordSpacing(_){this.current.wordSpacing=_}setCharSpacing(_){this.current.charSpacing=_}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(_,S,D,R,I,G){let z=this.current;z.textMatrix=z.lineMatrix=[_,S,D,R,I,G],z.textMatrixScale=Math.hypot(_,S),z.x=z.lineX=0,z.y=z.lineY=0,z.xcoords=[],z.ycoords=[],z.tspan=this.svgFactory.createElement("svg:tspan"),z.tspan.setAttributeNS(null,"font-family",z.fontFamily),z.tspan.setAttributeNS(null,"font-size",`${s(z.fontSize)}px`),z.tspan.setAttributeNS(null,"y",s(-z.y)),z.txtElement=this.svgFactory.createElement("svg:text"),z.txtElement.append(z.tspan)}beginText(){let _=this.current;_.x=_.lineX=0,_.y=_.lineY=0,_.textMatrix=c.IDENTITY_MATRIX,_.lineMatrix=c.IDENTITY_MATRIX,_.textMatrixScale=1,_.tspan=this.svgFactory.createElement("svg:tspan"),_.txtElement=this.svgFactory.createElement("svg:text"),_.txtgrp=this.svgFactory.createElement("svg:g"),_.xcoords=[],_.ycoords=[]}moveText(_,S){let D=this.current;D.x=D.lineX+=_,D.y=D.lineY+=S,D.xcoords=[],D.ycoords=[],D.tspan=this.svgFactory.createElement("svg:tspan"),D.tspan.setAttributeNS(null,"font-family",D.fontFamily),D.tspan.setAttributeNS(null,"font-size",`${s(D.fontSize)}px`),D.tspan.setAttributeNS(null,"y",s(-D.y))}showText(_){let S=this.current,D=S.font,R=S.fontSize;if(R===0)return;let I=S.fontSizeScale,G=S.charSpacing,z=S.wordSpacing,$=S.fontDirection,Q=S.textHScale*$,Y=D.vertical,B=Y?1:-1,H=D.defaultVMetrics,O=R*S.fontMatrix[0],f=0;for(let T of _){if(T===null){f+=$*z;continue}else if(typeof T=="number"){f+=B*T*R/1e3;continue}let F=(T.isSpace?z:0)+G,k=T.fontChar,V,L,p=T.width;if(Y){let x,N=T.vmetric||H;x=T.vmetric?N[1]:p*.5,x=-x*O;let U=N[2]*O;p=N?-N[0]:p,V=x/I,L=(f+U)/I}else V=f/I,L=0;(T.isInFont||D.missingFile)&&(S.xcoords.push(S.x+V),Y&&S.ycoords.push(-S.y+L),S.tspan.textContent+=k);let P=Y?p*O-F*$:p*O+F*$;f+=P}S.tspan.setAttributeNS(null,"x",S.xcoords.map(s).join(" ")),Y?S.tspan.setAttributeNS(null,"y",S.ycoords.map(s).join(" ")):S.tspan.setAttributeNS(null,"y",s(-S.y)),Y?S.y-=f:S.x+=f*Q,S.tspan.setAttributeNS(null,"font-family",S.fontFamily),S.tspan.setAttributeNS(null,"font-size",`${s(S.fontSize)}px`),S.fontStyle!==g.fontStyle&&S.tspan.setAttributeNS(null,"font-style",S.fontStyle),S.fontWeight!==g.fontWeight&&S.tspan.setAttributeNS(null,"font-weight",S.fontWeight);let m=S.textRenderingMode&c.TextRenderingMode.FILL_STROKE_MASK;if(m===c.TextRenderingMode.FILL||m===c.TextRenderingMode.FILL_STROKE?(S.fillColor!==g.fillColor&&S.tspan.setAttributeNS(null,"fill",S.fillColor),S.fillAlpha<1&&S.tspan.setAttributeNS(null,"fill-opacity",S.fillAlpha)):S.textRenderingMode===c.TextRenderingMode.ADD_TO_PATH?S.tspan.setAttributeNS(null,"fill","transparent"):S.tspan.setAttributeNS(null,"fill","none"),m===c.TextRenderingMode.STROKE||m===c.TextRenderingMode.FILL_STROKE){let T=1/(S.textMatrixScale||1);this._setStrokeAttributes(S.tspan,T)}let v=S.textMatrix;S.textRise!==0&&(v=v.slice(),v[5]+=S.textRise),S.txtElement.setAttributeNS(null,"transform",`${n(v)} scale(${s(Q)}, -1)`),S.txtElement.setAttributeNS(C,"xml:space","preserve"),S.txtElement.append(S.tspan),S.txtgrp.append(S.txtElement),this._ensureTransformGroup().append(S.txtElement)}setLeadingMoveText(_,S){this.setLeading(-S),this.moveText(_,S)}addFontStyle(_){if(!_.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let S=a(_.data,_.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${_.loadedName}"; src: url(${S}); }
`}setFont(_){let S=this.current,D=this.commonObjs.get(_[0]),R=_[1];S.font=D,this.embedFonts&&!D.missingFile&&!this.embeddedFonts[D.loadedName]&&(this.addFontStyle(D),this.embeddedFonts[D.loadedName]=D),S.fontMatrix=D.fontMatrix||c.FONT_IDENTITY_MATRIX;let I="normal";D.black?I="900":D.bold&&(I="bold");let G=D.italic?"italic":"normal";R<0?(R=-R,S.fontDirection=-1):S.fontDirection=1,S.fontSize=R,S.fontFamily=D.loadedName,S.fontWeight=I,S.fontStyle=G,S.tspan=this.svgFactory.createElement("svg:tspan"),S.tspan.setAttributeNS(null,"y",s(-S.y)),S.xcoords=[],S.ycoords=[]}endText(){let _=this.current;_.textRenderingMode&c.TextRenderingMode.ADD_TO_PATH_FLAG&&_.txtElement?.hasChildNodes()&&(_.element=_.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(_){_>0&&(this.current.lineWidth=_)}setLineCap(_){this.current.lineCap=E[_]}setLineJoin(_){this.current.lineJoin=b[_]}setMiterLimit(_){this.current.miterLimit=_}setStrokeAlpha(_){this.current.strokeAlpha=_}setStrokeRGBColor(_,S,D){this.current.strokeColor=c.Util.makeHexColor(_,S,D)}setFillAlpha(_){this.current.fillAlpha=_}setFillRGBColor(_,S,D){this.current.fillColor=c.Util.makeHexColor(_,S,D),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(_){this.current.strokeColor=this._makeColorN_Pattern(_)}setFillColorN(_){this.current.fillColor=this._makeColorN_Pattern(_)}shadingFill(_){let{width:S,height:D}=this.viewport,R=c.Util.inverseTransform(this.transformMatrix),[I,G,z,$]=c.Util.getAxialAlignedBoundingBox([0,0,S,D],R),Q=this.svgFactory.createElement("svg:rect");Q.setAttributeNS(null,"x",I),Q.setAttributeNS(null,"y",G),Q.setAttributeNS(null,"width",z-I),Q.setAttributeNS(null,"height",$-G),Q.setAttributeNS(null,"fill",this._makeShadingPattern(_)),this.current.fillAlpha<1&&Q.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Q)}_makeColorN_Pattern(_){return _[0]==="TilingPattern"?this._makeTilingPattern(_):this._makeShadingPattern(_)}_makeTilingPattern(_){let S=_[1],D=_[2],R=_[3]||c.IDENTITY_MATRIX,[I,G,z,$]=_[4],Q=_[5],Y=_[6],B=_[7],H=`shading${y++}`,[O,f,m,v]=c.Util.normalizeRect([...c.Util.applyTransform([I,G],R),...c.Util.applyTransform([z,$],R)]),[T,F]=c.Util.singularValueDecompose2dScale(R),k=Q*T,V=Y*F,L=this.svgFactory.createElement("svg:pattern");L.setAttributeNS(null,"id",H),L.setAttributeNS(null,"patternUnits","userSpaceOnUse"),L.setAttributeNS(null,"width",k),L.setAttributeNS(null,"height",V),L.setAttributeNS(null,"x",`${O}`),L.setAttributeNS(null,"y",`${f}`);let p=this.svg,P=this.transformMatrix,x=this.current.fillColor,N=this.current.strokeColor,U=this.svgFactory.create(m-O,v-f);if(this.svg=U,this.transformMatrix=R,B===2){let j=c.Util.makeHexColor(...S);this.current.fillColor=j,this.current.strokeColor=j}return this.executeOpTree(this.convertOpList(D)),this.svg=p,this.transformMatrix=P,this.current.fillColor=x,this.current.strokeColor=N,L.append(U.childNodes[0]),this.defs.append(L),`url(#${H})`}_makeShadingPattern(_){switch(typeof _=="string"&&(_=this.objs.get(_)),_[0]){case"RadialAxial":let S=`shading${y++}`,D=_[3],R;switch(_[1]){case"axial":let I=_[4],G=_[5];R=this.svgFactory.createElement("svg:linearGradient"),R.setAttributeNS(null,"id",S),R.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),R.setAttributeNS(null,"x1",I[0]),R.setAttributeNS(null,"y1",I[1]),R.setAttributeNS(null,"x2",G[0]),R.setAttributeNS(null,"y2",G[1]);break;case"radial":let z=_[4],$=_[5],Q=_[6],Y=_[7];R=this.svgFactory.createElement("svg:radialGradient"),R.setAttributeNS(null,"id",S),R.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),R.setAttributeNS(null,"cx",$[0]),R.setAttributeNS(null,"cy",$[1]),R.setAttributeNS(null,"r",Y),R.setAttributeNS(null,"fx",z[0]),R.setAttributeNS(null,"fy",z[1]),R.setAttributeNS(null,"fr",Q);break;default:throw new Error(`Unknown RadialAxial type: ${_[1]}`)}for(let I of D){let G=this.svgFactory.createElement("svg:stop");G.setAttributeNS(null,"offset",I[0]),G.setAttributeNS(null,"stop-color",I[1]),R.append(G)}return this.defs.append(R),`url(#${S})`;case"Mesh":return(0,c.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${_[0]}`)}}setDash(_,S){this.current.dashArray=_,this.current.dashPhase=S}constructPath(_,S){let D=this.current,R=D.x,I=D.y,G=[],z=0;for(let $ of _)switch($|0){case c.OPS.rectangle:R=S[z++],I=S[z++];let Q=S[z++],Y=S[z++],B=R+Q,H=I+Y;G.push("M",s(R),s(I),"L",s(B),s(I),"L",s(B),s(H),"L",s(R),s(H),"Z");break;case c.OPS.moveTo:R=S[z++],I=S[z++],G.push("M",s(R),s(I));break;case c.OPS.lineTo:R=S[z++],I=S[z++],G.push("L",s(R),s(I));break;case c.OPS.curveTo:R=S[z+4],I=S[z+5],G.push("C",s(S[z]),s(S[z+1]),s(S[z+2]),s(S[z+3]),s(R),s(I)),z+=6;break;case c.OPS.curveTo2:G.push("C",s(R),s(I),s(S[z]),s(S[z+1]),s(S[z+2]),s(S[z+3])),R=S[z+2],I=S[z+3],z+=4;break;case c.OPS.curveTo3:R=S[z+2],I=S[z+3],G.push("C",s(S[z]),s(S[z+1]),s(R),s(I),s(R),s(I)),z+=4;break;case c.OPS.closePath:G.push("Z");break}G=G.join(" "),D.path&&_.length>0&&_[0]!==c.OPS.rectangle&&_[0]!==c.OPS.moveTo?G=D.path.getAttributeNS(null,"d")+G:(D.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(D.path)),D.path.setAttributeNS(null,"d",G),D.path.setAttributeNS(null,"fill","none"),D.element=D.path,D.setCurrentPoint(R,I)}endPath(){let _=this.current;if(_.path=null,!this.pendingClip)return;if(!_.element){this.pendingClip=null;return}let S=`clippath${d++}`,D=this.svgFactory.createElement("svg:clipPath");D.setAttributeNS(null,"id",S),D.setAttributeNS(null,"transform",n(this.transformMatrix));let R=_.element.cloneNode(!0);if(this.pendingClip==="evenodd"?R.setAttributeNS(null,"clip-rule","evenodd"):R.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,D.append(R),this.defs.append(D),_.activeClipUrl){_.clipGroup=null;for(let I of this.extraStack)I.clipGroup=null;D.setAttributeNS(null,"clip-path",_.activeClipUrl)}_.activeClipUrl=`url(#${S})`,this.tgrp=null}clip(_){this.pendingClip=_}closePath(){let _=this.current;if(_.path){let S=`${_.path.getAttributeNS(null,"d")}Z`;_.path.setAttributeNS(null,"d",S)}}setLeading(_){this.current.leading=-_}setTextRise(_){this.current.textRise=_}setTextRenderingMode(_){this.current.textRenderingMode=_}setHScale(_){this.current.textHScale=_/100}setRenderingIntent(_){}setFlatness(_){}setGState(_){for(let[S,D]of _)switch(S){case"LW":this.setLineWidth(D);break;case"LC":this.setLineCap(D);break;case"LJ":this.setLineJoin(D);break;case"ML":this.setMiterLimit(D);break;case"D":this.setDash(D[0],D[1]);break;case"RI":this.setRenderingIntent(D);break;case"FL":this.setFlatness(D);break;case"Font":this.setFont(D);break;case"CA":this.setStrokeAlpha(D);break;case"ca":this.setFillAlpha(D);break;default:(0,c.warn)(`Unimplemented graphic state operator ${S}`);break}}fill(){let _=this.current;_.element&&(_.element.setAttributeNS(null,"fill",_.fillColor),_.element.setAttributeNS(null,"fill-opacity",_.fillAlpha),this.endPath())}stroke(){let _=this.current;_.element&&(this._setStrokeAttributes(_.element),_.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(_,S=1){let D=this.current,R=D.dashArray;S!==1&&R.length>0&&(R=R.map(function(I){return S*I})),_.setAttributeNS(null,"stroke",D.strokeColor),_.setAttributeNS(null,"stroke-opacity",D.strokeAlpha),_.setAttributeNS(null,"stroke-miterlimit",s(D.miterLimit)),_.setAttributeNS(null,"stroke-linecap",D.lineCap),_.setAttributeNS(null,"stroke-linejoin",D.lineJoin),_.setAttributeNS(null,"stroke-width",s(S*D.lineWidth)+"px"),_.setAttributeNS(null,"stroke-dasharray",R.map(s).join(" ")),_.setAttributeNS(null,"stroke-dashoffset",s(S*D.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let _=this.svgFactory.createElement("svg:rect");_.setAttributeNS(null,"x","0"),_.setAttributeNS(null,"y","0"),_.setAttributeNS(null,"width","1px"),_.setAttributeNS(null,"height","1px"),_.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(_)}paintImageXObject(_){let S=this.getObject(_);if(!S){(0,c.warn)(`Dependent image with object ID ${_} is not ready yet`);return}this.paintInlineImageXObject(S)}paintInlineImageXObject(_,S){let D=_.width,R=_.height,I=i(_,this.forceDataSchema,!!S),G=this.svgFactory.createElement("svg:rect");G.setAttributeNS(null,"x","0"),G.setAttributeNS(null,"y","0"),G.setAttributeNS(null,"width",s(D)),G.setAttributeNS(null,"height",s(R)),this.current.element=G,this.clip("nonzero");let z=this.svgFactory.createElement("svg:image");z.setAttributeNS(w,"xlink:href",I),z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y",s(-R)),z.setAttributeNS(null,"width",s(D)+"px"),z.setAttributeNS(null,"height",s(R)+"px"),z.setAttributeNS(null,"transform",`scale(${s(1/D)} ${s(-1/R)})`),S?S.append(z):this._ensureTransformGroup().append(z)}paintImageMaskXObject(_){let S=this.getObject(_.data,_);if(S.bitmap){(0,c.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}let D=this.current,R=S.width,I=S.height,G=D.fillColor;D.maskId=`mask${h++}`;let z=this.svgFactory.createElement("svg:mask");z.setAttributeNS(null,"id",D.maskId);let $=this.svgFactory.createElement("svg:rect");$.setAttributeNS(null,"x","0"),$.setAttributeNS(null,"y","0"),$.setAttributeNS(null,"width",s(R)),$.setAttributeNS(null,"height",s(I)),$.setAttributeNS(null,"fill",G),$.setAttributeNS(null,"mask",`url(#${D.maskId})`),this.defs.append(z),this._ensureTransformGroup().append($),this.paintInlineImageXObject(S,z)}paintFormXObjectBegin(_,S){if(Array.isArray(_)&&_.length===6&&this.transform(_[0],_[1],_[2],_[3],_[4],_[5]),S){let D=S[2]-S[0],R=S[3]-S[1],I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x",S[0]),I.setAttributeNS(null,"y",S[1]),I.setAttributeNS(null,"width",s(D)),I.setAttributeNS(null,"height",s(R)),this.current.element=I,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(_){let S=this.svgFactory.create(_.width,_.height),D=this.svgFactory.createElement("svg:defs");S.append(D),this.defs=D;let R=this.svgFactory.createElement("svg:g");return R.setAttributeNS(null,"transform",n(_.transform)),S.append(R),this.svg=R,S}_ensureClipGroup(){if(!this.current.clipGroup){let _=this.svgFactory.createElement("svg:g");_.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(_),this.current.clipGroup=_}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",n(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=l},(M,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class A{static textContent(c){let g=[],C={items:g,styles:Object.create(null)};function w(E){if(!E)return;let b=null,a=E.name;if(a==="#text")b=E.value;else if(A.shouldBuildText(a))E?.attributes?.textContent?b=E.attributes.textContent:E.value&&(b=E.value);else return;if(b!==null&&g.push({str:b}),!!E.children)for(let i of E.children)w(i)}return w(c),C}static shouldBuildText(c){return!(c==="textarea"||c==="input"||c==="option"||c==="select")}}e.XfaText=A},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=n,e.updateTextLayer=d;var r=A(1),c=A(6);let g=1e5,C=30,w=.8,E=new Map;function b(h,y){let l;if(y&&r.FeatureTest.isOffscreenCanvasSupported)l=new OffscreenCanvas(h,h).getContext("2d",{alpha:!1});else{let u=document.createElement("canvas");u.width=u.height=h,l=u.getContext("2d",{alpha:!1})}return l}function a(h,y){let l=E.get(h);if(l)return l;let u=b(C,y);u.font=`${C}px ${h}`;let _=u.measureText(""),S=_.fontBoundingBoxAscent,D=Math.abs(_.fontBoundingBoxDescent);if(S){let I=S/(S+D);return E.set(h,I),u.canvas.width=u.canvas.height=0,I}u.strokeStyle="red",u.clearRect(0,0,C,C),u.strokeText("g",0,0);let R=u.getImageData(0,0,C,C).data;D=0;for(let I=R.length-1-3;I>=0;I-=4)if(R[I]>0){D=Math.ceil(I/4/C);break}u.clearRect(0,0,C,C),u.strokeText("A",0,C),R=u.getImageData(0,0,C,C).data,S=0;for(let I=0,G=R.length;I<G;I+=4)if(R[I]>0){S=C-Math.floor(I/4/C);break}if(u.canvas.width=u.canvas.height=0,S){let I=S/(S+D);return E.set(h,I),I}return E.set(h,w),w}function i(h,y,l){let u=document.createElement("span"),_={angle:0,canvasWidth:0,hasText:y.str!=="",hasEOL:y.hasEOL,fontSize:0};h._textDivs.push(u);let S=r.Util.transform(h._transform,y.transform),D=Math.atan2(S[1],S[0]),R=l[y.fontName];R.vertical&&(D+=Math.PI/2);let I=Math.hypot(S[2],S[3]),G=I*a(R.fontFamily,h._isOffscreenCanvasSupported),z,$;D===0?(z=S[4],$=S[5]-G):(z=S[4]+G*Math.sin(D),$=S[5]-G*Math.cos(D));let Q="calc(var(--scale-factor)*",Y=u.style;h._container===h._rootContainer?(Y.left=`${(100*z/h._pageWidth).toFixed(2)}%`,Y.top=`${(100*$/h._pageHeight).toFixed(2)}%`):(Y.left=`${Q}${z.toFixed(2)}px)`,Y.top=`${Q}${$.toFixed(2)}px)`),Y.fontSize=`${Q}${I.toFixed(2)}px)`,Y.fontFamily=R.fontFamily,_.fontSize=I,u.setAttribute("role","presentation"),u.textContent=y.str,u.dir=y.dir,h._fontInspectorEnabled&&(u.dataset.fontName=y.fontName),D!==0&&(_.angle=D*(180/Math.PI));let B=!1;if(y.str.length>1)B=!0;else if(y.str!==" "&&y.transform[0]!==y.transform[3]){let H=Math.abs(y.transform[0]),O=Math.abs(y.transform[3]);H!==O&&Math.max(H,O)/Math.min(H,O)>1.5&&(B=!0)}B&&(_.canvasWidth=R.vertical?y.height:y.width),h._textDivProperties.set(u,_),h._isReadableStream&&h._layoutText(u)}function t(h){let{div:y,scale:l,properties:u,ctx:_,prevFontSize:S,prevFontFamily:D}=h,{style:R}=y,I="";if(u.canvasWidth!==0&&u.hasText){let{fontFamily:G}=R,{canvasWidth:z,fontSize:$}=u;(S!==$||D!==G)&&(_.font=`${$*l}px ${G}`,h.prevFontSize=$,h.prevFontFamily=G);let{width:Q}=_.measureText(y.textContent);Q>0&&(I=`scaleX(${z*l/Q})`)}u.angle!==0&&(I=`rotate(${u.angle}deg) ${I}`),I.length>0&&(R.transform=I)}function o(h){if(h._canceled)return;let y=h._textDivs,l=h._capability;if(y.length>g){l.resolve();return}if(!h._isReadableStream)for(let _ of y)h._layoutText(_);l.resolve()}class s{constructor({textContentSource:y,container:l,viewport:u,textDivs:_,textDivProperties:S,textContentItemsStr:D,isOffscreenCanvasSupported:R}){this._textContentSource=y,this._isReadableStream=y instanceof ReadableStream,this._container=this._rootContainer=l,this._textDivs=_||[],this._textContentItemsStr=D||[],this._isOffscreenCanvasSupported=R,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=S||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:u.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b(0,R)};let{pageWidth:I,pageHeight:G,pageX:z,pageY:$}=u.rawDims;this._transform=[1,0,0,-1,-z,$+G],this._pageWidth=I,this._pageHeight=G,(0,c.setLayerDimensions)(l,u),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(y,l){for(let u of y){if(u.str===void 0){if(u.type==="beginMarkedContentProps"||u.type==="beginMarkedContent"){let _=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),u.id!==null&&this._container.setAttribute("id",`${u.id}`),_.append(this._container)}else u.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(u.str),i(this,u,l)}}_layoutText(y){let l=this._layoutTextParams.properties=this._textDivProperties.get(y);if(this._layoutTextParams.div=y,t(this._layoutTextParams),l.hasText&&this._container.append(y),l.hasEOL){let u=document.createElement("br");u.setAttribute("role","presentation"),this._container.append(u)}}_render(){let y=new r.PromiseCapability,l=Object.create(null);if(this._isReadableStream){let u=()=>{this._reader.read().then(({value:_,done:S})=>{if(S){y.resolve();return}Object.assign(l,_.styles),this._processItems(_.items,l),u()},y.reject)};this._reader=this._textContentSource.getReader(),u()}else if(this._textContentSource){let{items:u,styles:_}=this._textContentSource;this._processItems(u,_),y.resolve()}else throw new Error('No "textContentSource" parameter specified.');y.promise.then(()=>{l=null,o(this)},this._capability.reject)}}e.TextLayerRenderTask=s;function n(h){!h.textContentSource&&(h.textContent||h.textContentStream)&&((0,c.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),h.textContentSource=h.textContent||h.textContentStream);let{container:y,viewport:l}=h,u=getComputedStyle(y),_=u.getPropertyValue("visibility"),S=parseFloat(u.getPropertyValue("--scale-factor"));_==="visible"&&(!S||Math.abs(S-l.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");let D=new s(h);return D._render(),D}function d({container:h,viewport:y,textDivs:l,textDivProperties:u,isOffscreenCanvasSupported:_,mustRotate:S=!0,mustRescale:D=!0}){if(S&&(0,c.setLayerDimensions)(h,{rotation:y.rotation}),D){let R=b(0,_),G={prevFontSize:null,prevFontFamily:null,div:null,scale:y.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:R};for(let z of l)G.properties=u.get(z),G.div=z,t(G)}}},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r=A(1),c=A(4),g=A(28),C=A(33),w=A(6),E=A(34);let b=(()=>{class a{#e;#t=!1;#i=null;#n=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#r=new Map;#a=!1;#l=!1;#c=!1;#s;static _initialized=!1;constructor({uiManager:t,pageIndex:o,div:s,accessibilityManager:n,annotationLayer:d,viewport:h,l10n:y}){let l=[g.FreeTextEditor,C.InkEditor,E.StampEditor];if(!a._initialized){a._initialized=!0;for(let u of l)u.initialize(y)}t.registerEditorTypes(l),this.#s=t,this.pageIndex=o,this.div=s,this.#e=n,this.#i=d,this.viewport=h,this.#s.addLayer(this)}get isEmpty(){return this.#r.size===0}updateToolbar(t){this.#s.updateToolbar(t)}updateMode(t=this.#s.getMode()){this.#p(),t===r.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),t!==r.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",t===r.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",t===r.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",t===r.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(t){if(!t&&this.#s.getMode()!==r.AnnotationEditorType.INK)return;if(!t){for(let s of this.#r.values())if(s.isEmpty()){s.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){this.#s.setEditingState(t)}addCommands(t){this.#s.addCommands(t)}enable(){this.div.style.pointerEvents="auto";let t=new Set;for(let s of this.#r.values())s.enableEditing(),s.annotationElementId&&t.add(s.annotationElementId);if(!this.#i)return;let o=this.#i.getEditableAnnotations();for(let s of o){if(s.hide(),this.#s.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;let n=this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";let t=new Set;for(let o of this.#r.values()){if(o.disableEditing(),!o.annotationElementId||o.serialize()!==null){t.add(o.annotationElementId);continue}this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}if(this.#i){let o=this.#i.getEditableAnnotations();for(let s of o){let{id:n}=s.data;t.has(n)||this.#s.isDeletedAnnotationElement(n)||s.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#s.getActive()!==t&&this.#s.setActiveEditor(t)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#n)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#n)}attach(t){this.#r.set(t.id,t);let{annotationElementId:o}=t;o&&this.#s.isDeletedAnnotationElement(o)&&this.#s.removeDeletedAnnotationElement(t)}detach(t){this.#r.delete(t.id),this.#e?.removePointerInTextLayer(t.contentDiv),!this.#c&&t.annotationElementId&&this.#s.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#s.removeEditor(t),t.div.contains(document.activeElement)&&setTimeout(()=>{this.#s.focusMainContainer()},0),t.div.remove(),t.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.annotationElementId&&(this.#s.addDeletedAnnotationElement(t.annotationElementId),c.AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(this.changeParent(t),this.#s.addEditor(t),this.attach(t),!t.isAttachedToDOM){let o=t.render();this.div.append(o),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#s.addToAnnotationStorage(t)}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;let{activeElement:o}=document;t.div.contains(o)&&(t._focusEventsAllowed=!1,setTimeout(()=>{t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0}),o.focus())},0)),t._structTreeParentId=this.#e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}addUndoableEditor(t){let o=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:o,undo:s,mustExec:!1})}getNextId(){return this.#s.getId()}#h(t){switch(this.#s.getMode()){case r.AnnotationEditorType.FREETEXT:return new g.FreeTextEditor(t);case r.AnnotationEditorType.INK:return new C.InkEditor(t);case r.AnnotationEditorType.STAMP:return new E.StampEditor(t)}return null}pasteEditor(t,o){this.#s.updateToolbar(t),this.#s.updateMode(t);let{offsetX:s,offsetY:n}=this.#f(),d=this.getNextId(),h=this.#h(Re({parent:this,id:d,x:s,y:n,uiManager:this.#s,isCentered:!0},o));h&&this.add(h)}deserialize(t){switch(t.annotationType??t.annotationEditorType){case r.AnnotationEditorType.FREETEXT:return g.FreeTextEditor.deserialize(t,this,this.#s);case r.AnnotationEditorType.INK:return C.InkEditor.deserialize(t,this,this.#s);case r.AnnotationEditorType.STAMP:return E.StampEditor.deserialize(t,this,this.#s)}return null}#d(t,o){let s=this.getNextId(),n=this.#h({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#s,isCentered:o});return n&&this.add(n),n}#f(){let{x:t,y:o,width:s,height:n}=this.div.getBoundingClientRect(),d=Math.max(0,t),h=Math.max(0,o),y=Math.min(window.innerWidth,t+s),l=Math.min(window.innerHeight,o+n),u=(d+y)/2-t,_=(h+l)/2-o,[S,D]=this.viewport.rotation%180===0?[u,_]:[_,u];return{offsetX:S,offsetY:D}}addNewEditor(){this.#d(this.#f(),!0)}setSelected(t){this.#s.setSelected(t)}toggleSelected(t){this.#s.toggleSelected(t)}isSelected(t){return this.#s.isSelected(t)}unselect(t){this.#s.unselect(t)}pointerup(t){let{isMac:o}=r.FeatureTest.platform;if(!(t.button!==0||t.ctrlKey&&o)&&t.target===this.div&&this.#a){if(this.#a=!1,!this.#t){this.#t=!0;return}if(this.#s.getMode()===r.AnnotationEditorType.STAMP){this.#s.unselectAll();return}this.#d(t,!1)}}pointerdown(t){if(this.#a){this.#a=!1;return}let{isMac:o}=r.FeatureTest.platform;if(t.button!==0||t.ctrlKey&&o||t.target!==this.div)return;this.#a=!0;let s=this.#s.getActive();this.#t=!s||s.isEmpty()}findNewParent(t,o,s){let n=this.#s.findParent(o,s);return n===null||n===this?!1:(n.changeParent(t),!0)}destroy(){this.#s.getActive()?.parent===this&&(this.#s.commitOrRemove(),this.#s.setActiveEditor(null));for(let t of this.#r.values())this.#e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#p(){this.#l=!0;for(let t of this.#r.values())t.isEmpty()&&t.remove();this.#l=!1}render({viewport:t}){this.viewport=t,(0,w.setLayerDimensions)(this.div,t);for(let o of this.#s.getEditors(this.pageIndex))this.add(o);this.updateMode()}update({viewport:t}){this.#s.commitOrRemove(),this.viewport=t,(0,w.setLayerDimensions)(this.div,{rotation:t.rotation}),this.updateMode()}get pageDimensions(){let{pageWidth:t,pageHeight:o}=this.viewport.rawDims;return[t,o]}}return a})();e.AnnotationEditorLayer=b},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r=A(1),c=A(5),g=A(4),C=A(29);let w=(()=>{class E extends g.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#i=this.editorDivInput.bind(this);#n=this.editorDivKeydown.bind(this);#o;#r="";#a=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let a=E.prototype,i=s=>s.isEmpty(),t=c.AnnotationEditorUIManager.TRANSLATE_SMALL,o=c.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,r.shadow)(this,"_keyboardManager",new c.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],a.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],a.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],a._translateEmpty,{args:[-t,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],a._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],a._translateEmpty,{args:[t,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],a._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],a._translateEmpty,{args:[0,-t],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],a._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],a._translateEmpty,{args:[0,t],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],a._translateEmpty,{args:[0,o],checker:i}]]))}static _type="freetext";constructor(a){super(Ue(Re({},a),{name:"freeTextEditor"})),this.#o=a.color||E._defaultColor||g.AnnotationEditor._defaultLineColor,this.#l=a.fontSize||E._defaultFontSize}static initialize(a){g.AnnotationEditor.initialize(a,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});let i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(a,i){switch(a){case r.AnnotationEditorParamsType.FREETEXT_SIZE:E._defaultFontSize=i;break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:E._defaultColor=i;break}}updateParams(a,i){switch(a){case r.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(i);break;case r.AnnotationEditorParamsType.FREETEXT_COLOR:this.#h(i);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,E._defaultFontSize],[r.AnnotationEditorParamsType.FREETEXT_COLOR,E._defaultColor||g.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[r.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#s(a){let i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--scale-factor))`,this.translate(0,-(o-this.#l)*this.parentScale),this.#l=o,this.#f()},t=this.#l;this.addCommands({cmd:()=>{i(a)},undo:()=>{i(t)},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#h(a){let i=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=a},undo:()=>{this.#o=this.editorDiv.style.color=i},mustExec:!0,type:r.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(a,i){this._uiManager.translateSelectedEditors(a,i,!0)}getInitialTranslation(){let a=this.parentScale;return[-E._internalPadding*a,-(E._internalPadding+this.#l)*a]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(r.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#n),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#i))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#a),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#n),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#i),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(a){this._focusEventsAllowed&&(super.focusin(a),a.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#_();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){let a=this.editorDiv.getElementsByTagName("div");if(a.length===0)return this.editorDiv.innerText;let i=[];for(let t of a)i.push(t.innerText.replace(/\r\n?|\n/,""));return i.join(`
`)}#f(){let[a,i]=this.parentDimensions,t;if(this.isAttachedToDOM)t=this.div.getBoundingClientRect();else{let{currentLayer:o,div:s}=this,n=s.style.display;s.style.display="hidden",o.div.append(this.div),t=s.getBoundingClientRect(),s.remove(),s.style.display=n}this.rotation%180===this.parentRotation%180?(this.width=t.width/a,this.height=t.height/i):(this.width=t.height/a,this.height=t.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let a=this.#r,i=this.#r=this.#d().trimEnd();if(a===i)return;let t=o=>{if(this.#r=o,!o){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#f()};this.addCommands({cmd:()=>{t(i)},undo:()=>{t(a)},mustExec:!1}),this.#f()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(a){this.enterInEditMode()}keydown(a){a.target===this.div&&a.key==="Enter"&&(this.enterInEditMode(),a.preventDefault())}editorDivKeydown(a){E._keyboardManager.exec(this,a)}editorDivFocus(a){this.isEditing=!0}editorDivBlur(a){this.isEditing=!1}editorDivInput(a){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let a,i;this.width&&(a=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#a),this.enableEditing(),g.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(o=>this.editorDiv?.setAttribute("aria-label",o)),g.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(o=>this.editorDiv?.setAttribute("default-content",o)),this.editorDiv.contentEditable=!0;let{style:t}=this.editorDiv;if(t.fontSize=`calc(${this.#l}px * var(--scale-factor))`,t.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,c.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[o,s]=this.parentDimensions;if(this.annotationElementId){let{position:n}=this.#c,[d,h]=this.getInitialTranslation();[d,h]=this.pageTranslationToScreen(d,h);let[y,l]=this.pageDimensions,[u,_]=this.pageTranslation,S,D;switch(this.rotation){case 0:S=a+(n[0]-u)/y,D=i+this.height-(n[1]-_)/l;break;case 90:S=a+(n[0]-u)/y,D=i-(n[1]-_)/l,[d,h]=[h,-d];break;case 180:S=a-this.width+(n[0]-u)/y,D=i-(n[1]-_)/l,[d,h]=[-d,-h];break;case 270:S=a+(n[0]-u-this.height*l)/y,D=i+(n[1]-_-this.width*y)/l,[d,h]=[-h,d];break}this.setAt(S*o,D*s,d,h)}else this.setAt(a*o,i*s,this.width*o,this.height*s);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#r)for(let a of this.#r.split(`
`)){let i=document.createElement("div");i.append(a?document.createTextNode(a):document.createElement("br")),this.editorDiv.append(i)}}get contentDiv(){return this.editorDiv}static deserialize(a,i,t){let o=null;if(a instanceof C.FreeTextAnnotationElement){let{data:{defaultAppearanceData:{fontSize:n,fontColor:d},rect:h,rotation:y,id:l},textContent:u,textPosition:_,parent:{page:{pageNumber:S}}}=a;if(!u||u.length===0)return null;o=a={annotationType:r.AnnotationEditorType.FREETEXT,color:Array.from(d),fontSize:n,value:u.join(`
`),position:_,pageIndex:S-1,rect:h,rotation:y,id:l,deleted:!1}}let s=super.deserialize(a,i,t);return s.#l=a.fontSize,s.#o=r.Util.makeHexColor(...a.color),s.#r=a.value,s.annotationElementId=a.id||null,s.#c=o,s}serialize(a=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};let i=E._internalPadding*this.parentScale,t=this.getRect(i,i),o=g.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),s={annotationType:r.AnnotationEditorType.FREETEXT,color:o,fontSize:this.#l,value:this.#r,pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return a?s:this.annotationElementId&&!this.#g(s)?null:(s.id=this.annotationElementId,s)}#g(a){let{value:i,fontSize:t,color:o,rect:s,pageIndex:n}=this.#c;return a.value!==i||a.fontSize!==t||a.rect.some((d,h)=>Math.abs(d-s[h])>=1)||a.color.some((d,h)=>d!==o[h])||a.pageIndex!==n}#_(a=!1){if(!this.annotationElementId)return;if(this.#f(),!a&&(this.width===0||this.height===0)){setTimeout(()=>this.#_(!0),0);return}let i=E._internalPadding*this.parentScale;this.#c.rect=this.getRect(i,i)}}return E})();e.FreeTextEditor=w},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var r=A(1),c=A(6),g=A(3),C=A(30),w=A(31),E=A(32);let b=1e3,a=9,i=new WeakSet;function t(L){return{width:L[2]-L[0],height:L[3]-L[1]}}class o{static create(p){switch(p.data.annotationType){case r.AnnotationType.LINK:return new n(p);case r.AnnotationType.TEXT:return new d(p);case r.AnnotationType.WIDGET:switch(p.data.fieldType){case"Tx":return new y(p);case"Btn":return p.data.radioButton?new _(p):p.data.checkBox?new u(p):new S(p);case"Ch":return new D(p);case"Sig":return new l(p)}return new h(p);case r.AnnotationType.POPUP:return new R(p);case r.AnnotationType.FREETEXT:return new G(p);case r.AnnotationType.LINE:return new z(p);case r.AnnotationType.SQUARE:return new $(p);case r.AnnotationType.CIRCLE:return new Q(p);case r.AnnotationType.POLYLINE:return new Y(p);case r.AnnotationType.CARET:return new H(p);case r.AnnotationType.INK:return new O(p);case r.AnnotationType.POLYGON:return new B(p);case r.AnnotationType.HIGHLIGHT:return new f(p);case r.AnnotationType.UNDERLINE:return new m(p);case r.AnnotationType.SQUIGGLY:return new v(p);case r.AnnotationType.STRIKEOUT:return new T(p);case r.AnnotationType.STAMP:return new F(p);case r.AnnotationType.FILEATTACHMENT:return new k(p);default:return new s(p)}}}class s{#e=!1;constructor(p,{isRenderable:P=!1,ignoreBorder:x=!1,createQuadrilaterals:N=!1}={}){this.isRenderable=P,this.data=p.data,this.layer=p.layer,this.linkService=p.linkService,this.downloadManager=p.downloadManager,this.imageResourcesPath=p.imageResourcesPath,this.renderForms=p.renderForms,this.svgFactory=p.svgFactory,this.annotationStorage=p.annotationStorage,this.enableScripting=p.enableScripting,this.hasJSActions=p.hasJSActions,this._fieldObjects=p.fieldObjects,this.parent=p.parent,P&&(this.container=this._createContainer(x)),N&&this._createQuadrilaterals()}static _hasPopupData({titleObj:p,contentsObj:P,richText:x}){return!!(p?.str||P?.str||x?.str)}get hasPopupData(){return s._hasPopupData(this.data)}_createContainer(p){let{data:P,parent:{page:x,viewport:N}}=this,U=document.createElement("section");U.setAttribute("data-annotation-id",P.id),this instanceof h||(U.tabIndex=b),U.style.zIndex=this.parent.zIndex++,this.data.popupRef&&U.setAttribute("aria-haspopup","dialog"),P.noRotate&&U.classList.add("norotate");let{pageWidth:j,pageHeight:q,pageX:ie,pageY:J}=N.rawDims;if(!P.rect||this instanceof R){let{rotation:ne}=P;return!P.hasOwnCanvas&&ne!==0&&this.setRotation(ne,U),U}let{width:W,height:K}=t(P.rect),X=r.Util.normalizeRect([P.rect[0],x.view[3]-P.rect[1]+x.view[1],P.rect[2],x.view[3]-P.rect[3]+x.view[1]]);if(!p&&P.borderStyle.width>0){U.style.borderWidth=`${P.borderStyle.width}px`;let ne=P.borderStyle.horizontalCornerRadius,re=P.borderStyle.verticalCornerRadius;if(ne>0||re>0){let ce=`calc(${ne}px * var(--scale-factor)) / calc(${re}px * var(--scale-factor))`;U.style.borderRadius=ce}else if(this instanceof _){let ce=`calc(${W}px * var(--scale-factor)) / calc(${K}px * var(--scale-factor))`;U.style.borderRadius=ce}switch(P.borderStyle.style){case r.AnnotationBorderStyleType.SOLID:U.style.borderStyle="solid";break;case r.AnnotationBorderStyleType.DASHED:U.style.borderStyle="dashed";break;case r.AnnotationBorderStyleType.BEVELED:(0,r.warn)("Unimplemented border style: beveled");break;case r.AnnotationBorderStyleType.INSET:(0,r.warn)("Unimplemented border style: inset");break;case r.AnnotationBorderStyleType.UNDERLINE:U.style.borderBottomStyle="solid";break;default:break}let oe=P.borderColor||null;oe?(this.#e=!0,U.style.borderColor=r.Util.makeHexColor(oe[0]|0,oe[1]|0,oe[2]|0)):U.style.borderWidth=0}U.style.left=`${100*(X[0]-ie)/j}%`,U.style.top=`${100*(X[1]-J)/q}%`;let{rotation:Z}=P;return P.hasOwnCanvas||Z===0?(U.style.width=`${100*W/j}%`,U.style.height=`${100*K/q}%`):this.setRotation(Z,U),U}setRotation(p,P=this.container){if(!this.data.rect)return;let{pageWidth:x,pageHeight:N}=this.parent.viewport.rawDims,{width:U,height:j}=t(this.data.rect),q,ie;p%180===0?(q=100*U/x,ie=100*j/N):(q=100*j/x,ie=100*U/N),P.style.width=`${q}%`,P.style.height=`${ie}%`,P.setAttribute("data-main-rotation",(360-p)%360)}get _commonActions(){let p=(P,x,N)=>{let U=N.detail[P],j=U[0],q=U.slice(1);N.target.style[x]=C.ColorConverters[`${j}_HTML`](q),this.annotationStorage.setValue(this.data.id,{[x]:C.ColorConverters[`${j}_rgb`](q)})};return(0,r.shadow)(this,"_commonActions",{display:P=>{let{display:x}=P.detail,N=x%2===1;this.container.style.visibility=N?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:N,noPrint:x===1||x===2})},print:P=>{this.annotationStorage.setValue(this.data.id,{noPrint:!P.detail.print})},hidden:P=>{let{hidden:x}=P.detail;this.container.style.visibility=x?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:x,noView:x})},focus:P=>{setTimeout(()=>P.target.focus({preventScroll:!1}),0)},userName:P=>{P.target.title=P.detail.userName},readonly:P=>{P.target.disabled=P.detail.readonly},required:P=>{this._setRequired(P.target,P.detail.required)},bgColor:P=>{p("bgColor","backgroundColor",P)},fillColor:P=>{p("fillColor","backgroundColor",P)},fgColor:P=>{p("fgColor","color",P)},textColor:P=>{p("textColor","color",P)},borderColor:P=>{p("borderColor","borderColor",P)},strokeColor:P=>{p("strokeColor","borderColor",P)},rotation:P=>{let x=P.detail.rotation;this.setRotation(x),this.annotationStorage.setValue(this.data.id,{rotation:x})}})}_dispatchEventFromSandbox(p,P){let x=this._commonActions;for(let N of Object.keys(P.detail))(p[N]||x[N])?.(P)}_setDefaultPropertiesFromJS(p){if(!this.enableScripting)return;let P=this.annotationStorage.getRawValue(this.data.id);if(!P)return;let x=this._commonActions;for(let[N,U]of Object.entries(P)){let j=x[N];if(j){let q={detail:{[N]:U},target:p};j(q),delete P[N]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:p}=this.data;if(!p)return;let[P,x,N,U]=this.data.rect;if(p.length===1){let[,{x:re,y:oe},{x:ce,y:he}]=p[0];if(N===re&&U===oe&&P===ce&&x===he)return}let{style:j}=this.container,q;if(this.#e){let{borderColor:re,borderWidth:oe}=j;j.borderWidth=0,q=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${re}" stroke-width="${oe}">`],this.container.classList.add("hasBorder")}let ie=N-P,J=U-x,{svgFactory:W}=this,K=W.createElement("svg");K.classList.add("quadrilateralsContainer"),K.setAttribute("width",0),K.setAttribute("height",0);let X=W.createElement("defs");K.append(X);let Z=W.createElement("clipPath"),ne=`clippath_${this.data.id}`;Z.setAttribute("id",ne),Z.setAttribute("clipPathUnits","objectBoundingBox"),X.append(Z);for(let[,{x:re,y:oe},{x:ce,y:he}]of p){let de=W.createElement("rect"),fe=(ce-P)/ie,Me=(U-oe)/J,Se=(re-ce)/ie,Ie=(oe-he)/J;de.setAttribute("x",fe),de.setAttribute("y",Me),de.setAttribute("width",Se),de.setAttribute("height",Ie),Z.append(de),q?.push(`<rect vector-effect="non-scaling-stroke" x="${fe}" y="${Me}" width="${Se}" height="${Ie}"/>`)}this.#e&&(q.push("</g></svg>')"),j.backgroundImage=q.join("")),this.container.append(K),this.container.style.clipPath=`url(#${ne})`}_createPopup(){let{container:p,data:P}=this;p.setAttribute("aria-haspopup","dialog");let x=new R({data:{color:P.color,titleObj:P.titleObj,modificationDate:P.modificationDate,contentsObj:P.contentsObj,richText:P.richText,parentRect:P.rect,borderStyle:0,id:`popup_${P.id}`,rotation:P.rotation},parent:this.parent,elements:[this]});this.parent.div.append(x.render())}render(){(0,r.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(p,P=null){let x=[];if(this._fieldObjects){let N=this._fieldObjects[p];if(N)for(let{page:U,id:j,exportValues:q}of N){if(U===-1||j===P)continue;let ie=typeof q=="string"?q:null,J=document.querySelector(`[data-element-id="${j}"]`);if(J&&!i.has(J)){(0,r.warn)(`_getElementsByName - element not allowed: ${j}`);continue}x.push({id:j,exportValue:ie,domElement:J})}return x}for(let N of document.getElementsByName(p)){let{exportValue:U}=N,j=N.getAttribute("data-element-id");j!==P&&i.has(N)&&x.push({id:j,exportValue:U,domElement:N})}return x}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let p=this.getElementsToTriggerPopup();if(Array.isArray(p))for(let P of p)P.classList.add("highlightArea");else p.classList.add("highlightArea")}_editOnDoubleClick(){let{annotationEditorType:p,data:{id:P}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:p,editId:P})})}}class n extends s{constructor(p,P=null){super(p,{isRenderable:!0,ignoreBorder:!!P?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=p.data.isTooltipOnly}render(){let{data:p,linkService:P}=this,x=document.createElement("a");x.setAttribute("data-element-id",p.id);let N=!1;return p.url?(P.addLinkAttributes(x,p.url,p.newWindow),N=!0):p.action?(this._bindNamedAction(x,p.action),N=!0):p.attachment?(this._bindAttachment(x,p.attachment),N=!0):p.setOCGState?(this.#t(x,p.setOCGState),N=!0):p.dest?(this._bindLink(x,p.dest),N=!0):(p.actions&&(p.actions.Action||p.actions["Mouse Up"]||p.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(x,p),N=!0),p.resetForm?(this._bindResetFormAction(x,p.resetForm),N=!0):this.isTooltipOnly&&!N&&(this._bindLink(x,""),N=!0)),this.container.classList.add("linkAnnotation"),N&&this.container.append(x),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(p,P){p.href=this.linkService.getDestinationHash(P),p.onclick=()=>(P&&this.linkService.goToDestination(P),!1),(P||P==="")&&this.#e()}_bindNamedAction(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>(this.linkService.executeNamedAction(P),!1),this.#e()}_bindAttachment(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,P.content,P.filename),!1),this.#e()}#t(p,P){p.href=this.linkService.getAnchorUrl(""),p.onclick=()=>(this.linkService.executeSetOCGState(P),!1),this.#e()}_bindJSAction(p,P){p.href=this.linkService.getAnchorUrl("");let x=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let N of Object.keys(P.actions)){let U=x.get(N);U&&(p[U]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P.id,name:N}}),!1))}p.onclick||(p.onclick=()=>!1),this.#e()}_bindResetFormAction(p,P){let x=p.onclick;if(x||(p.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,r.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),x||(p.onclick=()=>!1);return}p.onclick=()=>{x?.();let{fields:N,refs:U,include:j}=P,q=[];if(N.length!==0||U.length!==0){let W=new Set(U);for(let K of N){let X=this._fieldObjects[K]||[];for(let{id:Z}of X)W.add(Z)}for(let K of Object.values(this._fieldObjects))for(let X of K)W.has(X.id)===j&&q.push(X)}else for(let W of Object.values(this._fieldObjects))q.push(...W);let ie=this.annotationStorage,J=[];for(let W of q){let{id:K}=W;switch(J.push(K),W.type){case"text":{let Z=W.defaultValue||"";ie.setValue(K,{value:Z});break}case"checkbox":case"radiobutton":{let Z=W.defaultValue===W.exportValues;ie.setValue(K,{value:Z});break}case"combobox":case"listbox":{let Z=W.defaultValue||"";ie.setValue(K,{value:Z});break}default:continue}let X=document.querySelector(`[data-element-id="${K}"]`);if(X){if(!i.has(X)){(0,r.warn)(`_bindResetFormAction - element not allowed: ${K}`);continue}}else continue;X.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:J,name:"ResetForm"}}),!1}}}class d extends s{constructor(p){super(p,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let p=document.createElement("img");return p.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",p.alt="[{{type}} Annotation]",p.dataset.l10nId="text_annotation_type",p.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(p),this.container}}class h extends s{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(p){this.data.hasOwnCanvas&&(p.previousSibling?.nodeName==="CANVAS"&&(p.previousSibling.hidden=!0),p.hidden=!1)}_getKeyModifier(p){let{isWin:P,isMac:x}=r.FeatureTest.platform;return P&&p.ctrlKey||x&&p.metaKey}_setEventListener(p,P,x,N,U){x.includes("mouse")?p.addEventListener(x,j=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:N,value:U(j),shift:j.shiftKey,modifier:this._getKeyModifier(j)}})}):p.addEventListener(x,j=>{if(x==="blur"){if(!P.focused||!j.relatedTarget)return;P.focused=!1}else if(x==="focus"){if(P.focused)return;P.focused=!0}U&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:N,value:U(j)}})})}_setEventListeners(p,P,x,N){for(let[U,j]of x)(j==="Action"||this.data.actions?.[j])&&((j==="Focus"||j==="Blur")&&(P||={focused:!1}),this._setEventListener(p,P,U,j,N),j==="Focus"&&!this.data.actions?.Blur?this._setEventListener(p,P,"blur","Blur",null):j==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(p,P,"focus","Focus",null))}_setBackgroundColor(p){let P=this.data.backgroundColor||null;p.style.backgroundColor=P===null?"transparent":r.Util.makeHexColor(P[0],P[1],P[2])}_setTextStyle(p){let P=["left","center","right"],{fontColor:x}=this.data.defaultAppearanceData,N=this.data.defaultAppearanceData.fontSize||a,U=p.style,j,q=2,ie=J=>Math.round(10*J)/10;if(this.data.multiLine){let J=Math.abs(this.data.rect[3]-this.data.rect[1]-q),W=Math.round(J/(r.LINE_FACTOR*N))||1,K=J/W;j=Math.min(N,ie(K/r.LINE_FACTOR))}else{let J=Math.abs(this.data.rect[3]-this.data.rect[1]-q);j=Math.min(N,ie(J/r.LINE_FACTOR))}U.fontSize=`calc(${j}px * var(--scale-factor))`,U.color=r.Util.makeHexColor(x[0],x[1],x[2]),this.data.textAlignment!==null&&(U.textAlign=P[this.data.textAlignment])}_setRequired(p,P){P?p.setAttribute("required",!0):p.removeAttribute("required"),p.setAttribute("aria-required",P)}}class y extends h{constructor(p){let P=p.renderForms||!p.data.hasAppearance&&!!p.data.fieldValue;super(p,{isRenderable:P})}setPropertyOnSiblings(p,P,x,N){let U=this.annotationStorage;for(let j of this._getElementsByName(p.name,p.id))j.domElement&&(j.domElement[P]=x),U.setValue(j.id,{[N]:x})}render(){let p=this.annotationStorage,P=this.data.id;this.container.classList.add("textWidgetAnnotation");let x=null;if(this.renderForms){let N=p.getValue(P,{value:this.data.fieldValue}),U=N.value||"",j=p.getValue(P,{charLimit:this.data.maxLen}).charLimit;j&&U.length>j&&(U=U.slice(0,j));let q=N.formattedValue||this.data.textContent?.join(`
`)||null;q&&this.data.comb&&(q=q.replaceAll(/\s+/g,""));let ie={userValue:U,formattedValue:q,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(x=document.createElement("textarea"),x.textContent=q??U,this.data.doNotScroll&&(x.style.overflowY="hidden")):(x=document.createElement("input"),x.type="text",x.setAttribute("value",q??U),this.data.doNotScroll&&(x.style.overflowX="hidden")),this.data.hasOwnCanvas&&(x.hidden=!0),i.add(x),x.setAttribute("data-element-id",P),x.disabled=this.data.readOnly,x.name=this.data.fieldName,x.tabIndex=b,this._setRequired(x,this.data.required),j&&(x.maxLength=j),x.addEventListener("input",W=>{p.setValue(P,{value:W.target.value}),this.setPropertyOnSiblings(x,"value",W.target.value,"value"),ie.formattedValue=null}),x.addEventListener("resetform",W=>{let K=this.data.defaultFieldValue??"";x.value=ie.userValue=K,ie.formattedValue=null});let J=W=>{let{formattedValue:K}=ie;K!=null&&(W.target.value=K),W.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){x.addEventListener("focus",K=>{if(ie.focused)return;let{target:X}=K;ie.userValue&&(X.value=ie.userValue),ie.lastCommittedValue=X.value,ie.commitKey=1,ie.focused=!0}),x.addEventListener("updatefromsandbox",K=>{this.showElementAndHideCanvas(K.target);let X={value(Z){ie.userValue=Z.detail.value??"",p.setValue(P,{value:ie.userValue.toString()}),Z.target.value=ie.userValue},formattedValue(Z){let{formattedValue:ne}=Z.detail;ie.formattedValue=ne,ne!=null&&Z.target!==document.activeElement&&(Z.target.value=ne),p.setValue(P,{formattedValue:ne})},selRange(Z){Z.target.setSelectionRange(...Z.detail.selRange)},charLimit:Z=>{let{charLimit:ne}=Z.detail,{target:re}=Z;if(ne===0){re.removeAttribute("maxLength");return}re.setAttribute("maxLength",ne);let oe=ie.userValue;!oe||oe.length<=ne||(oe=oe.slice(0,ne),re.value=ie.userValue=oe,p.setValue(P,{value:oe}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:oe,willCommit:!0,commitKey:1,selStart:re.selectionStart,selEnd:re.selectionEnd}}))}};this._dispatchEventFromSandbox(X,K)}),x.addEventListener("keydown",K=>{ie.commitKey=1;let X=-1;if(K.key==="Escape"?X=0:K.key==="Enter"&&!this.data.multiLine?X=2:K.key==="Tab"&&(ie.commitKey=3),X===-1)return;let{value:Z}=K.target;ie.lastCommittedValue!==Z&&(ie.lastCommittedValue=Z,ie.userValue=Z,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:Z,willCommit:!0,commitKey:X,selStart:K.target.selectionStart,selEnd:K.target.selectionEnd}}))});let W=J;J=null,x.addEventListener("blur",K=>{if(!ie.focused||!K.relatedTarget)return;ie.focused=!1;let{value:X}=K.target;ie.userValue=X,ie.lastCommittedValue!==X&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:X,willCommit:!0,commitKey:ie.commitKey,selStart:K.target.selectionStart,selEnd:K.target.selectionEnd}}),W(K)}),this.data.actions?.Keystroke&&x.addEventListener("beforeinput",K=>{ie.lastCommittedValue=null;let{data:X,target:Z}=K,{value:ne,selectionStart:re,selectionEnd:oe}=Z,ce=re,he=oe;switch(K.inputType){case"deleteWordBackward":{let de=ne.substring(0,re).match(/\w*[^\w]*$/);de&&(ce-=de[0].length);break}case"deleteWordForward":{let de=ne.substring(re).match(/^[^\w]*\w*/);de&&(he+=de[0].length);break}case"deleteContentBackward":re===oe&&(ce-=1);break;case"deleteContentForward":re===oe&&(he+=1);break}K.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:ne,change:X||"",willCommit:!1,selStart:ce,selEnd:he}})}),this._setEventListeners(x,ie,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],K=>K.target.value)}if(J&&x.addEventListener("blur",J),this.data.comb){let K=(this.data.rect[2]-this.data.rect[0])/j;x.classList.add("comb"),x.style.letterSpacing=`calc(${K}px * var(--scale-factor) - 1ch)`}}else x=document.createElement("div"),x.textContent=this.data.fieldValue,x.style.verticalAlign="middle",x.style.display="table-cell";return this._setTextStyle(x),this._setBackgroundColor(x),this._setDefaultPropertiesFromJS(x),this.container.append(x),this.container}}class l extends h{constructor(p){super(p,{isRenderable:!!p.data.hasOwnCanvas})}}class u extends h{constructor(p){super(p,{isRenderable:p.renderForms})}render(){let p=this.annotationStorage,P=this.data,x=P.id,N=p.getValue(x,{value:P.exportValue===P.fieldValue}).value;typeof N=="string"&&(N=N!=="Off",p.setValue(x,{value:N})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let U=document.createElement("input");return i.add(U),U.setAttribute("data-element-id",x),U.disabled=P.readOnly,this._setRequired(U,this.data.required),U.type="checkbox",U.name=P.fieldName,N&&U.setAttribute("checked",!0),U.setAttribute("exportValue",P.exportValue),U.tabIndex=b,U.addEventListener("change",j=>{let{name:q,checked:ie}=j.target;for(let J of this._getElementsByName(q,x)){let W=ie&&J.exportValue===P.exportValue;J.domElement&&(J.domElement.checked=W),p.setValue(J.id,{value:W})}p.setValue(x,{value:ie})}),U.addEventListener("resetform",j=>{let q=P.defaultFieldValue||"Off";j.target.checked=q===P.exportValue}),this.enableScripting&&this.hasJSActions&&(U.addEventListener("updatefromsandbox",j=>{let q={value(ie){ie.target.checked=ie.detail.value!=="Off",p.setValue(x,{value:ie.target.checked})}};this._dispatchEventFromSandbox(q,j)}),this._setEventListeners(U,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.checked)),this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class _ extends h{constructor(p){super(p,{isRenderable:p.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let p=this.annotationStorage,P=this.data,x=P.id,N=p.getValue(x,{value:P.fieldValue===P.buttonValue}).value;typeof N=="string"&&(N=N!==P.buttonValue,p.setValue(x,{value:N}));let U=document.createElement("input");if(i.add(U),U.setAttribute("data-element-id",x),U.disabled=P.readOnly,this._setRequired(U,this.data.required),U.type="radio",U.name=P.fieldName,N&&U.setAttribute("checked",!0),U.tabIndex=b,U.addEventListener("change",j=>{let{name:q,checked:ie}=j.target;for(let J of this._getElementsByName(q,x))p.setValue(J.id,{value:!1});p.setValue(x,{value:ie})}),U.addEventListener("resetform",j=>{let q=P.defaultFieldValue;j.target.checked=q!=null&&q===P.buttonValue}),this.enableScripting&&this.hasJSActions){let j=P.buttonValue;U.addEventListener("updatefromsandbox",q=>{let ie={value:J=>{let W=j===J.detail.value;for(let K of this._getElementsByName(J.target.name)){let X=W&&K.id===x;K.domElement&&(K.domElement.checked=X),p.setValue(K.id,{value:X})}}};this._dispatchEventFromSandbox(ie,q)}),this._setEventListeners(U,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],q=>q.target.checked)}return this._setBackgroundColor(U),this._setDefaultPropertiesFromJS(U),this.container.append(U),this.container}}class S extends n{constructor(p){super(p,{ignoreBorder:p.data.hasAppearance})}render(){let p=super.render();p.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(p.title=this.data.alternativeText);let P=p.lastChild;return this.enableScripting&&this.hasJSActions&&P&&(this._setDefaultPropertiesFromJS(P),P.addEventListener("updatefromsandbox",x=>{this._dispatchEventFromSandbox({},x)})),p}}class D extends h{constructor(p){super(p,{isRenderable:p.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let p=this.annotationStorage,P=this.data.id,x=p.getValue(P,{value:this.data.fieldValue}),N=document.createElement("select");i.add(N),N.setAttribute("data-element-id",P),N.disabled=this.data.readOnly,this._setRequired(N,this.data.required),N.name=this.data.fieldName,N.tabIndex=b;let U=this.data.combo&&this.data.options.length>0;this.data.combo||(N.size=this.data.options.length,this.data.multiSelect&&(N.multiple=!0)),N.addEventListener("resetform",W=>{let K=this.data.defaultFieldValue;for(let X of N.options)X.selected=X.value===K});for(let W of this.data.options){let K=document.createElement("option");K.textContent=W.displayValue,K.value=W.exportValue,x.value.includes(W.exportValue)&&(K.setAttribute("selected",!0),U=!1),N.append(K)}let j=null;if(U){let W=document.createElement("option");W.value=" ",W.setAttribute("hidden",!0),W.setAttribute("selected",!0),N.prepend(W),j=()=>{W.remove(),N.removeEventListener("input",j),j=null},N.addEventListener("input",j)}let q=W=>{let K=W?"value":"textContent",{options:X,multiple:Z}=N;return Z?Array.prototype.filter.call(X,ne=>ne.selected).map(ne=>ne[K]):X.selectedIndex===-1?null:X[X.selectedIndex][K]},ie=q(!1),J=W=>{let K=W.target.options;return Array.prototype.map.call(K,X=>({displayValue:X.textContent,exportValue:X.value}))};return this.enableScripting&&this.hasJSActions?(N.addEventListener("updatefromsandbox",W=>{let K={value(X){j?.();let Z=X.detail.value,ne=new Set(Array.isArray(Z)?Z:[Z]);for(let re of N.options)re.selected=ne.has(re.value);p.setValue(P,{value:q(!0)}),ie=q(!1)},multipleSelection(X){N.multiple=!0},remove(X){let Z=N.options,ne=X.detail.remove;Z[ne].selected=!1,N.remove(ne),Z.length>0&&Array.prototype.findIndex.call(Z,oe=>oe.selected)===-1&&(Z[0].selected=!0),p.setValue(P,{value:q(!0),items:J(X)}),ie=q(!1)},clear(X){for(;N.length!==0;)N.remove(0);p.setValue(P,{value:null,items:[]}),ie=q(!1)},insert(X){let{index:Z,displayValue:ne,exportValue:re}=X.detail.insert,oe=N.children[Z],ce=document.createElement("option");ce.textContent=ne,ce.value=re,oe?oe.before(ce):N.append(ce),p.setValue(P,{value:q(!0),items:J(X)}),ie=q(!1)},items(X){let{items:Z}=X.detail;for(;N.length!==0;)N.remove(0);for(let ne of Z){let{displayValue:re,exportValue:oe}=ne,ce=document.createElement("option");ce.textContent=re,ce.value=oe,N.append(ce)}N.options.length>0&&(N.options[0].selected=!0),p.setValue(P,{value:q(!0),items:J(X)}),ie=q(!1)},indices(X){let Z=new Set(X.detail.indices);for(let ne of X.target.options)ne.selected=Z.has(ne.index);p.setValue(P,{value:q(!0)}),ie=q(!1)},editable(X){X.target.disabled=!X.detail.editable}};this._dispatchEventFromSandbox(K,W)}),N.addEventListener("input",W=>{let K=q(!0);p.setValue(P,{value:K}),W.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:P,name:"Keystroke",value:ie,changeEx:K,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(N,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],W=>W.target.value)):N.addEventListener("input",function(W){p.setValue(P,{value:q(!0)})}),this.data.combo&&this._setTextStyle(N),this._setBackgroundColor(N),this._setDefaultPropertiesFromJS(N),this.container.append(N),this.container}}class R extends s{constructor(p){let{data:P,elements:x}=p;super(p,{isRenderable:s._hasPopupData(P)}),this.elements=x}render(){this.container.classList.add("popupAnnotation");let p=new I({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),P=[];for(let x of this.elements)x.popup=p,P.push(x.data.id),x.addHighlightArea();return this.container.setAttribute("aria-controls",P.map(x=>`${r.AnnotationPrefix}${x}`).join(",")),this.container}}class I{#e=null;#t=this.#u.bind(this);#i=this.#y.bind(this);#n=this.#w.bind(this);#o=this.#b.bind(this);#r=null;#a=null;#l=null;#c=null;#s=null;#h=null;#d=!1;#f=null;#p=null;#g=null;#_=null;#m=!1;constructor({container:p,color:P,elements:x,titleObj:N,modificationDate:U,contentsObj:j,richText:q,parent:ie,rect:J,parentRect:W,open:K}){this.#a=p,this.#_=N,this.#l=j,this.#g=q,this.#s=ie,this.#r=P,this.#p=J,this.#h=W,this.#c=x;let X=c.PDFDateString.toDateObject(U);X&&(this.#e=ie.l10n.get("annotation_date_string",{date:X.toLocaleDateString(),time:X.toLocaleTimeString()})),this.trigger=x.flatMap(Z=>Z.getElementsToTriggerPopup());for(let Z of this.trigger)Z.addEventListener("click",this.#o),Z.addEventListener("mouseenter",this.#n),Z.addEventListener("mouseleave",this.#i),Z.classList.add("popupTriggerArea");for(let Z of x)Z.container?.addEventListener("keydown",this.#t);this.#a.hidden=!0,K&&this.#b()}render(){if(this.#f)return;let{page:{view:p},viewport:{rawDims:{pageWidth:P,pageHeight:x,pageX:N,pageY:U}}}=this.#s,j=this.#f=document.createElement("div");if(j.className="popup",this.#r){let de=j.style.outlineColor=r.Util.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?j.style.backgroundColor=`color-mix(in srgb, ${de} 30%, white)`:j.style.backgroundColor=r.Util.makeHexColor(...this.#r.map(Me=>Math.floor(.7*(255-Me)+Me)))}let q=document.createElement("span");q.className="header";let ie=document.createElement("h1");if(q.append(ie),{dir:ie.dir,str:ie.textContent}=this.#_,j.append(q),this.#e){let de=document.createElement("span");de.classList.add("popupDate"),this.#e.then(fe=>{de.textContent=fe}),q.append(de)}let J=this.#l,W=this.#g;if(W?.str&&(!J?.str||J.str===W.str))E.XfaLayer.render({xfaHtml:W.html,intent:"richText",div:j}),j.lastChild.classList.add("richText","popupContent");else{let de=this._formatContents(J);j.append(de)}let K=!!this.#h,X=K?this.#h:this.#p;for(let de of this.#c)if(!X||r.Util.intersect(de.data.rect,X)!==null){X=de.data.rect,K=!0;break}let Z=r.Util.normalizeRect([X[0],p[3]-X[1]+p[1],X[2],p[3]-X[3]+p[1]]),re=K?X[2]-X[0]+5:0,oe=Z[0]+re,ce=Z[1],{style:he}=this.#a;he.left=`${100*(oe-N)/P}%`,he.top=`${100*(ce-U)/x}%`,this.#a.append(j)}_formatContents({str:p,dir:P}){let x=document.createElement("p");x.classList.add("popupContent"),x.dir=P;let N=p.split(/(?:\r\n?|\n)/);for(let U=0,j=N.length;U<j;++U){let q=N[U];x.append(document.createTextNode(q)),U<j-1&&x.append(document.createElement("br"))}return x}#u(p){p.altKey||p.shiftKey||p.ctrlKey||p.metaKey||(p.key==="Enter"||p.key==="Escape"&&this.#d)&&this.#b()}#b(){this.#d=!this.#d,this.#d?(this.#w(),this.#a.addEventListener("click",this.#o),this.#a.addEventListener("keydown",this.#t)):(this.#y(),this.#a.removeEventListener("click",this.#o),this.#a.removeEventListener("keydown",this.#t))}#w(){this.#f||this.render(),this.isVisible?this.#d&&this.#a.classList.add("focused"):(this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#y(){this.#a.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#a.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#a.hidden=!1)}get isVisible(){return this.#a.hidden===!1}}class G extends s{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0}),this.textContent=p.data.textContent,this.textPosition=p.data.textPosition,this.annotationEditorType=r.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let p=document.createElement("div");p.classList.add("annotationTextContent"),p.setAttribute("role","comment");for(let P of this.textContent){let x=document.createElement("span");x.textContent=P,p.append(x)}this.container.append(p)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=G;class z extends s{#e=null;constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let p=this.data,{width:P,height:x}=t(p.rect),N=this.svgFactory.create(P,x,!0),U=this.#e=this.svgFactory.createElement("svg:line");return U.setAttribute("x1",p.rect[2]-p.lineCoordinates[0]),U.setAttribute("y1",p.rect[3]-p.lineCoordinates[1]),U.setAttribute("x2",p.rect[2]-p.lineCoordinates[2]),U.setAttribute("y2",p.rect[3]-p.lineCoordinates[3]),U.setAttribute("stroke-width",p.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),N.append(U),this.container.append(N),!p.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class $ extends s{#e=null;constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let p=this.data,{width:P,height:x}=t(p.rect),N=this.svgFactory.create(P,x,!0),U=p.borderStyle.width,j=this.#e=this.svgFactory.createElement("svg:rect");return j.setAttribute("x",U/2),j.setAttribute("y",U/2),j.setAttribute("width",P-U),j.setAttribute("height",x-U),j.setAttribute("stroke-width",U||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),N.append(j),this.container.append(N),!p.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Q extends s{#e=null;constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let p=this.data,{width:P,height:x}=t(p.rect),N=this.svgFactory.create(P,x,!0),U=p.borderStyle.width,j=this.#e=this.svgFactory.createElement("svg:ellipse");return j.setAttribute("cx",P/2),j.setAttribute("cy",x/2),j.setAttribute("rx",P/2-U/2),j.setAttribute("ry",x/2-U/2),j.setAttribute("stroke-width",U||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),N.append(j),this.container.append(N),!p.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Y extends s{#e=null;constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let p=this.data,{width:P,height:x}=t(p.rect),N=this.svgFactory.create(P,x,!0),U=[];for(let q of p.vertices){let ie=q.x-p.rect[0],J=p.rect[3]-q.y;U.push(ie+","+J)}U=U.join(" ");let j=this.#e=this.svgFactory.createElement(this.svgElementName);return j.setAttribute("points",U),j.setAttribute("stroke-width",p.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),N.append(j),this.container.append(N),!p.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class B extends Y{constructor(p){super(p),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class H extends s{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class O extends s{#e=[];constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=r.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);let p=this.data,{width:P,height:x}=t(p.rect),N=this.svgFactory.create(P,x,!0);for(let U of p.inkLists){let j=[];for(let ie of U){let J=ie.x-p.rect[0],W=p.rect[3]-ie.y;j.push(`${J},${W}`)}j=j.join(" ");let q=this.svgFactory.createElement(this.svgElementName);this.#e.push(q),q.setAttribute("points",j),q.setAttribute("stroke-width",p.borderStyle.width||1),q.setAttribute("stroke","transparent"),q.setAttribute("fill","transparent"),!p.popupRef&&this.hasPopupData&&this._createPopup(),N.append(q)}return this.container.append(N),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}e.InkAnnotationElement=O;class f extends s{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class m extends s{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class v extends s{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class T extends s{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class F extends s{constructor(p){super(p,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=F;class k extends s{#e=null;constructor(p){super(p,{isRenderable:!0});let{filename:P,content:x}=this.data.file;this.filename=(0,c.getFilenameFromUrl)(P,!0),this.content=x,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:P,content:x})}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:p,data:P}=this,x;P.hasAppearance||P.fillAlpha===0?x=document.createElement("div"):(x=document.createElement("img"),x.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(P.name)?"paperclip":"pushpin"}.svg`,P.fillAlpha&&P.fillAlpha<1&&(x.style=`filter: opacity(${Math.round(P.fillAlpha*100)}%);`)),x.addEventListener("dblclick",this.#t.bind(this)),this.#e=x;let{isMac:N}=r.FeatureTest.platform;return p.addEventListener("keydown",U=>{U.key==="Enter"&&(N?U.metaKey:U.ctrlKey)&&this.#t()}),!P.popupRef&&this.hasPopupData?this._createPopup():x.classList.add("popupTriggerArea"),p.append(x),p}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class V{#e=null;#t=null;#i=new Map;constructor({div:p,accessibilityManager:P,annotationCanvasMap:x,l10n:N,page:U,viewport:j}){this.div=p,this.#e=P,this.#t=x,this.l10n=N,this.page=U,this.viewport=j,this.zIndex=0,this.l10n||=w.NullL10n}#n(p,P){let x=p.firstChild||p;x.id=`${r.AnnotationPrefix}${P}`,this.div.append(p),this.#e?.moveElementInDOM(this.div,p,x,!1)}render(p){return ae(this,null,function*(){let{annotations:P}=p,x=this.div;(0,c.setLayerDimensions)(x,this.viewport);let N=new Map,U={data:null,layer:x,linkService:p.linkService,downloadManager:p.downloadManager,imageResourcesPath:p.imageResourcesPath||"",renderForms:p.renderForms!==!1,svgFactory:new c.DOMSVGFactory,annotationStorage:p.annotationStorage||new g.AnnotationStorage,enableScripting:p.enableScripting===!0,hasJSActions:p.hasJSActions,fieldObjects:p.fieldObjects,parent:this,elements:null};for(let j of P){if(j.noHTML)continue;let q=j.annotationType===r.AnnotationType.POPUP;if(q){let W=N.get(j.id);if(!W)continue;U.elements=W}else{let{width:W,height:K}=t(j.rect);if(W<=0||K<=0)continue}U.data=j;let ie=o.create(U);if(!ie.isRenderable)continue;if(!q&&j.popupRef){let W=N.get(j.popupRef);W?W.push(ie):N.set(j.popupRef,[ie])}ie.annotationEditorType>0&&this.#i.set(ie.data.id,ie);let J=ie.render();j.hidden&&(J.style.visibility="hidden"),this.#n(J,j.id)}this.#o(),yield this.l10n.translate(x)})}update({viewport:p}){let P=this.div;this.viewport=p,(0,c.setLayerDimensions)(P,{rotation:p.rotation}),this.#o(),P.hidden=!1}#o(){if(!this.#t)return;let p=this.div;for(let[P,x]of this.#t){let N=p.querySelector(`[data-annotation-id="${P}"]`);if(!N)continue;let{firstChild:U}=N;U?U.nodeName==="CANVAS"?U.replaceWith(x):U.before(x):N.append(x)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(p){return this.#i.get(p)}}e.AnnotationLayer=V},(M,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function A(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function r(g){return Math.max(0,Math.min(255,255*g))}class c{static CMYK_G([C,w,E,b]){return["G",1-Math.min(1,.3*C+.59*E+.11*w+b)]}static G_CMYK([C]){return["CMYK",0,0,0,1-C]}static G_RGB([C]){return["RGB",C,C,C]}static G_rgb([C]){return C=r(C),[C,C,C]}static G_HTML([C]){let w=A(C);return`#${w}${w}${w}`}static RGB_G([C,w,E]){return["G",.3*C+.59*w+.11*E]}static RGB_rgb(C){return C.map(r)}static RGB_HTML(C){return`#${C.map(A).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([C,w,E,b]){return["RGB",1-Math.min(1,C+b),1-Math.min(1,E+b),1-Math.min(1,w+b)]}static CMYK_rgb([C,w,E,b]){return[r(1-Math.min(1,C+b)),r(1-Math.min(1,E+b)),r(1-Math.min(1,w+b))]}static CMYK_HTML(C){let w=this.CMYK_RGB(C).slice(1);return this.RGB_HTML(w)}static RGB_CMYK([C,w,E]){let b=1-C,a=1-w,i=1-E,t=Math.min(b,a,i);return["CMYK",b,a,i,t]}}e.ColorConverters=c},(M,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=r;let A={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};A.print_progress_percent="{{progress}}%";function r(w,E){switch(w){case"find_match_count":w=`find_match_count[${E.total===1?"one":"other"}]`;break;case"find_match_count_limit":w=`find_match_count_limit[${E.limit===1?"one":"other"}]`;break}return A[w]||""}function c(w,E){return E?w.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(b,a)=>a in E?E[a]:"{{"+a+"}}"):w}let g={getLanguage(){return ae(this,null,function*(){return"en-us"})},getDirection(){return ae(this,null,function*(){return"ltr"})},get(a){return ae(this,arguments,function*(w,E=null,b=r(w,E)){return c(b,E)})},translate(w){return ae(this,null,function*(){})}};e.NullL10n=g},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=A(25);class c{static setupStorage(C,w,E,b,a){let i=b.getValue(w,{value:null});switch(E.name){case"textarea":if(i.value!==null&&(C.textContent=i.value),a==="print")break;C.addEventListener("input",t=>{b.setValue(w,{value:t.target.value})});break;case"input":if(E.attributes.type==="radio"||E.attributes.type==="checkbox"){if(i.value===E.attributes.xfaOn?C.setAttribute("checked",!0):i.value===E.attributes.xfaOff&&C.removeAttribute("checked"),a==="print")break;C.addEventListener("change",t=>{b.setValue(w,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(i.value!==null&&C.setAttribute("value",i.value),a==="print")break;C.addEventListener("input",t=>{b.setValue(w,{value:t.target.value})})}break;case"select":if(i.value!==null){C.setAttribute("value",i.value);for(let t of E.children)t.attributes.value===i.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}C.addEventListener("input",t=>{let o=t.target.options,s=o.selectedIndex===-1?"":o[o.selectedIndex].value;b.setValue(w,{value:s})});break}}static setAttributes({html:C,element:w,storage:E=null,intent:b,linkService:a}){let{attributes:i}=w,t=C instanceof HTMLAnchorElement;i.type==="radio"&&(i.name=`${i.name}-${b}`);for(let[o,s]of Object.entries(i))if(s!=null)switch(o){case"class":s.length&&C.setAttribute(o,s.join(" "));break;case"dataId":break;case"id":C.setAttribute("data-element-id",s);break;case"style":Object.assign(C.style,s);break;case"textContent":C.textContent=s;break;default:(!t||o!=="href"&&o!=="newWindow")&&C.setAttribute(o,s)}t&&a.addLinkAttributes(C,i.href,i.newWindow),E&&i.dataId&&this.setupStorage(C,i.dataId,w,E)}static render(C){let w=C.annotationStorage,E=C.linkService,b=C.xfaHtml,a=C.intent||"display",i=document.createElement(b.name);b.attributes&&this.setAttributes({html:i,element:b,intent:a,linkService:E});let t=[[b,-1,i]],o=C.div;if(o.append(i),C.viewport){let n=`matrix(${C.viewport.transform.join(",")})`;o.style.transform=n}a!=="richText"&&o.setAttribute("class","xfaLayer xfaFont");let s=[];for(;t.length>0;){let[n,d,h]=t.at(-1);if(d+1===n.children.length){t.pop();continue}let y=n.children[++t.at(-1)[1]];if(y===null)continue;let{name:l}=y;if(l==="#text"){let _=document.createTextNode(y.value);s.push(_),h.append(_);continue}let u=y?.attributes?.xmlns?document.createElementNS(y.attributes.xmlns,l):document.createElement(l);if(h.append(u),y.attributes&&this.setAttributes({html:u,element:y,storage:w,intent:a,linkService:E}),y.children&&y.children.length>0)t.push([y,-1,u]);else if(y.value){let _=document.createTextNode(y.value);r.XfaText.shouldBuildText(l)&&s.push(_),u.append(_)}}for(let n of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))n.setAttribute("readOnly",!0);return{textDivs:s}}static update(C){let w=`matrix(${C.viewport.transform.join(",")})`;C.div.style.transform=w,C.div.hidden=!1}}e.XfaLayer=c},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var r=A(1),c=A(4),g=A(29),C=A(6),w=A(5);let E=(()=>{class b extends c.AnnotationEditor{#e=0;#t=0;#i=this.canvasPointermove.bind(this);#n=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#r=this.canvasPointerdown.bind(this);#a=new Path2D;#l=!1;#c=!1;#s=!1;#h=null;#d=0;#f=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(i){super(Ue(Re({},i),{name:"inkEditor"})),this.color=i.color||null,this.thickness=i.thickness||null,this.opacity=i.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(i){c.AnnotationEditor.initialize(i,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(i,t){switch(i){case r.AnnotationEditorParamsType.INK_THICKNESS:b._defaultThickness=t;break;case r.AnnotationEditorParamsType.INK_COLOR:b._defaultColor=t;break;case r.AnnotationEditorParamsType.INK_OPACITY:b._defaultOpacity=t/100;break}}updateParams(i,t){switch(i){case r.AnnotationEditorParamsType.INK_THICKNESS:this.#g(t);break;case r.AnnotationEditorParamsType.INK_COLOR:this.#_(t);break;case r.AnnotationEditorParamsType.INK_OPACITY:this.#m(t);break}}static get defaultPropertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,b._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,b._defaultColor||c.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(b._defaultOpacity*100)]]}get propertiesToUpdate(){return[[r.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||b._defaultThickness],[r.AnnotationEditorParamsType.INK_COLOR,this.color||b._defaultColor||c.AnnotationEditor._defaultLineColor],[r.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??b._defaultOpacity))]]}#g(i){let t=this.thickness;this.addCommands({cmd:()=>{this.thickness=i,this.#O()},undo:()=>{this.thickness=t,this.#O()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#_(i){let t=this.color;this.addCommands({cmd:()=>{this.color=i,this.#v()},undo:()=>{this.color=t,this.#v()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(i){i/=100;let t=this.opacity;this.addCommands({cmd:()=>{this.opacity=i,this.#v()},undo:()=>{this.opacity=t,this.#v()},mustExec:!0,type:r.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#P(),this.#D()),this.isAttachedToDOM||(this.parent.add(this),this.#E()),this.#O()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#h.disconnect(),this.#h=null,super.remove())}setParent(i){!this.parent&&i?this._uiManager.removeShouldRescale(this):this.parent&&i===null&&this._uiManager.addShouldRescale(this),super.setParent(i)}onScaleChanging(){let[i,t]=this.parentDimensions,o=this.width*i,s=this.height*t;this.setDimensions(o,s)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#r))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#r))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){let{parentRotation:i,parentDimensions:[t,o]}=this;switch(i){case 90:return[0,o,o,t];case 180:return[t,o,t,o];case 270:return[t,0,o,t];default:return[0,0,t,o]}}#b(){let{ctx:i,color:t,opacity:o,thickness:s,parentScale:n,scaleFactor:d}=this;i.lineWidth=s*n/d,i.lineCap="round",i.lineJoin="round",i.miterLimit=10,i.strokeStyle=`${t}${(0,w.opacityToHex)(o)}`}#w(i,t){this.canvas.addEventListener("contextmenu",C.noContextMenu),this.canvas.addEventListener("pointerleave",this.#n),this.canvas.addEventListener("pointermove",this.#i),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#r),this.isEditing=!0,this.#s||(this.#s=!0,this.#E(),this.thickness||=b._defaultThickness,this.color||=b._defaultColor||c.AnnotationEditor._defaultLineColor,this.opacity??=b._defaultOpacity),this.currentPath.push([i,t]),this.#c=!1,this.#b(),this.#p=()=>{this.#I(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#y(i,t){let[o,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&i===o&&t===s)return;let n=this.currentPath,d=this.#a;if(n.push([i,t]),this.#c=!0,n.length<=2){d.moveTo(...n[0]),d.lineTo(i,t);return}n.length===3&&(this.#a=d=new Path2D,d.moveTo(...n[0])),this.#R(d,...n.at(-3),...n.at(-2),i,t)}#A(){if(this.currentPath.length===0)return;let i=this.currentPath.at(-1);this.#a.lineTo(...i)}#S(i,t){this.#p=null,i=Math.min(Math.max(i,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#y(i,t),this.#A();let o;if(this.currentPath.length!==1)o=this.#k();else{let y=[i,t];o=[[y,y.slice(),y.slice(),y]]}let s=this.#a,n=this.currentPath;this.currentPath=[],this.#a=new Path2D;let d=()=>{this.allRawPaths.push(n),this.paths.push(o),this.bezierPath2D.push(s),this.rebuild()},h=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#P(),this.#D()),this.#O())};this.addCommands({cmd:d,undo:h,mustExec:!0})}#I(){if(!this.#c)return;this.#c=!1;let i=Math.ceil(this.thickness*this.parentScale),t=this.currentPath.slice(-3),o=t.map(u=>u[0]),s=t.map(u=>u[1]),n=Math.min(...o)-i,d=Math.max(...o)+i,h=Math.min(...s)-i,y=Math.max(...s)+i,{ctx:l}=this;l.save(),l.clearRect(0,0,this.canvas.width,this.canvas.height);for(let u of this.bezierPath2D)l.stroke(u);l.stroke(this.#a),l.restore()}#R(i,t,o,s,n,d,h){let y=(t+s)/2,l=(o+n)/2,u=(s+d)/2,_=(n+h)/2;i.bezierCurveTo(y+2*(s-y)/3,l+2*(n-l)/3,u+2*(s-u)/3,_+2*(n-_)/3,u,_)}#k(){let i=this.currentPath;if(i.length<=2)return[[i[0],i[0],i.at(-1),i.at(-1)]];let t=[],o,[s,n]=i[0];for(o=1;o<i.length-2;o++){let[S,D]=i[o],[R,I]=i[o+1],G=(S+R)/2,z=(D+I)/2,$=[s+2*(S-s)/3,n+2*(D-n)/3],Q=[G+2*(S-G)/3,z+2*(D-z)/3];t.push([[s,n],$,Q,[G,z]]),[s,n]=[G,z]}let[d,h]=i[o],[y,l]=i[o+1],u=[s+2*(d-s)/3,n+2*(h-n)/3],_=[y+2*(d-y)/3,l+2*(h-l)/3];return t.push([[s,n],u,_,[y,l]]),t}#v(){if(this.isEmpty()){this.#x();return}this.#b();let{canvas:i,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,i.width,i.height),this.#x();for(let o of this.bezierPath2D)t.stroke(o)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#O(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(i){this._focusEventsAllowed&&(super.focusin(i),this.enableEditMode())}canvasPointerdown(i){i.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),i.preventDefault(),i.type!=="mouse"&&this.div.focus(),this.#w(i.offsetX,i.offsetY))}canvasPointermove(i){i.preventDefault(),this.#y(i.offsetX,i.offsetY)}canvasPointerup(i){i.preventDefault(),this.#M(i)}canvasPointerleave(i){this.#M(i)}#M(i){this.canvas.removeEventListener("pointerleave",this.#n),this.canvas.removeEventListener("pointermove",this.#i),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#r),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",C.noContextMenu)},10),this.#S(i.offsetX,i.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#P(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",c.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(i=>this.canvas?.setAttribute("aria-label",i)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#D(){this.#h=new ResizeObserver(i=>{let t=i[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#h.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let i,t;this.width&&(i=this.x,t=this.y),super.render(),c.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(h=>this.div?.setAttribute("aria-label",h));let[o,s,n,d]=this.#u();if(this.setAt(o,s,0,0),this.setDims(n,d),this.#P(),this.width){let[h,y]=this.parentDimensions;this.setAspectRatio(this.width*h,this.height*y),this.setAt(i*h,t*y,this.width*h,this.height*y),this.#s=!0,this.#E(),this.setDims(this.width*h,this.height*y),this.#v(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#D(),this.div}#E(){if(!this.#s)return;let[i,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*i),this.canvas.height=Math.ceil(this.height*t),this.#x()}setDimensions(i,t){let o=Math.round(i),s=Math.round(t);if(this.#d===o&&this.#f===s)return;this.#d=o,this.#f=s,this.canvas.style.visibility="hidden";let[n,d]=this.parentDimensions;this.width=i/n,this.height=t/d,this.fixAndSetPosition(),this.#l&&this.#T(i,t),this.#E(),this.#v(),this.canvas.style.visibility="visible",this.fixDims()}#T(i,t){let o=this.#F(),s=(i-o)/this.#t,n=(t-o)/this.#e;this.scaleFactor=Math.min(s,n)}#x(){let i=this.#F()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+i,this.translationY*this.scaleFactor+i)}static#L(i){let t=new Path2D;for(let o=0,s=i.length;o<s;o++){let[n,d,h,y]=i[o];o===0&&t.moveTo(...n),t.bezierCurveTo(d[0],d[1],h[0],h[1],y[0],y[1])}return t}static#B(i,t,o){let[s,n,d,h]=t;switch(o){case 0:for(let y=0,l=i.length;y<l;y+=2)i[y]+=s,i[y+1]=h-i[y+1];break;case 90:for(let y=0,l=i.length;y<l;y+=2){let u=i[y];i[y]=i[y+1]+s,i[y+1]=u+n}break;case 180:for(let y=0,l=i.length;y<l;y+=2)i[y]=d-i[y],i[y+1]+=n;break;case 270:for(let y=0,l=i.length;y<l;y+=2){let u=i[y];i[y]=d-i[y+1],i[y+1]=h-u}break;default:throw new Error("Invalid rotation")}return i}static#U(i,t,o){let[s,n,d,h]=t;switch(o){case 0:for(let y=0,l=i.length;y<l;y+=2)i[y]-=s,i[y+1]=h-i[y+1];break;case 90:for(let y=0,l=i.length;y<l;y+=2){let u=i[y];i[y]=i[y+1]-n,i[y+1]=u-s}break;case 180:for(let y=0,l=i.length;y<l;y+=2)i[y]=d-i[y],i[y+1]-=n;break;case 270:for(let y=0,l=i.length;y<l;y+=2){let u=i[y];i[y]=h-i[y+1],i[y+1]=d-u}break;default:throw new Error("Invalid rotation")}return i}#V(i,t,o,s){let n=[],d=this.thickness/2,h=i*t+d,y=i*o+d;for(let l of this.paths){let u=[],_=[];for(let S=0,D=l.length;S<D;S++){let[R,I,G,z]=l[S],$=i*R[0]+h,Q=i*R[1]+y,Y=i*I[0]+h,B=i*I[1]+y,H=i*G[0]+h,O=i*G[1]+y,f=i*z[0]+h,m=i*z[1]+y;S===0&&(u.push($,Q),_.push($,Q)),u.push(Y,B,H,O,f,m),_.push(Y,B),S===D-1&&_.push(f,m)}n.push({bezier:b.#B(u,s,this.rotation),points:b.#B(_,s,this.rotation)})}return n}#N(){let i=1/0,t=-1/0,o=1/0,s=-1/0;for(let n of this.paths)for(let[d,h,y,l]of n){let u=r.Util.bezierBoundingBox(...d,...h,...y,...l);i=Math.min(i,u[0]),o=Math.min(o,u[1]),t=Math.max(t,u[2]),s=Math.max(s,u[3])}return[i,o,t,s]}#F(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#O(i=!1){if(this.isEmpty())return;if(!this.#l){this.#v();return}let t=this.#N(),o=this.#F();this.#t=Math.max(c.AnnotationEditor.MIN_SIZE,t[2]-t[0]),this.#e=Math.max(c.AnnotationEditor.MIN_SIZE,t[3]-t[1]);let s=Math.ceil(o+this.#t*this.scaleFactor),n=Math.ceil(o+this.#e*this.scaleFactor),[d,h]=this.parentDimensions;this.width=s/d,this.height=n/h,this.setAspectRatio(s,n);let y=this.translationX,l=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#E(),this.#v(),this.#d=s,this.#f=n,this.setDims(s,n);let u=i?o/this.scaleFactor/2:0;this.translate(y-this.translationX-u,l-this.translationY-u)}static deserialize(i,t,o){if(i instanceof g.InkAnnotationElement)return null;let s=super.deserialize(i,t,o);s.thickness=i.thickness,s.color=r.Util.makeHexColor(...i.color),s.opacity=i.opacity;let[n,d]=s.pageDimensions,h=s.width*n,y=s.height*d,l=s.parentScale,u=i.thickness/2;s.#l=!0,s.#d=Math.round(h),s.#f=Math.round(y);let{paths:_,rect:S,rotation:D}=i;for(let{bezier:I}of _){I=b.#U(I,S,D);let G=[];s.paths.push(G);let z=l*(I[0]-u),$=l*(I[1]-u);for(let Y=2,B=I.length;Y<B;Y+=6){let H=l*(I[Y]-u),O=l*(I[Y+1]-u),f=l*(I[Y+2]-u),m=l*(I[Y+3]-u),v=l*(I[Y+4]-u),T=l*(I[Y+5]-u);G.push([[z,$],[H,O],[f,m],[v,T]]),z=v,$=T}let Q=this.#L(G);s.bezierPath2D.push(Q)}let R=s.#N();return s.#t=Math.max(c.AnnotationEditor.MIN_SIZE,R[2]-R[0]),s.#e=Math.max(c.AnnotationEditor.MIN_SIZE,R[3]-R[1]),s.#T(h,y),s}serialize(){if(this.isEmpty())return null;let i=this.getRect(0,0),t=c.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:r.AnnotationEditorType.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#V(this.scaleFactor/this.parentScale,this.translationX,this.translationY,i),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}return b})();e.InkEditor=E},(M,e,A)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var r=A(1),c=A(4),g=A(6),C=A(29);let w=(()=>{class E extends c.AnnotationEditor{#e=null;#t=null;#i=null;#n=null;#o=null;#r=null;#a=null;#l=null;#c=!1;#s=!1;static _type="stamp";constructor(a){super(Ue(Re({},a),{name:"stampEditor"})),this.#n=a.bitmapUrl,this.#o=a.bitmapFile}static initialize(a){c.AnnotationEditor.initialize(a)}static get supportedTypes(){let a=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,r.shadow)(this,"supportedTypes",a.map(i=>`image/${i}`))}static get supportedTypesStr(){return(0,r.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(a){return this.supportedTypes.includes(a)}static paste(a,i){i.pasteEditor(r.AnnotationEditorType.STAMP,{bitmapFile:a.getAsFile()})}#h(a,i=!1){if(!a){this.remove();return}this.#e=a.bitmap,i||(this.#t=a.id,this.#c=a.isSvg),this.#p()}#d(){this.#i=null,this._uiManager.enableWaiting(!1),this.#r&&this.div.focus()}#f(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#h(i,!0)).finally(()=>this.#d());return}if(this.#n){let i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(t=>this.#h(t)).finally(()=>this.#d());return}if(this.#o){let i=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(t=>this.#h(t)).finally(()=>this.#d());return}let a=document.createElement("input");a.type="file",a.accept=E.supportedTypesStr,this.#i=new Promise(i=>{a.addEventListener("change",()=>ae(this,null,function*(){if(!a.files||a.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let t=yield this._uiManager.imageManager.getFromFile(a.files[0]);this.#h(t)}i()})),a.addEventListener("cancel",()=>{this.remove(),i()})}).finally(()=>this.#d()),a.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#a?.disconnect(),this.#a=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#f();return}super.rebuild(),this.div!==null&&(this.#t&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let a,i;if(this.width&&(a=this.x,i=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#f(),this.width){let[t,o]=this.parentDimensions;this.setAt(a*t,i*o,this.width*t,this.height*o)}return this.div}#p(){let{div:a}=this,{width:i,height:t}=this.#e,[o,s]=this.pageDimensions,n=.75;if(this.width)i=this.width*o,t=this.height*s;else if(i>n*o||t>n*s){let l=Math.min(n*o/i,n*s/t);i*=l,t*=l}let[d,h]=this.parentDimensions;this.setDims(i*d/o,t*h/s),this._uiManager.enableWaiting(!1);let y=this.#r=document.createElement("canvas");a.append(y),a.hidden=!1,this.#m(i,t),this.#b(),this.#s||(this.parent.addUndoableEditor(this),this.#s=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#g(a,i){let[t,o]=this.parentDimensions;this.width=a/t,this.height=i/o,this.setDims(a,i),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);let s=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(a,i)},s)}#_(a,i){let{width:t,height:o}=this.#e,s=t,n=o,d=this.#e;for(;s>2*a||n>2*i;){let h=s,y=n;s>2*a&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),n>2*i&&(n=n>=16384?Math.floor(n/2)-1:Math.ceil(n/2));let l=new OffscreenCanvas(s,n);l.getContext("2d").drawImage(d,0,0,h,y,0,0,s,n),d=l.transferToImageBitmap()}return d}#m(a,i){a=Math.ceil(a),i=Math.ceil(i);let t=this.#r;if(!t||t.width===a&&t.height===i)return;t.width=a,t.height=i;let o=this.#c?this.#e:this.#_(a,i),s=t.getContext("2d");s.filter=this._uiManager.hcmFilter,s.drawImage(o,0,0,o.width,o.height,0,0,a,i)}#u(a){if(a){if(this.#c){let o=this._uiManager.imageManager.getSvgUrl(this.#t);if(o)return o}let i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#e,i.getContext("2d").drawImage(this.#e,0,0),i.toDataURL()}if(this.#c){let[i,t]=this.pageDimensions,o=Math.round(this.width*i*g.PixelsPerInch.PDF_TO_CSS_UNITS),s=Math.round(this.height*t*g.PixelsPerInch.PDF_TO_CSS_UNITS),n=new OffscreenCanvas(o,s);return n.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,o,s),n.transferToImageBitmap()}return structuredClone(this.#e)}#b(){this.#a=new ResizeObserver(a=>{let i=a[0].contentRect;i.width&&i.height&&this.#g(i.width,i.height)}),this.#a.observe(this.div)}static deserialize(a,i,t){if(a instanceof C.StampAnnotationElement)return null;let o=super.deserialize(a,i,t),{rect:s,bitmapUrl:n,bitmapId:d,isSvg:h,accessibilityData:y}=a;d&&t.imageManager.isValidId(d)?o.#t=d:o.#n=n,o.#c=h;let[l,u]=o.pageDimensions;return o.width=(s[2]-s[0])/l,o.height=(s[3]-s[1])/u,y&&(o.altTextData=y),o}serialize(a=!1,i=null){if(this.isEmpty())return null;let t={annotationType:r.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(a)return t.bitmapUrl=this.#u(!0),t.accessibilityData=this.altTextData,t;let{decorative:o,altText:s}=this.altTextData;if(!o&&s&&(t.accessibilityData={type:"Figure",alt:s}),i===null)return t;i.stamps||=new Map;let n=this.#c?(t.rect[2]-t.rect[0])*(t.rect[3]-t.rect[1]):null;if(!i.stamps.has(this.#t))i.stamps.set(this.#t,{area:n,serialized:t}),t.bitmap=this.#u(!1);else if(this.#c){let d=i.stamps.get(this.#t);n>d.area&&(d.area=n,d.serialized.bitmap.close(),d.serialized.bitmap=this.#u(!1))}return t}}return E})();e.StampEditor=w}],__webpack_module_cache__={};function __w_pdfjs_require__(M){var e=__webpack_module_cache__[M];if(e!==void 0)return e.exports;var A=__webpack_module_cache__[M]={exports:{}};return __webpack_modules__[M](A,A.exports,__w_pdfjs_require__),A.exports}var __webpack_exports__={};return(()=>{var M=__webpack_exports__;Object.defineProperty(M,"__esModule",{value:!0}),Object.defineProperty(M,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(M,"AnnotationEditorLayer",{enumerable:!0,get:function(){return g.AnnotationEditorLayer}}),Object.defineProperty(M,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(M,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(M,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return C.AnnotationEditorUIManager}}),Object.defineProperty(M,"AnnotationLayer",{enumerable:!0,get:function(){return w.AnnotationLayer}}),Object.defineProperty(M,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(M,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(M,"DOMSVGFactory",{enumerable:!0,get:function(){return r.DOMSVGFactory}}),Object.defineProperty(M,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(M,"GlobalWorkerOptions",{enumerable:!0,get:function(){return E.GlobalWorkerOptions}}),Object.defineProperty(M,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(M,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(M,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(M,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(M,"PDFDataRangeTransport",{enumerable:!0,get:function(){return A.PDFDataRangeTransport}}),Object.defineProperty(M,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(M,"PDFWorker",{enumerable:!0,get:function(){return A.PDFWorker}}),Object.defineProperty(M,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(M,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(M,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(M,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(M,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(M,"SVGGraphics",{enumerable:!0,get:function(){return A.SVGGraphics}}),Object.defineProperty(M,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(M,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(M,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(M,"XfaLayer",{enumerable:!0,get:function(){return b.XfaLayer}}),Object.defineProperty(M,"build",{enumerable:!0,get:function(){return A.build}}),Object.defineProperty(M,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(M,"getDocument",{enumerable:!0,get:function(){return A.getDocument}}),Object.defineProperty(M,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(M,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(M,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(M,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(M,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(M,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(M,"noContextMenu",{enumerable:!0,get:function(){return r.noContextMenu}}),Object.defineProperty(M,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(M,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}}),Object.defineProperty(M,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(M,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(M,"updateTextLayer",{enumerable:!0,get:function(){return c.updateTextLayer}}),Object.defineProperty(M,"version",{enumerable:!0,get:function(){return A.version}});var e=__w_pdfjs_require__(1),A=__w_pdfjs_require__(2),r=__w_pdfjs_require__(6),c=__w_pdfjs_require__(26),g=__w_pdfjs_require__(27),C=__w_pdfjs_require__(5),w=__w_pdfjs_require__(29),E=__w_pdfjs_require__(14),b=__w_pdfjs_require__(32);let a="3.11.174",i="ce8716743"})(),__webpack_exports__})())});var Ci=Ve((Ct,qt)=>{"use strict";(function(e,A){typeof Ct=="object"&&typeof qt=="object"?qt.exports=e.pdfjsViewer=A():typeof define=="function"&&define.amd?define("pdfjs-dist/web/pdf_viewer",[],()=>e.pdfjsViewer=A()):typeof Ct=="object"?Ct["pdfjs-dist/web/pdf_viewer"]=e.pdfjsViewer=A():e["pdfjs-dist/web/pdf_viewer"]=e.pdfjsViewer=A()})(globalThis,()=>(()=>{"use strict";var M=[,(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFFindController=g.FindState=void 0;var w=C(2),E=C(3),b=C(4);let a={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};g.FindState=a;let i=250,t=-50,o=-400,s={"\u2010":"-","\u2018":"'","\u2019":"'","\u201A":"'","\u201B":"'","\u201C":'"',"\u201D":'"',"\u201E":'"',"\u201F":'"',"\xBC":"1/4","\xBD":"1/2","\xBE":"3/4"},n=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),d,h=new RegExp("\\p{M}+","gu"),y=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),l=new RegExp("([^\\p{M}])\\p{M}*$","u"),u=new RegExp("^\\p{M}*([^\\p{M}])","u"),_=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,S=new Map,D="[\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f]",R=new Map,I=null,G=null;function z(Y){let B=[],H;for(;(H=_.exec(Y))!==null;){let{index:P}=H;for(let x of H[0]){let N=S.get(x);N||(N=x.normalize("NFD").length,S.set(x,N)),B.push([N,P++])}}let O;if(B.length===0&&I)O=I;else if(B.length>0&&G)O=G;else{let P=Object.keys(s).join(""),x=(0,E.getNormalizeWithNFKC)(),j=`([${P}])|([${x}])|((?:\u3099|\u309A)\\n)|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|((?:\\p{Ideographic}|[\u3040-\u30FF])\\n)|(\\n)`;B.length===0?O=I=new RegExp(j+"|(\\u0000)","gum"):O=G=new RegExp(j+`|(${D})`,"gum")}let f=[];for(;(H=h.exec(Y))!==null;)f.push([H[0].length,H.index]);let m=Y.normalize("NFD"),v=[[0,0]],T=0,F=0,k=0,V=0,L=0,p=!1;return m=m.replace(O,(P,x,N,U,j,q,ie,J,W,K)=>{if(K-=V,x){let X=s[x],Z=X.length;for(let ne=1;ne<Z;ne++)v.push([K-k+ne,k-ne]);return k-=Z-1,X}if(N){let X=R.get(N);X||(X=N.normalize("NFKC"),R.set(N,X));let Z=X.length;for(let ne=1;ne<Z;ne++)v.push([K-k+ne,k-ne]);return k-=Z-1,X}if(U)return p=!0,K+L===f[T]?.[1]?++T:(v.push([K-1-k+1,k-1]),k-=1,V+=1),v.push([K-k+1,k]),V+=1,L+=1,U.charAt(0);if(j){let X=j.endsWith(`
`),Z=X?j.length-2:j.length;p=!0;let ne=Z;K+L===f[T]?.[1]&&(ne-=f[T][0],++T);for(let re=1;re<=ne;re++)v.push([K-1-k+re,k-re]);return k-=ne,V+=ne,X?(K+=Z-1,v.push([K-k+1,1+k]),k+=1,V+=1,L+=1,j.slice(0,Z)):j}if(q){let X=q.length-2;return v.push([K-k+X,1+k]),k+=1,V+=1,L+=1,q.slice(0,-2)}if(ie){let X=ie.length-1;return v.push([K-k+X,k]),V+=1,L+=1,ie.slice(0,-1)}if(J)return v.push([K-k+1,k-1]),k-=1,V+=1,L+=1," ";if(K+L===B[F]?.[1]){let X=B[F][0]-1;++F;for(let Z=1;Z<=X;Z++)v.push([K-(k-Z),k-Z]);k-=X,V+=X}return W}),v.push([m.length,k]),[m,v,p]}function $(Y,B,H){if(!Y)return[B,H];let O=B,f=B+H-1,m=(0,w.binarySearchFirstItem)(Y,V=>V[0]>=O);Y[m][0]>O&&--m;let v=(0,w.binarySearchFirstItem)(Y,V=>V[0]>=f,m);Y[v][0]>f&&--v;let T=O+Y[m][1],k=f+Y[v][1]+1-T;return[T,k]}class Q{#e=null;#t=!0;#i=0;constructor({linkService:B,eventBus:H,updateMatchesCountOnProgress:O=!0}){this._linkService=B,this._eventBus=H,this.#t=O,this.onIsPageVisible=null,this.#o(),H._on("find",this.#n.bind(this)),H._on("findbarclose",this.#w.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this.#e}setDocument(B){this._pdfDocument&&this.#o(),B&&(this._pdfDocument=B,this._firstPageCapability.resolve())}#n(B){if(!B)return;B.phraseSearch===!1&&(console.error("The `phraseSearch`-parameter was removed, please provide an Array of strings in the `query`-parameter instead."),typeof B.query=="string"&&(B.query=B.query.match(/\S+/g)));let H=this._pdfDocument,{type:O}=B;(this.#e===null||this.#a(B))&&(this._dirtyMatch=!0),this.#e=B,O!=="highlightallchange"&&this.#S(a.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||H&&this._pdfDocument!==H)return;this.#d();let f=!this._highlightMatches,m=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),O?this._dirtyMatch?this.#g():O==="again"?(this.#g(),f&&this.#e.highlightAll&&this.#p()):O==="highlightallchange"?(m?this.#g():this._highlightMatches=!0,this.#p()):this.#g():this._findTimeout=setTimeout(()=>{this.#g(),this._findTimeout=null},i)})}scrollMatchIntoView({element:B=null,selectedLeft:H=0,pageIndex:O=-1,matchIndex:f=-1}){if(!this._scrollMatches||!B)return;if(f===-1||f!==this._selected.matchIdx)return;if(O===-1||O!==this._selected.pageIdx)return;this._scrollMatches=!1;let m={top:t,left:H+o};(0,w.scrollIntoView)(B,m,!0)}#o(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this.#i=0,this.#e=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=new b.PromiseCapability}get#r(){let{query:B}=this.#e;return typeof B=="string"?(B!==this._rawQuery&&(this._rawQuery=B,[this._normalizedQuery]=z(B)),this._normalizedQuery):(B||[]).filter(H=>!!H).map(H=>z(H)[0])}#a(B){let H=B.query,O=this.#e.query,f=typeof H;if(f!==typeof O)return!0;if(f==="string"){if(H!==O)return!0}else if(JSON.stringify(H)!==JSON.stringify(O))return!0;switch(B.type){case"again":let v=this._selected.pageIdx+1,T=this._linkService;return v>=1&&v<=T.pagesCount&&v!==T.page&&!(this.onIsPageVisible?.(v)??!0);case"highlightallchange":return!1}return!0}#l(B,H,O){let f=B.slice(0,H).match(l);if(f){let m=B.charCodeAt(H),v=f[1].charCodeAt(0);if((0,E.getCharacterType)(m)===(0,E.getCharacterType)(v))return!1}if(f=B.slice(H+O).match(u),f){let m=B.charCodeAt(H+O-1),v=f[1].charCodeAt(0);if((0,E.getCharacterType)(m)===(0,E.getCharacterType)(v))return!1}return!0}#c(B,H,O,f){let m=this._pageMatches[O]=[],v=this._pageMatchesLength[O]=[];if(!B)return;let T=this._pageDiffs[O],F;for(;(F=B.exec(f))!==null;){if(H&&!this.#l(f,F.index,F[0].length))continue;let[k,V]=$(T,F.index,F[0].length);V&&(m.push(k),v.push(V))}}#s(B,H){let{matchDiacritics:O}=this.#e,f=!1;B=B.replaceAll(y,(v,T,F,k,V,L)=>T?`[ ]*\\${T}[ ]*`:F?`[ ]*${F}[ ]*`:k?"[ ]+":O?V||L:V?n.has(V.charCodeAt(0))?V:"":H?(f=!0,`${L}\\p{M}*`):L);let m="[ ]*";return B.endsWith(m)&&(B=B.slice(0,B.length-m.length)),O&&H&&(d||=String.fromCharCode(...n),f=!0,B=`${B}(?=[${d}]|[^\\p{M}]|$)`),[f,B]}#h(B){let H=this.#r;if(H.length===0)return;let{caseSensitive:O,entireWord:f}=this.#e,m=this._pageContents[B],v=this._hasDiacritics[B],T=!1;typeof H=="string"?[T,H]=this.#s(H,v):H=H.sort().reverse().map(V=>{let[L,p]=this.#s(V,v);return T||=L,`(${p})`}).join("|");let F=`g${T?"u":""}${O?"":"i"}`;H=H?new RegExp(H,F):null,this.#c(H,f,B,m),this.#e.highlightAll&&this.#f(B),this._resumePageIdx===B&&(this._resumePageIdx=null,this.#m());let k=this._pageMatches[B].length;this._matchesCountTotal+=k,this.#t?k>0&&this.#A():++this.#i===this._linkService.pagesCount&&this.#A()}#d(){if(this._extractTextPromises.length>0)return;let B=Promise.resolve(),H={disableNormalization:!0};for(let O=0,f=this._linkService.pagesCount;O<f;O++){let m=new b.PromiseCapability;this._extractTextPromises[O]=m.promise,B=B.then(()=>this._pdfDocument.getPage(O+1).then(v=>v.getTextContent(H)).then(v=>{let T=[];for(let F of v.items)T.push(F.str),F.hasEOL&&T.push(`
`);[this._pageContents[O],this._pageDiffs[O],this._hasDiacritics[O]]=z(T.join("")),m.resolve()},v=>{console.error(`Unable to get text content for page ${O+1}`,v),this._pageContents[O]="",this._pageDiffs[O]=null,this._hasDiacritics[O]=!1,m.resolve()}))}}#f(B){this._scrollMatches&&this._selected.pageIdx===B&&(this._linkService.page=B+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:B})}#p(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#g(){let B=this.#e.findPrevious,H=this._linkService.page-1,O=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=H,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this.#i=0,this._matchesCountTotal=0,this.#p();for(let v=0;v<O;v++)this._pendingFindMatches.has(v)||(this._pendingFindMatches.add(v),this._extractTextPromises[v].then(()=>{this._pendingFindMatches.delete(v),this.#h(v)}))}if(this.#r.length===0){this.#S(a.FOUND);return}if(this._resumePageIdx)return;let m=this._offset;if(this._pagesToSearch=O,m.matchIdx!==null){let v=this._pageMatches[m.pageIdx].length;if(!B&&m.matchIdx+1<v||B&&m.matchIdx>0){m.matchIdx=B?m.matchIdx-1:m.matchIdx+1,this.#b(!0);return}this.#u(B)}this.#m()}#_(B){let H=this._offset,O=B.length,f=this.#e.findPrevious;return O?(H.matchIdx=f?O-1:0,this.#b(!0),!0):(this.#u(f),H.wrapped&&(H.matchIdx=null,this._pagesToSearch<0)?(this.#b(!1),!0):!1)}#m(){this._resumePageIdx!==null&&console.error("There can only be one pending page.");let B=null;do{let H=this._offset.pageIdx;if(B=this._pageMatches[H],!B){this._resumePageIdx=H;break}}while(!this.#_(B))}#u(B){let H=this._offset,O=this._linkService.pagesCount;H.pageIdx=B?H.pageIdx-1:H.pageIdx+1,H.matchIdx=null,this._pagesToSearch--,(H.pageIdx>=O||H.pageIdx<0)&&(H.pageIdx=B?O-1:0,H.wrapped=!0)}#b(B=!1){let H=a.NOT_FOUND,O=this._offset.wrapped;if(this._offset.wrapped=!1,B){let f=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,H=O?a.WRAPPED:a.FOUND,f!==-1&&f!==this._selected.pageIdx&&this.#f(f)}this.#S(H,this.#e.findPrevious),this._selected.pageIdx!==-1&&(this._scrollMatches=!0,this.#f(this._selected.pageIdx))}#w(B){let H=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||H&&this._pdfDocument!==H||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#S(a.FOUND),this._highlightMatches=!1,this.#p())})}#y(){let{pageIdx:B,matchIdx:H}=this._selected,O=0,f=this._matchesCountTotal;if(H!==-1){for(let m=0;m<B;m++)O+=this._pageMatches[m]?.length||0;O+=H+1}return(O<1||O>f)&&(O=f=0),{current:O,total:f}}#A(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#y()})}#S(B,H=!1){!this.#t&&(this.#i!==this._linkService.pagesCount||B===a.PENDING)||this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:B,previous:H,matchesCount:this.#y(),rawQuery:this.#e?.query??null})}}g.PDFFindController=Q},(c,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.animationStarted=g.VERTICAL_PADDING=g.UNKNOWN_SCALE=g.TextLayerMode=g.SpreadMode=g.SidebarView=g.ScrollMode=g.SCROLLBAR_PADDING=g.RenderingStates=g.ProgressBar=g.PresentationModeState=g.OutputScale=g.MIN_SCALE=g.MAX_SCALE=g.MAX_AUTO_SCALE=g.DEFAULT_SCALE_VALUE=g.DEFAULT_SCALE_DELTA=g.DEFAULT_SCALE=g.CursorTool=g.AutoPrintRegExp=void 0,g.apiPageLayoutToViewerModes=U,g.apiPageModeToSidebarView=j,g.approximateFraction=Y,g.backtrackBeforeAllVisibleElements=O,g.binarySearchFirstItem=Q,g.docStyle=void 0,g.getActiveOrFocusedElement=N,g.getPageSizeInches=H,g.getVisibleElements=f,g.isPortraitOrientation=V,g.isValidRotation=T,g.isValidScrollMode=F,g.isValidSpreadMode=k,g.normalizeWheelEventDelta=v,g.normalizeWheelEventDirection=m,g.parseQueryString=G,g.removeNullCharacters=$,g.roundToDivide=B,g.scrollIntoView=R,g.toggleCheckedBtn=q,g.toggleExpandedBtn=ie,g.watchScroll=I;let C="auto";g.DEFAULT_SCALE_VALUE=C;let w=1;g.DEFAULT_SCALE=w;let E=1.1;g.DEFAULT_SCALE_DELTA=E;let b=.1;g.MIN_SCALE=b;let a=10;g.MAX_SCALE=a;let i=0;g.UNKNOWN_SCALE=i;let t=1.25;g.MAX_AUTO_SCALE=t;let o=40;g.SCROLLBAR_PADDING=o;let s=5;g.VERTICAL_PADDING=s;let n={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};g.RenderingStates=n;let d={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};g.PresentationModeState=d;let h={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};g.SidebarView=h;let y={DISABLE:0,ENABLE:1,ENABLE_PERMISSIONS:2};g.TextLayerMode=y;let l={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};g.ScrollMode=l;let u={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};g.SpreadMode=u;let _={SELECT:0,HAND:1,ZOOM:2};g.CursorTool=_;let S=/\bprint\s*\(/;g.AutoPrintRegExp=S;class D{constructor(){let W=window.devicePixelRatio||1;this.sx=W,this.sy=W}get scaled(){return this.sx!==1||this.sy!==1}}g.OutputScale=D;function R(J,W,K=!1){let X=J.offsetParent;if(!X){console.error("offsetParent is not set -- cannot scroll");return}let Z=J.offsetTop+J.clientTop,ne=J.offsetLeft+J.clientLeft;for(;X.clientHeight===X.scrollHeight&&X.clientWidth===X.scrollWidth||K&&(X.classList.contains("markedContent")||getComputedStyle(X).overflow==="hidden");)if(Z+=X.offsetTop,ne+=X.offsetLeft,X=X.offsetParent,!X)return;W&&(W.top!==void 0&&(Z+=W.top),W.left!==void 0&&(ne+=W.left,X.scrollLeft=ne)),X.scrollTop=Z}function I(J,W){let K=function(ne){Z||(Z=window.requestAnimationFrame(function(){Z=null;let oe=J.scrollLeft,ce=X.lastX;oe!==ce&&(X.right=oe>ce),X.lastX=oe;let he=J.scrollTop,de=X.lastY;he!==de&&(X.down=he>de),X.lastY=he,W(X)}))},X={right:!0,down:!0,lastX:J.scrollLeft,lastY:J.scrollTop,_eventHandler:K},Z=null;return J.addEventListener("scroll",K,!0),X}function G(J){let W=new Map;for(let[K,X]of new URLSearchParams(J))W.set(K.toLowerCase(),X);return W}let z=/[\x01-\x1F]/g;function $(J,W=!1){return typeof J!="string"?(console.error("The argument must be a string."),J):(W&&(J=J.replaceAll(z," ")),J.replaceAll("\0",""))}function Q(J,W,K=0){let X=K,Z=J.length-1;if(Z<0||!W(J[Z]))return J.length;if(W(J[X]))return X;for(;X<Z;){let ne=X+Z>>1,re=J[ne];W(re)?Z=ne:X=ne+1}return X}function Y(J){if(Math.floor(J)===J)return[J,1];let W=1/J,K=8;if(W>K)return[1,K];if(Math.floor(W)===W)return[1,W];let X=J>1?W:J,Z=0,ne=1,re=1,oe=1;for(;;){let he=Z+re,de=ne+oe;if(de>K)break;X<=he/de?(re=he,oe=de):(Z=he,ne=de)}let ce;return X-Z/ne<re/oe-X?ce=X===J?[Z,ne]:[ne,Z]:ce=X===J?[re,oe]:[oe,re],ce}function B(J,W){let K=J%W;return K===0?J:Math.round(J-K+W)}function H({view:J,userUnit:W,rotate:K}){let[X,Z,ne,re]=J,oe=K%180!==0,ce=(ne-X)/72*W,he=(re-Z)/72*W;return{width:oe?he:ce,height:oe?ce:he}}function O(J,W,K){if(J<2)return J;let X=W[J].div,Z=X.offsetTop+X.clientTop;Z>=K&&(X=W[J-1].div,Z=X.offsetTop+X.clientTop);for(let ne=J-2;ne>=0&&(X=W[ne].div,!(X.offsetTop+X.clientTop+X.clientHeight<=Z));--ne)J=ne;return J}function f({scrollEl:J,views:W,sortByVisibility:K=!1,horizontal:X=!1,rtl:Z=!1}){let ne=J.scrollTop,re=ne+J.clientHeight,oe=J.scrollLeft,ce=oe+J.clientWidth;function he(ke){let we=ke.div;return we.offsetTop+we.clientTop+we.clientHeight>ne}function de(ke){let we=ke.div,se=we.offsetLeft+we.clientLeft,te=se+we.clientWidth;return Z?se<ce:te>oe}let fe=[],Me=new Set,Se=W.length,Ie=Q(W,X?de:he);Ie>0&&Ie<Se&&!X&&(Ie=O(Ie,W,ne));let ye=X?ce:-1;for(let ke=Ie;ke<Se;ke++){let we=W[ke],se=we.div,te=se.offsetLeft+se.clientLeft,ee=se.offsetTop+se.clientTop,le=se.clientWidth,pe=se.clientHeight,ve=te+le,_e=ee+pe;if(ye===-1)_e>=re&&(ye=_e);else if((X?te:ee)>ye)break;if(_e<=ne||ee>=re||ve<=oe||te>=ce)continue;let Ge=Math.max(0,ne-ee)+Math.max(0,_e-re),He=Math.max(0,oe-te)+Math.max(0,ve-ce),Be=(pe-Ge)/pe,Ce=(le-He)/le,je=Be*Ce*100|0;fe.push({id:we.id,x:te,y:ee,view:we,percent:je,widthPercent:Ce*100|0}),Me.add(we.id)}let Fe=fe[0],it=fe.at(-1);return K&&fe.sort(function(ke,we){let se=ke.percent-we.percent;return Math.abs(se)>.001?-se:ke.id-we.id}),{first:Fe,last:it,views:fe,ids:Me}}function m(J){let W=Math.hypot(J.deltaX,J.deltaY),K=Math.atan2(J.deltaY,J.deltaX);return-.25*Math.PI<K&&K<.75*Math.PI&&(W=-W),W}function v(J){let W=J.deltaMode,K=m(J),X=30,Z=30;return W===WheelEvent.DOM_DELTA_PIXEL?K/=X*Z:W===WheelEvent.DOM_DELTA_LINE&&(K/=Z),K}function T(J){return Number.isInteger(J)&&J%90===0}function F(J){return Number.isInteger(J)&&Object.values(l).includes(J)&&J!==l.UNKNOWN}function k(J){return Number.isInteger(J)&&Object.values(u).includes(J)&&J!==u.UNKNOWN}function V(J){return J.width<=J.height}let L=new Promise(function(J){window.requestAnimationFrame(J)});g.animationStarted=L;let p=document.documentElement.style;g.docStyle=p;function P(J,W,K){return Math.min(Math.max(J,W),K)}class x{#e=null;#t=null;#i=0;#n=null;#o=!0;constructor(W){this.#e=W.classList,this.#n=W.style}get percent(){return this.#i}set percent(W){if(this.#i=P(W,0,100),isNaN(W)){this.#e.add("indeterminate");return}this.#e.remove("indeterminate"),this.#n.setProperty("--progressBar-percent",`${this.#i}%`)}setWidth(W){if(!W)return;let X=W.parentNode.offsetWidth-W.offsetWidth;X>0&&this.#n.setProperty("--progressBar-end-offset",`${X}px`)}setDisableAutoFetch(W=5e3){isNaN(this.#i)||(this.#t&&clearTimeout(this.#t),this.show(),this.#t=setTimeout(()=>{this.#t=null,this.hide()},W))}hide(){this.#o&&(this.#o=!1,this.#e.add("hidden"))}show(){this.#o||(this.#o=!0,this.#e.remove("hidden"))}}g.ProgressBar=x;function N(){let J=document,W=J.activeElement||J.querySelector(":focus");for(;W?.shadowRoot;)J=W.shadowRoot,W=J.activeElement||J.querySelector(":focus");return W}function U(J){let W=l.VERTICAL,K=u.NONE;switch(J){case"SinglePage":W=l.PAGE;break;case"OneColumn":break;case"TwoPageLeft":W=l.PAGE;case"TwoColumnLeft":K=u.ODD;break;case"TwoPageRight":W=l.PAGE;case"TwoColumnRight":K=u.EVEN;break}return{scrollMode:W,spreadMode:K}}function j(J){switch(J){case"UseNone":return h.NONE;case"UseThumbs":return h.THUMBS;case"UseOutlines":return h.OUTLINE;case"UseAttachments":return h.ATTACHMENTS;case"UseOC":return h.LAYERS}return h.NONE}function q(J,W,K=null){J.classList.toggle("toggled",W),J.setAttribute("aria-checked",W),K?.classList.toggle("hidden",!W)}function ie(J,W,K=null){J.classList.toggle("toggled",W),J.setAttribute("aria-expanded",W),K?.classList.toggle("hidden",!W)}},(c,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.CharacterType=void 0,g.getCharacterType=h,g.getNormalizeWithNFKC=l;let C={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};g.CharacterType=C;function w(u){return u<11904}function E(u){return(u&65408)===0}function b(u){return u>=97&&u<=122||u>=65&&u<=90}function a(u){return u>=48&&u<=57}function i(u){return u===32||u===9||u===13||u===10}function t(u){return u>=13312&&u<=40959||u>=63744&&u<=64255}function o(u){return u>=12448&&u<=12543}function s(u){return u>=12352&&u<=12447}function n(u){return u>=65376&&u<=65439}function d(u){return(u&65408)===3584}function h(u){return w(u)?E(u)?i(u)?C.SPACE:b(u)||a(u)||u===95?C.ALPHA_LETTER:C.PUNCT:d(u)?C.THAI_LETTER:u===160?C.SPACE:C.ALPHA_LETTER:t(u)?C.HAN_LETTER:o(u)?C.KATAKANA_LETTER:s(u)?C.HIRAGANA_LETTER:n(u)?C.HALFWIDTH_KATAKANA_LETTER:C.ALPHA_LETTER}let y;function l(){return y||="\xA0\xA8\xAA\xAF\xB2-\xB5\xB8-\xBA\xBC-\xBE\u0132-\u0133\u013F-\u0140\u0149\u017F\u01C4-\u01CC\u01F1-\u01F3\u02B0-\u02B8\u02D8-\u02DD\u02E0-\u02E4\u0374\u037A\u037E\u0384-\u0385\u0387\u03D0-\u03D6\u03F0-\u03F2\u03F4-\u03F5\u03F9\u0587\u0675-\u0678\u0958-\u095F\u09DC-\u09DD\u09DF\u0A33\u0A36\u0A59-\u0A5B\u0A5E\u0B5C-\u0B5D\u0E33\u0EB3\u0EDC-\u0EDD\u0F0C\u0F43\u0F4D\u0F52\u0F57\u0F5C\u0F69\u10FC\u1D2C-\u1D2E\u1D30-\u1D3A\u1D3C-\u1D4D\u1D4F-\u1D6A\u1D78\u1D9B-\u1DBF\u1E9A-\u1E9B\u1F71\u1F73\u1F75\u1F77\u1F79\u1F7B\u1F7D\u1FBB\u1FBD-\u1FC1\u1FC9\u1FCB\u1FCD-\u1FCF\u1FD3\u1FDB\u1FDD-\u1FDF\u1FE3\u1FEB\u1FED-\u1FEF\u1FF9\u1FFB\u1FFD-\u1FFE\u2000-\u200A\u2011\u2017\u2024-\u2026\u202F\u2033-\u2034\u2036-\u2037\u203C\u203E\u2047-\u2049\u2057\u205F\u2070-\u2071\u2074-\u208E\u2090-\u209C\u20A8\u2100-\u2103\u2105-\u2107\u2109-\u2113\u2115-\u2116\u2119-\u211D\u2120-\u2122\u2124\u2126\u2128\u212A-\u212D\u212F-\u2131\u2133-\u2139\u213B-\u2140\u2145-\u2149\u2150-\u217F\u2189\u222C-\u222D\u222F-\u2230\u2329-\u232A\u2460-\u24EA\u2A0C\u2A74-\u2A76\u2ADC\u2C7C-\u2C7D\u2D6F\u2E9F\u2EF3\u2F00-\u2FD5\u3000\u3036\u3038-\u303A\u309B-\u309C\u309F\u30FF\u3131-\u318E\u3192-\u319F\u3200-\u321E\u3220-\u3247\u3250-\u327E\u3280-\u33FF\uA69C-\uA69D\uA770\uA7F2-\uA7F4\uA7F8-\uA7F9\uAB5C-\uAB5F\uAB69\uF900-\uFA0D\uFA10\uFA12\uFA15-\uFA1E\uFA20\uFA22\uFA25-\uFA26\uFA2A-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB36\uFB38-\uFB3C\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE10-\uFE19\uFE30-\uFE44\uFE47-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE72\uFE74\uFE76-\uFEFC\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6",y}},c=>{c.exports=globalThis.pdfjsLib},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SimpleLinkService=g.PDFLinkService=g.LinkTarget=void 0;var w=C(2);let E="noopener noreferrer nofollow",b={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};g.LinkTarget=b;function a(o,{url:s,target:n,rel:d,enabled:h=!0}={}){if(!s||typeof s!="string")throw new Error('A valid "url" parameter must provided.');h?o.href=o.title=s:(o.href="",o.title=`Disabled: ${s}`,o.onclick=()=>!1);let y="";switch(n){case b.NONE:break;case b.SELF:y="_self";break;case b.BLANK:y="_blank";break;case b.PARENT:y="_parent";break;case b.TOP:y="_top";break}o.target=y,o.rel=typeof d=="string"?d:E}class i{#e=new Map;constructor({eventBus:s,externalLinkTarget:n=null,externalLinkRel:d=null,ignoreDestinationZoom:h=!1}={}){this.eventBus=s,this.externalLinkTarget=n,this.externalLinkRel=d,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=h,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(s,n=null){this.baseUrl=n,this.pdfDocument=s,this.#e.clear()}setViewer(s){this.pdfViewer=s}setHistory(s){this.pdfHistory=s}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(s){this.pdfViewer.currentPageNumber=s}get rotation(){return this.pdfViewer.pagesRotation}set rotation(s){this.pdfViewer.pagesRotation=s}get isInPresentationMode(){return this.pdfViewer.isInPresentationMode}#t(s,n=null,d){let h=d[0],y;if(typeof h=="object"&&h!==null){if(y=this._cachedPageNumber(h),!y){this.pdfDocument.getPageIndex(h).then(l=>{this.cachePageRef(l+1,h),this.#t(s,n,d)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid page reference, for dest="${s}".`)});return}}else if(Number.isInteger(h))y=h+1;else{console.error(`PDFLinkService.#goToDestinationHelper: "${h}" is not a valid destination reference, for dest="${s}".`);return}if(!y||y<1||y>this.pagesCount){console.error(`PDFLinkService.#goToDestinationHelper: "${y}" is not a valid page number, for dest="${s}".`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:n,explicitDest:d,pageNumber:y})),this.pdfViewer.scrollPageIntoView({pageNumber:y,destArray:d,ignoreDestinationZoom:this._ignoreDestinationZoom})}goToDestination(s){return ae(this,null,function*(){if(!this.pdfDocument)return;let n,d;if(typeof s=="string"?(n=s,d=yield this.pdfDocument.getDestination(s)):(n=null,d=yield s),!Array.isArray(d)){console.error(`PDFLinkService.goToDestination: "${d}" is not a valid destination array, for dest="${s}".`);return}this.#t(s,n,d)})}goToPage(s){if(!this.pdfDocument)return;let n=typeof s=="string"&&this.pdfViewer.pageLabelToPageNumber(s)||s|0;if(!(Number.isInteger(n)&&n>0&&n<=this.pagesCount)){console.error(`PDFLinkService.goToPage: "${s}" is not a valid page.`);return}this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(n)),this.pdfViewer.scrollPageIntoView({pageNumber:n})}addLinkAttributes(s,n,d=!1){a(s,{url:n,target:d?b.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(s){if(typeof s=="string"){if(s.length>0)return this.getAnchorUrl("#"+escape(s))}else if(Array.isArray(s)){let n=JSON.stringify(s);if(n.length>0)return this.getAnchorUrl("#"+escape(n))}return this.getAnchorUrl("")}getAnchorUrl(s){return this.baseUrl?this.baseUrl+s:s}setHash(s){if(!this.pdfDocument)return;let n,d;if(s.includes("=")){let h=(0,w.parseQueryString)(s);if(h.has("search")){let y=h.get("search").replaceAll('"',""),l=h.get("phrase")==="true";this.eventBus.dispatch("findfromurlhash",{source:this,query:l?y:y.match(/\S+/g)})}if(h.has("page")&&(n=h.get("page")|0||1),h.has("zoom")){let y=h.get("zoom").split(","),l=y[0],u=parseFloat(l);l.includes("Fit")?l==="Fit"||l==="FitB"?d=[null,{name:l}]:l==="FitH"||l==="FitBH"||l==="FitV"||l==="FitBV"?d=[null,{name:l},y.length>1?y[1]|0:null]:l==="FitR"?y.length!==5?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):d=[null,{name:l},y[1]|0,y[2]|0,y[3]|0,y[4]|0]:console.error(`PDFLinkService.setHash: "${l}" is not a valid zoom value.`):d=[null,{name:"XYZ"},y.length>1?y[1]|0:null,y.length>2?y[2]|0:null,u?u/100:l]}d?this.pdfViewer.scrollPageIntoView({pageNumber:n||this.page,destArray:d,allowNegativeOffset:!0}):n&&(this.page=n),h.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:h.get("pagemode")}),h.has("nameddest")&&this.goToDestination(h.get("nameddest"))}else{d=unescape(s);try{d=JSON.parse(d),Array.isArray(d)||(d=d.toString())}catch{}if(typeof d=="string"||i.#i(d)){this.goToDestination(d);return}console.error(`PDFLinkService.setHash: "${unescape(s)}" is not a valid destination.`)}}executeNamedAction(s){switch(s){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1;break;default:break}this.eventBus.dispatch("namedaction",{source:this,action:s})}executeSetOCGState(s){return ae(this,null,function*(){let n=this.pdfDocument,d=yield this.pdfViewer.optionalContentConfigPromise;if(n!==this.pdfDocument)return;let h;for(let y of s.state){switch(y){case"ON":case"OFF":case"Toggle":h=y;continue}switch(h){case"ON":d.setVisibility(y,!0);break;case"OFF":d.setVisibility(y,!1);break;case"Toggle":let l=d.getGroup(y);l&&d.setVisibility(y,!l.visible);break}}this.pdfViewer.optionalContentConfigPromise=Promise.resolve(d)})}cachePageRef(s,n){if(!n)return;let d=n.gen===0?`${n.num}R`:`${n.num}R${n.gen}`;this.#e.set(d,s)}_cachedPageNumber(s){if(!s)return null;let n=s.gen===0?`${s.num}R`:`${s.num}R${s.gen}`;return this.#e.get(n)||null}static#i(s){if(!Array.isArray(s))return!1;let n=s.length;if(n<2)return!1;let d=s[0];if(!(typeof d=="object"&&Number.isInteger(d.num)&&Number.isInteger(d.gen))&&!(Number.isInteger(d)&&d>=0))return!1;let h=s[1];if(!(typeof h=="object"&&typeof h.name=="string"))return!1;let y=!0;switch(h.name){case"XYZ":if(n!==5)return!1;break;case"Fit":case"FitB":return n===2;case"FitH":case"FitBH":case"FitV":case"FitBV":if(n!==3)return!1;break;case"FitR":if(n!==6)return!1;y=!1;break;default:return!1}for(let l=2;l<n;l++){let u=s[l];if(!(typeof u=="number"||y&&u===null))return!1}return!0}}g.PDFLinkService=i;class t{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(s){}get rotation(){return 0}set rotation(s){}get isInPresentationMode(){return!1}goToDestination(s){return ae(this,null,function*(){})}goToPage(s){}addLinkAttributes(s,n,d=!1){a(s,{url:n,enabled:this.externalLinkEnabled})}getDestinationHash(s){return"#"}getAnchorUrl(s){return"#"}setHash(s){}executeNamedAction(s){}executeSetOCGState(s){}cachePageRef(s,n){}}g.SimpleLinkService=t},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationLayerBuilder=void 0;var w=C(4),E=C(7),b=C(2);class a{#e=null;constructor({pageDiv:t,pdfPage:o,linkService:s,downloadManager:n,annotationStorage:d=null,imageResourcesPath:h="",renderForms:y=!0,l10n:l=E.NullL10n,enableScripting:u=!1,hasJSActionsPromise:_=null,fieldObjectsPromise:S=null,annotationCanvasMap:D=null,accessibilityManager:R=null}){this.pageDiv=t,this.pdfPage=o,this.linkService=s,this.downloadManager=n,this.imageResourcesPath=h,this.renderForms=y,this.l10n=l,this.annotationStorage=d,this.enableScripting=u,this._hasJSActionsPromise=_||Promise.resolve(!1),this._fieldObjectsPromise=S||Promise.resolve(null),this._annotationCanvasMap=D,this._accessibilityManager=R,this.annotationLayer=null,this.div=null,this._cancelled=!1,this._eventBus=s.eventBus}render(t,o="display"){return ae(this,null,function*(){if(this.div){if(this._cancelled||!this.annotationLayer)return;this.annotationLayer.update({viewport:t.clone({dontFlip:!0})});return}let[s,n,d]=yield Promise.all([this.pdfPage.getAnnotations({intent:o}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled)return;let h=this.div=document.createElement("div");if(h.className="annotationLayer",this.pageDiv.append(h),s.length===0){this.hide();return}this.annotationLayer=new w.AnnotationLayer({div:h,accessibilityManager:this._accessibilityManager,annotationCanvasMap:this._annotationCanvasMap,l10n:this.l10n,page:this.pdfPage,viewport:t.clone({dontFlip:!0})}),yield this.annotationLayer.render({annotations:s,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:n,fieldObjects:d}),this.linkService.isInPresentationMode&&this.#t(b.PresentationModeState.FULLSCREEN),this.#e||(this.#e=y=>{this.#t(y.state)},this._eventBus?._on("presentationmodechanged",this.#e))})}cancel(){this._cancelled=!0,this.#e&&(this._eventBus?._off("presentationmodechanged",this.#e),this.#e=null)}hide(){this.div&&(this.div.hidden=!0)}#t(t){if(!this.div)return;let o=!1;switch(t){case b.PresentationModeState.FULLSCREEN:o=!0;break;case b.PresentationModeState.NORMAL:break;default:return}for(let s of this.div.childNodes)s.hasAttribute("data-internal-link")||(s.inert=o)}}g.AnnotationLayerBuilder=a},(c,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.NullL10n=void 0,g.getL10nFallback=w;let C={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};C.print_progress_percent="{{progress}}%";function w(i,t){switch(i){case"find_match_count":i=`find_match_count[${t.total===1?"one":"other"}]`;break;case"find_match_count_limit":i=`find_match_count_limit[${t.limit===1?"one":"other"}]`;break}return C[i]||""}function E(i,t){return t?i.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(o,s)=>s in t?t[s]:"{{"+s+"}}"):i}let b={getLanguage(){return ae(this,null,function*(){return"en-us"})},getDirection(){return ae(this,null,function*(){return"ltr"})},get(s){return ae(this,arguments,function*(i,t=null,o=w(i,t)){return E(o,t)})},translate(i){return ae(this,null,function*(){})}};g.NullL10n=b},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.DownloadManager=void 0;var w=C(4);function E(a,i){let t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=a,t.target="_parent","download"in t&&(t.download=i),(document.body||document.documentElement).append(t),t.click(),t.remove()}class b{#e=new WeakMap;downloadUrl(i,t,o){if(!(0,w.createValidAbsoluteUrl)(i,"http://example.com")){console.error(`downloadUrl - not a valid URL: ${i}`);return}E(i+"#pdfjs.action=download",t)}downloadData(i,t,o){let s=URL.createObjectURL(new Blob([i],{type:o}));E(s,t)}openOrDownloadData(i,t,o){let n=(0,w.isPdfFile)(o)?"application/pdf":"";return this.downloadData(t,o,n),!1}download(i,t,o,s){let n=URL.createObjectURL(i);E(n,o)}}g.DownloadManager=b},(c,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.WaitOnType=g.EventBus=g.AutomationEventBus=void 0,g.waitOnEventOrTimeout=w;let C={EVENT:"event",TIMEOUT:"timeout"};g.WaitOnType=C;function w({target:a,name:i,delay:t=0}){return new Promise(function(o,s){if(typeof a!="object"||!(i&&typeof i=="string")||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function n(l){a instanceof E?a._off(i,d):a.removeEventListener(i,d),y&&clearTimeout(y),o(l)}let d=n.bind(null,C.EVENT);a instanceof E?a._on(i,d):a.addEventListener(i,d);let h=n.bind(null,C.TIMEOUT),y=setTimeout(h,t)})}class E{#e=Object.create(null);on(i,t,o=null){this._on(i,t,{external:!0,once:o?.once})}off(i,t,o=null){this._off(i,t,{external:!0,once:o?.once})}dispatch(i,t){let o=this.#e[i];if(!o||o.length===0)return;let s;for(let{listener:n,external:d,once:h}of o.slice(0)){if(h&&this._off(i,n),d){(s||=[]).push(n);continue}n(t)}if(s){for(let n of s)n(t);s=null}}_on(i,t,o=null){(this.#e[i]||=[]).push({listener:t,external:o?.external===!0,once:o?.once===!0})}_off(i,t,o=null){let s=this.#e[i];if(s){for(let n=0,d=s.length;n<d;n++)if(s[n].listener===t){s.splice(n,1);return}}}}g.EventBus=E;class b extends E{dispatch(i,t){throw new Error("Not implemented: AutomationEventBus.dispatch")}}g.AutomationEventBus=b},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericL10n=void 0,C(11);var w=C(7);let E={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};function b(i){return E[i?.toLowerCase()]||i}class a{constructor(t){let{webL10n:o}=document;this._lang=t,this._ready=new Promise((s,n)=>{o.setLanguage(b(t),()=>{s(o)})})}getLanguage(){return ae(this,null,function*(){return(yield this._ready).getLanguage()})}getDirection(){return ae(this,null,function*(){return(yield this._ready).getDirection()})}get(n){return ae(this,arguments,function*(t,o=null,s=(0,w.getL10nFallback)(t,o)){return(yield this._ready).get(t,o,s)})}translate(t){return ae(this,null,function*(){return(yield this._ready).translate(t)})}}g.GenericL10n=a},()=>{document.webL10n=function(c,g){var C={},w="",E="textContent",b="",a={},i="loading",t=!0;function o(){return g.querySelectorAll('link[type="application/l10n"]')}function s(){var $=g.querySelector('script[type="application/l10n"]');return $?JSON.parse($.innerHTML):null}function n($){return $?$.querySelectorAll("*[data-l10n-id]"):[]}function d($){if(!$)return{};var Q=$.getAttribute("data-l10n-id"),Y=$.getAttribute("data-l10n-args"),B={};if(Y)try{B=JSON.parse(Y)}catch{console.warn("could not parse arguments for #"+Q)}return{id:Q,args:B}}function h($,Q,Y){Q=Q||function(O){},Y=Y||function(){};var B=new XMLHttpRequest;B.open("GET",$,t),B.overrideMimeType&&B.overrideMimeType("text/plain; charset=utf-8"),B.onreadystatechange=function(){B.readyState==4&&(B.status==200||B.status===0?Q(B.responseText):Y())},B.onerror=Y,B.ontimeout=Y;try{B.send(null)}catch{Y()}}function y($,Q,Y,B){var H=$.replace(/[^\/]*$/,"")||"./";function O(m){return m.lastIndexOf("\\")<0?m:m.replace(/\\\\/g,"\\").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}function f(m,v){var T={},F=/^\s*|\s*$/,k=/^\s*#|^\s*$/,V=/^\s*\[(.*)\]\s*$/,L=/^\s*@import\s+url\((.*)\)\s*$/i,p=/^([^=\s]*)\s*=\s*(.+)$/;function P(N,U,j){var q=N.replace(F,"").split(/[\r\n]+/),ie="*",J=Q.split("-",1)[0],W=!1,K="";function X(){for(;;){if(!q.length){j();return}var Z=q.shift();if(!k.test(Z)){if(U){if(K=V.exec(Z),K){ie=K[1].toLowerCase(),W=ie!=="*"&&ie!==Q&&ie!==J;continue}else if(W)continue;if(K=L.exec(Z),K){x(H+K[1],X);return}}var ne=Z.match(p);ne&&ne.length==3&&(T[ne[1]]=O(ne[2]))}}}X()}function x(N,U){h(N,function(j){P(j,!1,U)},function(){console.warn(N+" not found."),U()})}P(m,!0,function(){v(T)})}h($,function(m){w+=m,f(m,function(v){for(var T in v){var F,k,V=T.lastIndexOf(".");V>0?(F=T.substring(0,V),k=T.substring(V+1)):(F=T,k=E),C[F]||(C[F]={}),C[F][k]=v[T]}Y&&Y()})},B)}function l($,Q){$&&($=$.toLowerCase()),Q=Q||function(){},u(),b=$;var Y=o(),B=Y.length;if(B===0){var H=s();if(H&&H.locales&&H.default_locale){if(console.log("using the embedded JSON directory, early way out"),C=H.locales[$],!C){var O=H.default_locale.toLowerCase();for(var f in H.locales)if(f=f.toLowerCase(),f===$){C=H.locales[$];break}else f===O&&(C=H.locales[O])}Q()}else console.log("no resource to load, early way out");i="complete";return}var m=null,v=0;m=function(){v++,v>=B&&(Q(),i="complete")};function T(V){var L=V.href;this.load=function(p,P){y(L,p,P,function(){console.warn(L+" not found."),console.warn('"'+p+'" resource not found'),b="",P()})}}for(var F=0;F<B;F++){var k=new T(Y[F]);k.load($,m)}}function u(){C={},w="",b=""}function _($){var Q={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3};function Y(f,m){return m.indexOf(f)!==-1}function B(f,m,v){return m<=f&&f<=v}var H={0:function(f){return"other"},1:function(f){return B(f%100,3,10)?"few":f===0?"zero":B(f%100,11,99)?"many":f==2?"two":f==1?"one":"other"},2:function(f){return f!==0&&f%10===0?"many":f==2?"two":f==1?"one":"other"},3:function(f){return f==1?"one":"other"},4:function(f){return B(f,0,1)?"one":"other"},5:function(f){return B(f,0,2)&&f!=2?"one":"other"},6:function(f){return f===0?"zero":f%10==1&&f%100!=11?"one":"other"},7:function(f){return f==2?"two":f==1?"one":"other"},8:function(f){return B(f,3,6)?"few":B(f,7,10)?"many":f==2?"two":f==1?"one":"other"},9:function(f){return f===0||f!=1&&B(f%100,1,19)?"few":f==1?"one":"other"},10:function(f){return B(f%10,2,9)&&!B(f%100,11,19)?"few":f%10==1&&!B(f%100,11,19)?"one":"other"},11:function(f){return B(f%10,2,4)&&!B(f%100,12,14)?"few":f%10===0||B(f%10,5,9)||B(f%100,11,14)?"many":f%10==1&&f%100!=11?"one":"other"},12:function(f){return B(f,2,4)?"few":f==1?"one":"other"},13:function(f){return B(f%10,2,4)&&!B(f%100,12,14)?"few":f!=1&&B(f%10,0,1)||B(f%10,5,9)||B(f%100,12,14)?"many":f==1?"one":"other"},14:function(f){return B(f%100,3,4)?"few":f%100==2?"two":f%100==1?"one":"other"},15:function(f){return f===0||B(f%100,2,10)?"few":B(f%100,11,19)?"many":f==1?"one":"other"},16:function(f){return f%10==1&&f!=11?"one":"other"},17:function(f){return f==3?"few":f===0?"zero":f==6?"many":f==2?"two":f==1?"one":"other"},18:function(f){return f===0?"zero":B(f,0,2)&&f!==0&&f!=2?"one":"other"},19:function(f){return B(f,2,10)?"few":B(f,0,1)?"one":"other"},20:function(f){return(B(f%10,3,4)||f%10==9)&&!(B(f%100,10,19)||B(f%100,70,79)||B(f%100,90,99))?"few":f%1e6===0&&f!==0?"many":f%10==2&&!Y(f%100,[12,72,92])?"two":f%10==1&&!Y(f%100,[11,71,91])?"one":"other"},21:function(f){return f===0?"zero":f==1?"one":"other"},22:function(f){return B(f,0,1)||B(f,11,99)?"one":"other"},23:function(f){return B(f%10,1,2)||f%20===0?"one":"other"},24:function(f){return B(f,3,10)||B(f,13,19)?"few":Y(f,[2,12])?"two":Y(f,[1,11])?"one":"other"}},O=Q[$.replace(/-.*$/,"")];return O in H?H[O]:(console.warn("plural form unknown for ["+$+"]"),function(){return"other"})}a.plural=function($,Q,Y,B){var H=parseFloat(Q);if(isNaN(H)||B!=E)return $;a._pluralRules||(a._pluralRules=_(b));var O="["+a._pluralRules(H)+"]";return H===0&&Y+"[zero]"in C?$=C[Y+"[zero]"][B]:H==1&&Y+"[one]"in C?$=C[Y+"[one]"][B]:H==2&&Y+"[two]"in C?$=C[Y+"[two]"][B]:Y+O in C?$=C[Y+O][B]:Y+"[other]"in C&&($=C[Y+"[other]"][B]),$};function S($,Q,Y){var B=C[$];if(!B){if(console.warn("#"+$+" is undefined."),!Y)return null;B=Y}var H={};for(var O in B){var f=B[O];f=D(f,Q,$,O),f=R(f,Q,$),H[O]=f}return H}function D($,Q,Y,B){var H=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/,O=H.exec($);if(!O||!O.length)return $;var f=O[1],m=O[2],v;if(Q&&m in Q?v=Q[m]:m in C&&(v=C[m]),f in a){var T=a[f];$=T($,v,Y,B)}return $}function R($,Q,Y){var B=/\{\{\s*(.+?)\s*\}\}/g;return $.replace(B,function(H,O){return Q&&O in Q?Q[O]:O in C?C[O]:(console.log("argument {{"+O+"}} for #"+Y+" is undefined."),H)})}function I($){var Q=d($);if(Q.id){var Y=S(Q.id,Q.args);if(!Y){console.warn("#"+Q.id+" is undefined.");return}if(Y[E]){if(G($)===0)$[E]=Y[E];else{for(var B=$.childNodes,H=!1,O=0,f=B.length;O<f;O++)B[O].nodeType===3&&/\S/.test(B[O].nodeValue)&&(H?B[O].nodeValue="":(B[O].nodeValue=Y[E],H=!0));if(!H){var m=g.createTextNode(Y[E]);$.prepend(m)}}delete Y[E]}for(var v in Y)$[v]=Y[v]}}function G($){if($.children)return $.children.length;if(typeof $.childElementCount<"u")return $.childElementCount;for(var Q=0,Y=0;Y<$.childNodes.length;Y++)Q+=$.nodeType===1?1:0;return Q}function z($){$=$||g.documentElement;for(var Q=n($),Y=Q.length,B=0;B<Y;B++)I(Q[B]);I($)}return{get:function($,Q,Y){var B=$.lastIndexOf("."),H=E;B>0&&(H=$.substring(B+1),$=$.substring(0,B));var O;Y&&(O={},O[H]=Y);var f=S($,Q,O);return f&&H in f?f[H]:"{{"+$+"}}"},getData:function(){return C},getText:function(){return w},getLanguage:function(){return b},setLanguage:function($,Q){l($,function(){Q&&Q()})},getDirection:function(){var $=["ar","he","fa","ps","ur"],Q=b.split("-",1)[0];return $.indexOf(Q)>=0?"rtl":"ltr"},translate:z,getReadyState:function(){return i},ready:function($){if($)i=="complete"||i=="interactive"?c.setTimeout(function(){$()}):g.addEventListener&&g.addEventListener("localized",function Q(){g.removeEventListener("localized",Q),$()});else return}}}(window,document)},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFHistory=void 0,g.isDestArraysEqual=n,g.isDestHashesEqual=s;var w=C(2),E=C(9);let b=1e3,a=50,i=1e3;function t(){return document.location.hash}class o{constructor({linkService:h,eventBus:y}){this.linkService=h,this.eventBus=y,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",l=>{this._isPagesLoaded=!!l.pagesCount},{once:!0})})}initialize({fingerprint:h,resetHistory:y=!1,updateUrl:l=!1}){if(!h||typeof h!="string"){console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();let u=this._fingerprint!==""&&this._fingerprint!==h;this._fingerprint=h,this._updateUrl=l===!0,this._initialized=!0,this._bindEvents();let _=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=t(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(_,!0)||y){let{hash:D,page:R,rotation:I}=this._parseCurrentHash(!0);if(!D||u||y){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:D,page:R,rotation:I},!0);return}let S=_.destination;this._updateInternalState(S,_.uid,!0),S.rotation!==void 0&&(this._initialRotation=S.rotation),S.dest?(this._initialBookmark=JSON.stringify(S.dest),this._destination.page=null):S.hash?this._initialBookmark=S.hash:S.page&&(this._initialBookmark=`page=${S.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:h=null,explicitDest:y,pageNumber:l}){if(!this._initialized)return;if(h&&typeof h!="string"){console.error(`PDFHistory.push: "${h}" is not a valid namedDest parameter.`);return}else if(Array.isArray(y)){if(!this._isValidPage(l)&&(l!==null||this._destination)){console.error(`PDFHistory.push: "${l}" is not a valid pageNumber parameter.`);return}}else{console.error(`PDFHistory.push: "${y}" is not a valid explicitDest parameter.`);return}let u=h||JSON.stringify(y);if(!u)return;let _=!1;if(this._destination&&(s(this._destination.hash,u)||n(this._destination.dest,y))){if(this._destination.page)return;_=!0}this._popStateInProgress&&!_||(this._pushOrReplaceState({dest:y,hash:u,page:l,rotation:this.linkService.rotation},_),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(h){if(this._initialized){if(!this._isValidPage(h)){console.error(`PDFHistory.pushPage: "${h}" is not a valid page number.`);return}this._destination?.page!==h&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${h}`,page:h,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;let h=window.history.state;this._isValidState(h)&&h.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;let h=window.history.state;this._isValidState(h)&&h.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(h,y=!1){let l=y||!this._destination,u={fingerprint:this._fingerprint,uid:l?this._uid:this._uid+1,destination:h};this._updateInternalState(h,u.uid);let _;if(this._updateUrl&&h?.hash){let S=document.location.href.split("#")[0];S.startsWith("file://")||(_=`${S}#${h.hash}`)}l?window.history.replaceState(u,"",_):window.history.pushState(u,"",_)}_tryPushCurrentPosition(h=!1){if(!this._position)return;let y=this._position;if(h&&(y=Object.assign(Object.create(null),this._position),y.temporary=!0),!this._destination){this._pushOrReplaceState(y);return}if(this._destination.temporary){this._pushOrReplaceState(y,!0);return}if(this._destination.hash===y.hash||!this._destination.page&&(a<=0||this._numPositionUpdates<=a))return;let l=!1;if(this._destination.page>=y.first&&this._destination.page<=y.page){if(this._destination.dest!==void 0||!this._destination.first)return;l=!0}this._pushOrReplaceState(y,l)}_isValidPage(h){return Number.isInteger(h)&&h>0&&h<=this.linkService.pagesCount}_isValidState(h,y=!1){if(!h)return!1;if(h.fingerprint!==this._fingerprint)if(y){if(typeof h.fingerprint!="string"||h.fingerprint.length!==this._fingerprint.length)return!1;let[l]=performance.getEntriesByType("navigation");if(l?.type!=="reload")return!1}else return!1;return!(!Number.isInteger(h.uid)||h.uid<0||h.destination===null||typeof h.destination!="object")}_updateInternalState(h,y,l=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),l&&h?.temporary&&delete h.temporary,this._destination=h,this._uid=y,this._maxUid=Math.max(this._maxUid,y),this._numPositionUpdates=0}_parseCurrentHash(h=!1){let y=unescape(t()).substring(1),l=(0,w.parseQueryString)(y),u=l.get("nameddest")||"",_=l.get("page")|0;return(!this._isValidPage(_)||h&&u.length>0)&&(_=null),{hash:y,page:_,rotation:this.linkService.rotation}}_updateViewarea({location:h}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:h.pdfOpenParams.substring(1),page:this.linkService.page,first:h.pageNumber,rotation:h.rotation},!this._popStateInProgress&&(a>0&&this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,i>0&&(this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},i)))}_popState({state:h}){let y=t(),l=this._currentHash!==y;if(this._currentHash=y,!h){this._uid++;let{hash:_,page:S,rotation:D}=this._parseCurrentHash();this._pushOrReplaceState({hash:_,page:S,rotation:D},!0);return}if(!this._isValidState(h))return;this._popStateInProgress=!0,l&&(this._blockHashChange++,(0,E.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:b}).then(()=>{this._blockHashChange--}));let u=h.destination;this._updateInternalState(u,h.uid,!0),(0,w.isValidRotation)(u.rotation)&&(this.linkService.rotation=u.rotation),u.dest?this.linkService.goToDestination(u.dest):u.hash?this.linkService.setHash(u.hash):u.page&&(this.linkService.page=u.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}g.PDFHistory=o;function s(d,h){return typeof d!="string"||typeof h!="string"?!1:d===h||(0,w.parseQueryString)(d).get("nameddest")===h}function n(d,h){function y(l,u){if(typeof l!=typeof u||Array.isArray(l)||Array.isArray(u))return!1;if(l!==null&&typeof l=="object"&&u!==null){if(Object.keys(l).length!==Object.keys(u).length)return!1;for(let _ in l)if(!y(l[_],u[_]))return!1;return!0}return l===u||Number.isNaN(l)&&Number.isNaN(u)}if(!(Array.isArray(d)&&Array.isArray(h))||d.length!==h.length)return!1;for(let l=0,u=d.length;l<u;l++)if(!y(d[l],h[l]))return!1;return!0}},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFPageView=void 0;var w=C(4),E=C(2),b=C(14),a=C(6),i=C(15),t=C(7),o=C(5),s=C(16),n=C(17),d=C(18),h=C(19),y=C(20);let l=i.compatibilityParams.maxCanvasPixels||16777216,u=()=>({annotationEditorUIManager:null,annotationStorage:null,downloadManager:null,enableScripting:!1,fieldObjectsPromise:null,findController:null,hasJSActionsPromise:null,get linkService(){return new o.SimpleLinkService}});class _{#e=w.AnnotationMode.ENABLE_FORMS;#t=!1;#i=null;#n=null;#o=null;#r=null;#a=E.RenderingStates.INITIAL;#l=E.TextLayerMode.ENABLE;#c={directDrawing:!0,initialOptionalContent:!0,regularAnnotations:!0};#s=new WeakMap;constructor(D){let R=D.container,I=D.defaultViewport;this.id=D.id,this.renderingId="page"+this.id,this.#i=D.layerProperties||u,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=D.scale||E.DEFAULT_SCALE,this.viewport=I,this.pdfPageRotate=I.rotation,this._optionalContentConfigPromise=D.optionalContentConfigPromise||null,this.#l=D.textLayerMode??E.TextLayerMode.ENABLE,this.#e=D.annotationMode??w.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=D.imageResourcesPath||"",this.isOffscreenCanvasSupported=D.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=D.maxCanvasPixels??l,this.pageColors=D.pageColors||null,this.eventBus=D.eventBus,this.renderingQueue=D.renderingQueue,this.l10n=D.l10n||t.NullL10n,this.renderTask=null,this.resume=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._container=R,D.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),this.maxCanvasPixels=0),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;let G=document.createElement("div");if(G.className="page",G.setAttribute("data-page-number",this.id),G.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(z=>{G.setAttribute("aria-label",z)}),this.div=G,this.#h(),R?.append(G),this._isStandalone){R?.style.setProperty("--scale-factor",this.scale*w.PixelsPerInch.PDF_TO_CSS_UNITS);let{optionalContentConfigPromise:z}=D;z&&z.then($=>{z===this._optionalContentConfigPromise&&(this.#c.initialOptionalContent=$.hasInitialVisibility)})}}get renderingState(){return this.#a}set renderingState(D){if(D!==this.#a)switch(this.#a=D,this.#n&&(clearTimeout(this.#n),this.#n=null),D){case E.RenderingStates.PAUSED:this.div.classList.remove("loading");break;case E.RenderingStates.RUNNING:this.div.classList.add("loadingIcon"),this.#n=setTimeout(()=>{this.div.classList.add("loading"),this.#n=null},0);break;case E.RenderingStates.INITIAL:case E.RenderingStates.FINISHED:this.div.classList.remove("loadingIcon","loading");break}}#h(){let{viewport:D}=this;if(this.pdfPage){if(this.#o===D.rotation)return;this.#o=D.rotation}(0,w.setLayerDimensions)(this.div,D,!0,!1)}setPdfPage(D){this._isStandalone&&(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&this._container?.style.setProperty("--hcm-highligh-filter",D.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight")),this.pdfPage=D,this.pdfPageRotate=D.rotate;let R=(this.rotation+this.pdfPageRotate)%360;this.viewport=D.getViewport({scale:this.scale*w.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:R}),this.#h(),this.reset()}destroy(){this.reset(),this.pdfPage?.cleanup()}get _textHighlighter(){return(0,w.shadow)(this,"_textHighlighter",new d.TextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus,findController:this.#i().findController}))}#d(){return ae(this,null,function*(){let D=null;try{yield this.annotationLayer.render(this.viewport,"display")}catch(R){console.error(`#renderAnnotationLayer: "${R}".`),D=R}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:D})}})}#f(){return ae(this,null,function*(){let D=null;try{yield this.annotationEditorLayer.render(this.viewport,"display")}catch(R){console.error(`#renderAnnotationEditorLayer: "${R}".`),D=R}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:D})}})}#p(){return ae(this,null,function*(){let D=null;try{let R=yield this.xfaLayer.render(this.viewport,"display");R?.textDivs&&this._textHighlighter&&this.#m(R.textDivs)}catch(R){console.error(`#renderXfaLayer: "${R}".`),D=R}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:D})}})}#g(){return ae(this,null,function*(){let{pdfPage:D,textLayer:R,viewport:I}=this;if(!R)return;let G=null;try{if(!R.renderingDone){let z=D.streamTextContent({includeMarkedContent:!0,disableNormalization:!0});R.setTextContentSource(z)}yield R.render(I)}catch(z){if(z instanceof w.AbortException)return;console.error(`#renderTextLayer: "${z}".`),G=z}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.id,numTextDivs:R.numTextDivs,error:G}),this.#_()})}#_(){return ae(this,null,function*(){if(!this.textLayer)return;this.structTreeLayer||=new s.StructTreeLayerBuilder;let D=yield this.structTreeLayer.renderingDone?null:this.pdfPage.getStructTree(),R=this.structTreeLayer?.render(D);R&&this.canvas?.append(R),this.structTreeLayer?.show()})}#m(D){return ae(this,null,function*(){let R=yield this.pdfPage.getTextContent(),I=[];for(let G of R.items)I.push(G.str);this._textHighlighter.setTextMapping(D,I),this._textHighlighter.enable()})}_resetZoomLayer(D=!1){if(!this.zoomLayer)return;let R=this.zoomLayer.firstChild;this.#s.delete(R),R.width=0,R.height=0,D&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:D=!1,keepAnnotationLayer:R=!1,keepAnnotationEditorLayer:I=!1,keepXfaLayer:G=!1,keepTextLayer:z=!1}={}){this.cancelRendering({keepAnnotationLayer:R,keepAnnotationEditorLayer:I,keepXfaLayer:G,keepTextLayer:z}),this.renderingState=E.RenderingStates.INITIAL;let $=this.div,Q=$.childNodes,Y=D&&this.zoomLayer||null,B=R&&this.annotationLayer?.div||null,H=I&&this.annotationEditorLayer?.div||null,O=G&&this.xfaLayer?.div||null,f=z&&this.textLayer?.div||null;for(let m=Q.length-1;m>=0;m--){let v=Q[m];switch(v){case Y:case B:case H:case O:case f:continue}v.remove()}$.removeAttribute("data-loaded"),B&&this.annotationLayer.hide(),H&&this.annotationEditorLayer.hide(),O&&this.xfaLayer.hide(),f&&this.textLayer.hide(),this.structTreeLayer?.hide(),Y||(this.canvas&&(this.#s.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer())}update({scale:D=0,rotation:R=null,optionalContentConfigPromise:I=null,drawingDelay:G=-1}){this.scale=D||this.scale,typeof R=="number"&&(this.rotation=R),I instanceof Promise&&(this._optionalContentConfigPromise=I,I.then($=>{I===this._optionalContentConfigPromise&&(this.#c.initialOptionalContent=$.hasInitialVisibility)})),this.#c.directDrawing=!0;let z=(this.rotation+this.pdfPageRotate)%360;if(this.viewport=this.viewport.clone({scale:this.scale*w.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:z}),this.#h(),this._isStandalone&&this._container?.style.setProperty("--scale-factor",this.viewport.scale),this.canvas){let $=!1;if(this.#t){if(this.maxCanvasPixels===0)$=!0;else if(this.maxCanvasPixels>0){let{width:Y,height:B}=this.viewport,{sx:H,sy:O}=this.outputScale;$=(Math.floor(Y)*H|0)*(Math.floor(B)*O|0)>this.maxCanvasPixels}}let Q=!$&&G>=0&&G<1e3;if(Q||$){if(Q&&this.renderingState!==E.RenderingStates.FINISHED&&(this.cancelRendering({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0,cancelExtraDelay:G}),this.renderingState=E.RenderingStates.FINISHED,this.#c.directDrawing=!1),this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0,redrawTextLayer:!Q,hideTextLayer:Q}),Q)return;this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this.#r});return}!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0,keepTextLayer:!0})}cancelRendering({keepAnnotationLayer:D=!1,keepAnnotationEditorLayer:R=!1,keepXfaLayer:I=!1,keepTextLayer:G=!1,cancelExtraDelay:z=0}={}){this.renderTask&&(this.renderTask.cancel(z),this.renderTask=null),this.resume=null,this.textLayer&&(!G||!this.textLayer.div)&&(this.textLayer.cancel(),this.textLayer=null),this.structTreeLayer&&!this.textLayer&&(this.structTreeLayer=null),this.annotationLayer&&(!D||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!R||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!I||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this._textHighlighter?.disable())}cssTransform({target:D,redrawAnnotationLayer:R=!1,redrawAnnotationEditorLayer:I=!1,redrawXfaLayer:G=!1,redrawTextLayer:z=!1,hideTextLayer:$=!1}){if(!D.hasAttribute("zooming")){D.setAttribute("zooming",!0);let{style:Y}=D;Y.width=Y.height=""}let Q=this.#s.get(D);if(this.viewport!==Q){let Y=this.viewport.rotation-Q.rotation,B=Math.abs(Y),H=1,O=1;if(B===90||B===270){let{width:f,height:m}=this.viewport;H=m/f,O=f/m}D.style.transform=`rotate(${Y}deg) scale(${H}, ${O})`}R&&this.annotationLayer&&this.#d(),I&&this.annotationEditorLayer&&this.#f(),G&&this.xfaLayer&&this.#p(),this.textLayer&&($?(this.textLayer.hide(),this.structTreeLayer?.hide()):z&&this.#g())}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(D,R){return this.viewport.convertToPdfPoint(D,R)}#u(D,R=null){return ae(this,null,function*(){if(D===this.renderTask&&(this.renderTask=null),R instanceof w.RenderingCancelledException){this.#r=null;return}if(this.#r=R,this.renderingState=E.RenderingStates.FINISHED,this._resetZoomLayer(!0),this.#c.regularAnnotations=!D.separateAnnots,this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!1,timestamp:performance.now(),error:this.#r}),R)throw R})}draw(){return ae(this,null,function*(){this.renderingState!==E.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());let{div:D,l10n:R,pageColors:I,pdfPage:G,viewport:z}=this;if(!G)throw this.renderingState=E.RenderingStates.FINISHED,new Error("pdfPage is not loaded");this.renderingState=E.RenderingStates.RUNNING;let $=document.createElement("div");if($.classList.add("canvasWrapper"),D.append($),!this.textLayer&&this.#l!==E.TextLayerMode.DISABLE&&!G.isPureXfa&&(this._accessibilityManager||=new n.TextAccessibilityManager,this.textLayer=new h.TextLayerBuilder({highlighter:this._textHighlighter,accessibilityManager:this._accessibilityManager,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,enablePermissions:this.#l===E.TextLayerMode.ENABLE_PERMISSIONS}),D.append(this.textLayer.div)),!this.annotationLayer&&this.#e!==w.AnnotationMode.DISABLE){let{annotationStorage:x,downloadManager:N,enableScripting:U,fieldObjectsPromise:j,hasJSActionsPromise:q,linkService:ie}=this.#i();this._annotationCanvasMap||=new Map,this.annotationLayer=new a.AnnotationLayerBuilder({pageDiv:D,pdfPage:G,annotationStorage:x,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===w.AnnotationMode.ENABLE_FORMS,linkService:ie,downloadManager:N,l10n:R,enableScripting:U,hasJSActionsPromise:q,fieldObjectsPromise:j,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})}let Q=x=>{if(f?.(!1),this.renderingQueue&&!this.renderingQueue.isHighestPriority(this)){this.renderingState=E.RenderingStates.PAUSED,this.resume=()=>{this.renderingState=E.RenderingStates.RUNNING,x()};return}x()},{width:Y,height:B}=z,H=document.createElement("canvas");H.setAttribute("role","presentation"),H.hidden=!0;let O=!!(I?.background&&I?.foreground),f=x=>{(!O||x)&&(H.hidden=!1,f=null)};$.append(H),this.canvas=H;let m=H.getContext("2d",{alpha:!1}),v=this.outputScale=new E.OutputScale;if(this.maxCanvasPixels===0){let x=1/this.scale;v.sx*=x,v.sy*=x,this.#t=!0}else if(this.maxCanvasPixels>0){let x=Y*B,N=Math.sqrt(this.maxCanvasPixels/x);v.sx>N||v.sy>N?(v.sx=N,v.sy=N,this.#t=!0):this.#t=!1}let T=(0,E.approximateFraction)(v.sx),F=(0,E.approximateFraction)(v.sy);H.width=(0,E.roundToDivide)(Y*v.sx,T[0]),H.height=(0,E.roundToDivide)(B*v.sy,F[0]);let{style:k}=H;k.width=(0,E.roundToDivide)(Y,T[1])+"px",k.height=(0,E.roundToDivide)(B,F[1])+"px",this.#s.set(H,z);let V=v.scaled?[v.sx,0,0,v.sy,0,0]:null,L={canvasContext:m,transform:V,viewport:z,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:I},p=this.renderTask=this.pdfPage.render(L);p.onContinue=Q;let P=p.promise.then(()=>ae(this,null,function*(){if(f?.(!0),yield this.#u(p),this.#g(),this.annotationLayer&&(yield this.#d()),!this.annotationEditorLayer){let{annotationEditorUIManager:x}=this.#i();if(!x)return;this.annotationEditorLayer=new b.AnnotationEditorLayerBuilder({uiManager:x,pageDiv:D,pdfPage:G,l10n:R,accessibilityManager:this._accessibilityManager,annotationLayer:this.annotationLayer?.annotationLayer})}this.#f()}),x=>(x instanceof w.RenderingCancelledException||f?.(!0),this.#u(p,x)));if(G.isPureXfa){if(this.xfaLayer)this.xfaLayer.div&&D.append(this.xfaLayer.div);else{let{annotationStorage:x,linkService:N}=this.#i();this.xfaLayer=new y.XfaLayerBuilder({pageDiv:D,pdfPage:G,annotationStorage:x,linkService:N})}this.#p()}return D.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),P})}setPageLabel(D){this.pageLabel=typeof D=="string"?D:null,this.pageLabel!==null?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){let{directDrawing:D,initialOptionalContent:R,regularAnnotations:I}=this.#c;return D&&R&&I?this.canvas:null}}g.PDFPageView=_},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationEditorLayerBuilder=void 0;var w=C(4),E=C(7);class b{#e=null;#t;constructor(i){this.pageDiv=i.pageDiv,this.pdfPage=i.pdfPage,this.accessibilityManager=i.accessibilityManager,this.l10n=i.l10n||E.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#t=i.uiManager,this.#e=i.annotationLayer||null}render(i,t="display"){return ae(this,null,function*(){if(t!=="display"||this._cancelled)return;let o=i.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:o}),this.show();return}let s=this.div=document.createElement("div");s.className="annotationEditorLayer",s.tabIndex=0,s.hidden=!0,s.dir=this.#t.direction,this.pageDiv.append(s),this.annotationEditorLayer=new w.AnnotationEditorLayer({uiManager:this.#t,div:s,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage.pageNumber-1,l10n:this.l10n,viewport:o,annotationLayer:this.#e});let n={viewport:o,div:s,annotations:null,intent:t};this.annotationEditorLayer.render(n),this.show()})}cancel(){this._cancelled=!0,this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}hide(){this.div&&(this.div.hidden=!0)}show(){!this.div||this.annotationEditorLayer.isEmpty||(this.div.hidden=!1)}}g.AnnotationEditorLayerBuilder=b},(c,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.compatibilityParams=g.OptionKind=g.AppOptions=void 0;let C=Object.create(null);g.compatibilityParams=C;{let i=navigator.userAgent||"",t=navigator.platform||"",o=navigator.maxTouchPoints||1,s=/Android/.test(i),n=/\b(iPad|iPhone|iPod)(?=;)/.test(i)||t==="MacIntel"&&o>1;(function(){(n||s)&&(C.maxCanvasPixels=5242880)})()}let w={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};g.OptionKind=w;let E={annotationEditorMode:{value:0,kind:w.VIEWER+w.PREFERENCE},annotationMode:{value:2,kind:w.VIEWER+w.PREFERENCE},cursorToolOnLoad:{value:0,kind:w.VIEWER+w.PREFERENCE},defaultZoomDelay:{value:400,kind:w.VIEWER+w.PREFERENCE},defaultZoomValue:{value:"",kind:w.VIEWER+w.PREFERENCE},disableHistory:{value:!1,kind:w.VIEWER},disablePageLabels:{value:!1,kind:w.VIEWER+w.PREFERENCE},enablePermissions:{value:!1,kind:w.VIEWER+w.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:w.VIEWER+w.PREFERENCE},enableScripting:{value:!0,kind:w.VIEWER+w.PREFERENCE},enableStampEditor:{value:!0,kind:w.VIEWER+w.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:w.VIEWER},externalLinkTarget:{value:0,kind:w.VIEWER+w.PREFERENCE},historyUpdateUrl:{value:!1,kind:w.VIEWER+w.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:w.VIEWER+w.PREFERENCE},imageResourcesPath:{value:"./images/",kind:w.VIEWER},maxCanvasPixels:{value:16777216,kind:w.VIEWER},forcePageColors:{value:!1,kind:w.VIEWER+w.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:w.VIEWER+w.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:w.VIEWER+w.PREFERENCE},pdfBugEnabled:{value:!1,kind:w.VIEWER+w.PREFERENCE},printResolution:{value:150,kind:w.VIEWER},sidebarViewOnLoad:{value:-1,kind:w.VIEWER+w.PREFERENCE},scrollModeOnLoad:{value:-1,kind:w.VIEWER+w.PREFERENCE},spreadModeOnLoad:{value:-1,kind:w.VIEWER+w.PREFERENCE},textLayerMode:{value:1,kind:w.VIEWER+w.PREFERENCE},viewerCssTheme:{value:0,kind:w.VIEWER+w.PREFERENCE},viewOnLoad:{value:0,kind:w.VIEWER+w.PREFERENCE},cMapPacked:{value:!0,kind:w.API},cMapUrl:{value:"../web/cmaps/",kind:w.API},disableAutoFetch:{value:!1,kind:w.API+w.PREFERENCE},disableFontFace:{value:!1,kind:w.API+w.PREFERENCE},disableRange:{value:!1,kind:w.API+w.PREFERENCE},disableStream:{value:!1,kind:w.API+w.PREFERENCE},docBaseUrl:{value:"",kind:w.API},enableXfa:{value:!0,kind:w.API+w.PREFERENCE},fontExtraProperties:{value:!1,kind:w.API},isEvalSupported:{value:!0,kind:w.API},isOffscreenCanvasSupported:{value:!0,kind:w.API},maxImageSize:{value:-1,kind:w.API},pdfBug:{value:!1,kind:w.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:w.API},verbosity:{value:1,kind:w.API},workerPort:{value:null,kind:w.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:w.WORKER}};E.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:w.VIEWER},E.disablePreferences={value:!1,kind:w.VIEWER},E.locale={value:navigator.language||"en-US",kind:w.VIEWER},E.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:w.VIEWER};let b=Object.create(null);class a{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(t){let o=b[t];if(o!==void 0)return o;let s=E[t];if(s!==void 0)return C[t]??s.value}static getAll(t=null){let o=Object.create(null);for(let s in E){let n=E[s];if(t){if(!(t&n.kind))continue;if(t===w.PREFERENCE){let h=n.value,y=typeof h;if(y==="boolean"||y==="string"||y==="number"&&Number.isInteger(h)){o[s]=h;continue}throw new Error(`Invalid type for preference: ${s}`)}}let d=b[s];o[s]=d!==void 0?d:C[s]??n.value}return o}static set(t,o){b[t]=o}static setAll(t){for(let o in t)b[o]=t[o]}static remove(t){delete b[t]}}g.AppOptions=a,a._hasUserOptions=function(){return Object.keys(b).length>0}},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.StructTreeLayerBuilder=void 0;var w=C(2);let E={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},b=/^H(\d+)$/;class a{#e=void 0;get renderingDone(){return this.#e!==void 0}render(t){if(this.#e!==void 0)return this.#e;let o=this.#i(t);return o?.classList.add("structTree"),this.#e=o}hide(){this.#e&&!this.#e.hidden&&(this.#e.hidden=!0)}show(){this.#e?.hidden&&(this.#e.hidden=!1)}#t(t,o){let{alt:s,id:n,lang:d}=t;s!==void 0&&o.setAttribute("aria-label",(0,w.removeNullCharacters)(s)),n!==void 0&&o.setAttribute("aria-owns",n),d!==void 0&&o.setAttribute("lang",(0,w.removeNullCharacters)(d,!0))}#i(t){if(!t)return null;let o=document.createElement("span");if("role"in t){let{role:s}=t,n=s.match(b);n?(o.setAttribute("role","heading"),o.setAttribute("aria-level",n[1])):E[s]&&o.setAttribute("role",E[s])}if(this.#t(t,o),t.children)if(t.children.length===1&&"id"in t.children[0])this.#t(t.children[0],o);else for(let s of t.children)o.append(this.#i(s));return o}}g.StructTreeLayerBuilder=a},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextAccessibilityManager=void 0;var w=C(2);class E{#e=!1;#t=null;#i=new Map;#n=new Map;setTextMapping(a){this.#t=a}static#o(a,i){let t=a.getBoundingClientRect(),o=i.getBoundingClientRect();if(t.width===0&&t.height===0)return 1;if(o.width===0&&o.height===0)return-1;let s=t.y,n=t.y+t.height,d=t.y+t.height/2,h=o.y,y=o.y+o.height,l=o.y+o.height/2;if(d<=h&&l>=n)return-1;if(l<=s&&d>=y)return 1;let u=t.x+t.width/2,_=o.x+o.width/2;return u-_}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(E.#o),this.#i.size>0){let a=this.#t;for(let[i,t]of this.#i){if(!document.getElementById(i)){this.#i.delete(i);continue}this.#r(i,a[t])}}for(let[a,i]of this.#n)this.addPointerInTextLayer(a,i);this.#n.clear()}disable(){this.#e&&(this.#n.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(a){if(!this.#e){this.#n.delete(a);return}let i=this.#t;if(!i||i.length===0)return;let{id:t}=a,o=this.#i.get(t);if(o===void 0)return;let s=i[o];this.#i.delete(t);let n=s.getAttribute("aria-owns");n?.includes(t)&&(n=n.split(" ").filter(d=>d!==t).join(" "),n?s.setAttribute("aria-owns",n):(s.removeAttribute("aria-owns"),s.setAttribute("role","presentation")))}#r(a,i){let t=i.getAttribute("aria-owns");t?.includes(a)||i.setAttribute("aria-owns",t?`${t} ${a}`:a),i.removeAttribute("role")}addPointerInTextLayer(a,i){let{id:t}=a;if(!t)return null;if(!this.#e)return this.#n.set(a,i),null;i&&this.removePointerInTextLayer(a);let o=this.#t;if(!o||o.length===0)return null;let s=(0,w.binarySearchFirstItem)(o,y=>E.#o(a,y)<0),n=Math.max(0,s-1),d=o[n];this.#r(t,d),this.#i.set(t,n);let h=d.parentNode;return h?.classList.contains("markedContent")?h.id:null}moveElementInDOM(a,i,t,o){let s=this.addPointerInTextLayer(t,o);if(!a.hasChildNodes())return a.append(i),s;let n=Array.from(a.childNodes).filter(y=>y!==i);if(n.length===0)return s;let d=t||i,h=(0,w.binarySearchFirstItem)(n,y=>E.#o(d,y)<0);return h===0?n[0].before(i):n[h-1].after(i),s}}g.TextAccessibilityManager=E},(c,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextHighlighter=void 0;class C{constructor({findController:E,eventBus:b,pageIndex:a}){this.findController=E,this.matches=[],this.eventBus=b,this.pageIdx=a,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(E,b){this.textDivs=E,this.textContentItemsStr=b}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=E=>{(E.pageIndex===this.pageIdx||E.pageIndex===-1)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null),this._updateMatches(!0))}_convertMatches(E,b){if(!E)return[];let{textContentItemsStr:a}=this,i=0,t=0,o=a.length-1,s=[];for(let n=0,d=E.length;n<d;n++){let h=E[n];for(;i!==o&&h>=t+a[i].length;)t+=a[i].length,i++;i===a.length&&console.error("Could not find a matching mapping");let y={begin:{divIdx:i,offset:h-t}};for(h+=b[n];i!==o&&h>t+a[i].length;)t+=a[i].length,i++;y.end={divIdx:i,offset:h-t},s.push(y)}return s}_renderMatches(E){if(E.length===0)return;let{findController:b,pageIdx:a}=this,{textContentItemsStr:i,textDivs:t}=this,o=a===b.selected.pageIdx,s=b.selected.matchIdx,n=b.state.highlightAll,d=null,h={divIdx:-1,offset:void 0};function y(R,I){let G=R.divIdx;return t[G].textContent="",l(G,0,R.offset,I)}function l(R,I,G,z){let $=t[R];if($.nodeType===Node.TEXT_NODE){let B=document.createElement("span");$.before(B),B.append($),t[R]=B,$=B}let Q=i[R].substring(I,G),Y=document.createTextNode(Q);if(z){let B=document.createElement("span");return B.className=`${z} appended`,B.append(Y),$.append(B),z.includes("selected")?B.offsetLeft:0}return $.append(Y),0}let u=s,_=u+1;if(n)u=0,_=E.length;else if(!o)return;let S=-1,D=-1;for(let R=u;R<_;R++){let I=E[R],G=I.begin;if(G.divIdx===S&&G.offset===D)continue;S=G.divIdx,D=G.offset;let z=I.end,$=o&&R===s,Q=$?" selected":"",Y=0;if(!d||G.divIdx!==d.divIdx?(d!==null&&l(d.divIdx,d.offset,h.offset),y(G)):l(d.divIdx,d.offset,G.offset),G.divIdx===z.divIdx)Y=l(G.divIdx,G.offset,z.offset,"highlight"+Q);else{Y=l(G.divIdx,G.offset,h.offset,"highlight begin"+Q);for(let B=G.divIdx+1,H=z.divIdx;B<H;B++)t[B].className="highlight middle"+Q;y(z,"highlight end"+Q)}d=z,$&&b.scrollMatchIntoView({element:t[G.divIdx],selectedLeft:Y,pageIndex:a,matchIndex:s})}d&&l(d.divIdx,d.offset,h.offset)}_updateMatches(E=!1){if(!this.enabled&&!E)return;let{findController:b,matches:a,pageIdx:i}=this,{textContentItemsStr:t,textDivs:o}=this,s=-1;for(let h of a){let y=Math.max(s,h.begin.divIdx);for(let l=y,u=h.end.divIdx;l<=u;l++){let _=o[l];_.textContent=t[l],_.className=""}s=h.end.divIdx+1}if(!b?.highlightMatches||E)return;let n=b.pageMatches[i]||null,d=b.pageMatchesLength[i]||null;this.matches=this._convertMatches(n,d),this._renderMatches(this.matches)}}g.TextHighlighter=C},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextLayerBuilder=void 0;var w=C(4),E=C(2);class b{#e=!1;#t=0;#i=0;#n=null;constructor({highlighter:i=null,accessibilityManager:t=null,isOffscreenCanvasSupported:o=!0,enablePermissions:s=!1}){this.textContentItemsStr=[],this.renderingDone=!1,this.textDivs=[],this.textDivProperties=new WeakMap,this.textLayerRenderTask=null,this.highlighter=i,this.accessibilityManager=t,this.isOffscreenCanvasSupported=o,this.#e=s===!0,this.div=document.createElement("div"),this.div.className="textLayer",this.hide()}#o(){this.renderingDone=!0;let i=document.createElement("div");i.className="endOfContent",this.div.append(i),this.#r()}get numTextDivs(){return this.textDivs.length}render(i){return ae(this,null,function*(){if(!this.#n)throw new Error('No "textContentSource" parameter specified.');let t=i.scale*(globalThis.devicePixelRatio||1),{rotation:o}=i;if(this.renderingDone){let s=o!==this.#t,n=t!==this.#i;(s||n)&&(this.hide(),(0,w.updateTextLayer)({container:this.div,viewport:i,textDivs:this.textDivs,textDivProperties:this.textDivProperties,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,mustRescale:n,mustRotate:s}),this.#i=t,this.#t=o),this.show();return}this.cancel(),this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr),this.accessibilityManager?.setTextMapping(this.textDivs),this.textLayerRenderTask=(0,w.renderTextLayer)({textContentSource:this.#n,container:this.div,viewport:i,textDivs:this.textDivs,textDivProperties:this.textDivProperties,textContentItemsStr:this.textContentItemsStr,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported}),yield this.textLayerRenderTask.promise,this.#o(),this.#i=t,this.#t=o,this.show(),this.accessibilityManager?.enable()})}hide(){this.div.hidden||(this.highlighter?.disable(),this.div.hidden=!0)}show(){this.div.hidden&&this.renderingDone&&(this.div.hidden=!1,this.highlighter?.enable())}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable(),this.textContentItemsStr.length=0,this.textDivs.length=0,this.textDivProperties=new WeakMap}setTextContentSource(i){this.cancel(),this.#n=i}#r(){let{div:i}=this;i.addEventListener("mousedown",t=>{let o=i.querySelector(".endOfContent");if(!o)return;let s=t.target!==i;if(s&&=getComputedStyle(o).getPropertyValue("-moz-user-select")!=="none",s){let n=i.getBoundingClientRect(),d=Math.max(0,(t.pageY-n.top)/n.height);o.style.top=(d*100).toFixed(2)+"%"}o.classList.add("active")}),i.addEventListener("mouseup",()=>{let t=i.querySelector(".endOfContent");t&&(t.style.top="",t.classList.remove("active"))}),i.addEventListener("copy",t=>{if(!this.#e){let o=document.getSelection();t.clipboardData.setData("text/plain",(0,E.removeNullCharacters)((0,w.normalizeUnicode)(o.toString())))}t.preventDefault(),t.stopPropagation()})}}g.TextLayerBuilder=b},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaLayerBuilder=void 0;var w=C(4);class E{constructor({pageDiv:a,pdfPage:i,annotationStorage:t=null,linkService:o,xfaHtml:s=null}){this.pageDiv=a,this.pdfPage=i,this.annotationStorage=t,this.linkService=o,this.xfaHtml=s,this.div=null,this._cancelled=!1}render(a,i="display"){return ae(this,null,function*(){if(i==="print"){let s={viewport:a.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:i},n=document.createElement("div");return this.pageDiv.append(n),s.div=n,w.XfaLayer.render(s)}let t=yield this.pdfPage.getXfa();if(this._cancelled||!t)return{textDivs:[]};let o={viewport:a.clone({dontFlip:!0}),div:this.div,xfaHtml:t,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:i};return this.div?w.XfaLayer.update(o):(this.div=document.createElement("div"),this.pageDiv.append(this.div),o.div=this.div,w.XfaLayer.render(o))})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}g.XfaLayerBuilder=E},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFScriptingManager=void 0;var w=C(22),E=C(23);class b extends E.PDFScriptingManager{constructor(i){i.externalServices||window.addEventListener("updatefromsandbox",t=>{i.eventBus.dispatch("updatefromsandbox",{source:window,detail:t.detail})}),i.externalServices||={createScripting:({sandboxBundleSrc:t})=>new w.GenericScripting(t)},i.docProperties||=t=>(0,w.docProperties)(t),super(i)}}g.PDFScriptingManager=b},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GenericScripting=void 0,g.docProperties=E;var w=C(4);function E(a){return ae(this,null,function*(){let i="",t=i.split("#")[0],{info:o,metadata:s,contentDispositionFilename:n,contentLength:d}=yield a.getMetadata();if(!d){let{length:h}=yield a.getDownloadInfo();d=h}return Ue(Re({},o),{baseURL:t,filesize:d,filename:n||(0,w.getPdfFilenameFromUrl)(i),metadata:s?.getRaw(),authors:s?.get("dc:creator"),numPages:a.numPages,URL:i})})}class b{constructor(i){this._ready=(0,w.loadScript)(i,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(i){return ae(this,null,function*(){(yield this._ready).create(i)})}dispatchEventInSandbox(i){return ae(this,null,function*(){let t=yield this._ready;setTimeout(()=>t.dispatchEvent(i),0)})}destroySandbox(){return ae(this,null,function*(){(yield this._ready).nukeSandbox()})}}g.GenericScripting=b},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFScriptingManager=void 0;var w=C(2),E=C(4);class b{#e=null;#t=null;#i=null;#n=null;#o=null;#r=null;#a=null;#l=!1;#c=null;#s=null;#h=null;constructor({eventBus:i,sandboxBundleSrc:t=null,externalServices:o=null,docProperties:s=null}){this.#n=i,this.#c=t,this.#o=o,this.#i=s}setViewer(i){this.#a=i}setDocument(i){return ae(this,null,function*(){if(this.#r&&(yield this.#_()),this.#r=i,!i)return;let[t,o,s]=yield Promise.all([i.getFieldObjects(),i.getCalculationOrderIds(),i.getJSActions()]);if(!t&&!s){yield this.#_();return}if(i===this.#r){try{this.#s=this.#g()}catch(n){console.error(`setDocument: "${n.message}".`),yield this.#_();return}this._internalEvents.set("updatefromsandbox",n=>{n?.source===window&&this.#d(n.detail)}),this._internalEvents.set("dispatcheventinsandbox",n=>{this.#s?.dispatchEventInSandbox(n.detail)}),this._internalEvents.set("pagechanging",({pageNumber:n,previous:d})=>{n!==d&&(this.#p(d),this.#f(n))}),this._internalEvents.set("pagerendered",({pageNumber:n})=>{this._pageOpenPending.has(n)&&n===this.#a.currentPageNumber&&this.#f(n)}),this._internalEvents.set("pagesdestroy",()=>ae(this,null,function*(){yield this.#p(this.#a.currentPageNumber),yield this.#s?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),this.#e?.resolve()}));for(let[n,d]of this._internalEvents)this.#n._on(n,d);try{let n=yield this.#i(i);if(i!==this.#r)return;yield this.#s.createSandbox({objects:t,calculationOrder:o,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:Ue(Re({},n),{actions:s})}),this.#n.dispatch("sandboxcreated",{source:this})}catch(n){console.error(`setDocument: "${n.message}".`),yield this.#_();return}yield this.#s?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield this.#f(this.#a.currentPageNumber,!0),Promise.resolve().then(()=>{i===this.#r&&(this.#l=!0)})}})}dispatchWillSave(){return ae(this,null,function*(){return this.#s?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})}dispatchDidSave(){return ae(this,null,function*(){return this.#s?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})}dispatchWillPrint(){return ae(this,null,function*(){if(this.#s){yield this.#h?.promise,this.#h=new E.PromiseCapability;try{yield this.#s.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}catch(i){throw this.#h.resolve(),this.#h=null,i}yield this.#h.promise}})}dispatchDidPrint(){return ae(this,null,function*(){return this.#s?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})}get destroyPromise(){return this.#t?.promise||null}get ready(){return this.#l}get _internalEvents(){return(0,E.shadow)(this,"_internalEvents",new Map)}get _pageOpenPending(){return(0,E.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,E.shadow)(this,"_visitedPages",new Map)}#d(i){return ae(this,null,function*(){let t=this.#a,o=t.isInPresentationMode||t.isChangingPresentationMode,{id:s,siblings:n,command:d,value:h}=i;if(!s){switch(d){case"clear":console.clear();break;case"error":console.error(h);break;case"layout":if(!o){let l=(0,w.apiPageLayoutToViewerModes)(h);t.spreadMode=l.spreadMode}break;case"page-num":t.currentPageNumber=h+1;break;case"print":yield t.pagesPromise,this.#n.dispatch("print",{source:this});break;case"println":console.log(h);break;case"zoom":o||(t.currentScaleValue=h);break;case"SaveAs":this.#n.dispatch("download",{source:this});break;case"FirstPage":t.currentPageNumber=1;break;case"LastPage":t.currentPageNumber=t.pagesCount;break;case"NextPage":t.nextPage();break;case"PrevPage":t.previousPage();break;case"ZoomViewIn":o||t.increaseScale();break;case"ZoomViewOut":o||t.decreaseScale();break;case"WillPrintFinished":this.#h?.resolve(),this.#h=null;break}return}if(o&&i.focus)return;delete i.id,delete i.siblings;let y=n?[s,...n]:[s];for(let l of y){let u=document.querySelector(`[data-element-id="${l}"]`);u?u.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:i})):this.#r?.annotationStorage.setValue(l,i)}})}#f(i,t=!1){return ae(this,null,function*(){let o=this.#r,s=this._visitedPages;if(t&&(this.#e=new E.PromiseCapability),!this.#e)return;let n=this.#a.getPageView(i-1);if(n?.renderingState!==w.RenderingStates.FINISHED){this._pageOpenPending.add(i);return}this._pageOpenPending.delete(i);let d=ae(this,null,function*(){let h=yield s.has(i)?null:n.pdfPage?.getJSActions();o===this.#r&&(yield this.#s?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:i,actions:h}))});s.set(i,d)})}#p(i){return ae(this,null,function*(){let t=this.#r,o=this._visitedPages;if(!this.#e||this._pageOpenPending.has(i))return;let s=o.get(i);s&&(o.set(i,null),yield s,t===this.#r&&(yield this.#s?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:i})))})}#g(){if(this.#t=new E.PromiseCapability,this.#s)throw new Error("#initScripting: Scripting already exists.");return this.#o.createScripting({sandboxBundleSrc:this.#c})}#_(){return ae(this,null,function*(){if(!this.#s){this.#r=null,this.#t?.resolve();return}this.#e&&(yield Promise.race([this.#e.promise,new Promise(i=>{setTimeout(i,1e3)})]).catch(()=>{}),this.#e=null),this.#r=null;try{yield this.#s.destroySandbox()}catch{}this.#h?.reject(new Error("Scripting destroyed.")),this.#h=null;for(let[i,t]of this._internalEvents)this.#n._off(i,t);this._internalEvents.clear(),this._pageOpenPending.clear(),this._visitedPages.clear(),this.#s=null,this.#l=!1,this.#t?.resolve()})}}g.PDFScriptingManager=b},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFSinglePageViewer=void 0;var w=C(2),E=C(25);class b extends E.PDFViewer{_resetView(){super._resetView(),this._scrollMode=w.ScrollMode.PAGE,this._spreadMode=w.SpreadMode.NONE}set scrollMode(i){}_updateScrollMode(){}set spreadMode(i){}_updateSpreadMode(){}}g.PDFSinglePageViewer=b},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PagesCountLimit=g.PDFViewer=g.PDFPageViewBuffer=void 0;var w=C(4),E=C(2),b=C(7),a=C(13),i=C(26),t=C(5);let o=10,s={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};g.PagesCountLimit=s;function n(y){return Object.values(w.AnnotationEditorType).includes(y)&&y!==w.AnnotationEditorType.DISABLE}class d{#e=new Set;#t=0;constructor(l){this.#t=l}push(l){let u=this.#e;u.has(l)&&u.delete(l),u.add(l),u.size>this.#t&&this.#i()}resize(l,u=null){this.#t=l;let _=this.#e;if(u){let S=_.size,D=1;for(let R of _)if(u.has(R.id)&&(_.delete(R),_.add(R)),++D>S)break}for(;_.size>this.#t;)this.#i()}has(l){return this.#e.has(l)}[Symbol.iterator](){return this.#e.keys()}#i(){let l=this.#e.keys().next().value;l?.destroy(),this.#e.delete(l)}}g.PDFPageViewBuffer=d;class h{#e=null;#t=null;#i=w.AnnotationEditorType.NONE;#n=null;#o=w.AnnotationMode.ENABLE_FORMS;#r=null;#a=null;#l=!1;#c=!1;#s=null;#h=!1;#d=0;#f=new ResizeObserver(this.#T.bind(this));#p=null;#g=null;#_=null;#m=E.TextLayerMode.ENABLE;constructor(l){let u="3.11.174";if(w.version!==u)throw new Error(`The API version "${w.version}" does not match the Viewer version "${u}".`);if(this.container=l.container,this.viewer=l.viewer||l.container.firstElementChild,this.container?.tagName!=="DIV"||this.viewer?.tagName!=="DIV")throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&getComputedStyle(this.container).position!=="absolute")throw new Error("The `container` must be absolutely positioned.");this.#f.observe(this.container),this.eventBus=l.eventBus,this.linkService=l.linkService||new t.SimpleLinkService,this.downloadManager=l.downloadManager||null,this.findController=l.findController||null,this.#t=l.altTextManager||null,this.findController&&(this.findController.onIsPageVisible=_=>this._getVisiblePages().ids.has(_)),this._scriptingManager=l.scriptingManager||null,this.#m=l.textLayerMode??E.TextLayerMode.ENABLE,this.#o=l.annotationMode??w.AnnotationMode.ENABLE_FORMS,this.#i=l.annotationEditorMode??w.AnnotationEditorType.NONE,this.imageResourcesPath=l.imageResourcesPath||"",this.enablePrintAutoRotate=l.enablePrintAutoRotate||!1,this.removePageBorders=l.removePageBorders||!1,l.useOnlyCssZoom&&(console.error("useOnlyCssZoom was removed, please use `maxCanvasPixels = 0` instead."),l.maxCanvasPixels=0),this.isOffscreenCanvasSupported=l.isOffscreenCanvasSupported??!0,this.maxCanvasPixels=l.maxCanvasPixels,this.l10n=l.l10n||b.NullL10n,this.#l=l.enablePermissions||!1,this.pageColors=l.pageColors||null,this.defaultRenderingQueue=!l.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new i.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=l.renderingQueue,this.scroll=(0,E.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=E.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.#E(),this.eventBus._on("thumbnailrendered",({pageNumber:_,pdfPage:S})=>{let D=this._pages[_-1];this.#e.has(D)||S?.cleanup()})}get pagesCount(){return this._pages.length}getPageView(l){return this._pages[l]}getCachedPageViews(){return new Set(this.#e)}get pageViewsReady(){return this._pagesCapability.settled&&this._pages.every(l=>l?.pdfPage)}get renderForms(){return this.#o===w.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(l){if(!Number.isInteger(l))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(l,!0)||console.error(`currentPageNumber: "${l}" is not a valid page.`))}_setCurrentPageNumber(l,u=!1){if(this._currentPageNumber===l)return u&&this.#M(),!0;if(!(0<l&&l<=this.pagesCount))return!1;let _=this._currentPageNumber;return this._currentPageNumber=l,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:l,pageLabel:this._pageLabels?.[l-1]??null,previous:_}),u&&this.#M(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(l){if(!this.pdfDocument)return;let u=l|0;if(this._pageLabels){let _=this._pageLabels.indexOf(l);_>=0&&(u=_+1)}this._setCurrentPageNumber(u,!0)||console.error(`currentPageLabel: "${l}" is not a valid page.`)}get currentScale(){return this._currentScale!==E.UNKNOWN_SCALE?this._currentScale:E.DEFAULT_SCALE}set currentScale(l){if(isNaN(l))throw new Error("Invalid numeric scale.");this.pdfDocument&&this.#v(l,{noScroll:!1})}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(l){this.pdfDocument&&this.#v(l,{noScroll:!1})}get pagesRotation(){return this._pagesRotation}set pagesRotation(l){if(!(0,E.isValidRotation)(l))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||(l%=360,l<0&&(l+=360),this._pagesRotation===l))return;this._pagesRotation=l;let u=this._currentPageNumber;this.refresh(!0,{rotation:l}),this._currentScaleValue&&this.#v(this._currentScaleValue,{noScroll:!0}),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:l,pageNumber:u}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#u(){let l=this;return{get annotationEditorUIManager(){return l.#n},get annotationStorage(){return l.pdfDocument?.annotationStorage},get downloadManager(){return l.downloadManager},get enableScripting(){return!!l._scriptingManager},get fieldObjectsPromise(){return l.pdfDocument?.getFieldObjects()},get findController(){return l.findController},get hasJSActionsPromise(){return l.pdfDocument?.hasJSActions()},get linkService(){return l.linkService}}}#b(l){let u={annotationEditorMode:this.#i,annotationMode:this.#o,textLayerMode:this.#m};return l&&(!l.includes(w.PermissionFlag.COPY)&&this.#m===E.TextLayerMode.ENABLE&&(u.textLayerMode=E.TextLayerMode.ENABLE_PERMISSIONS),l.includes(w.PermissionFlag.MODIFY_CONTENTS)||(u.annotationEditorMode=w.AnnotationEditorType.DISABLE),!l.includes(w.PermissionFlag.MODIFY_ANNOTATIONS)&&!l.includes(w.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#o===w.AnnotationMode.ENABLE_FORMS&&(u.annotationMode=w.AnnotationMode.ENABLE)),u}#w(){if(document.visibilityState==="hidden"||!this.container.offsetParent||this._getVisiblePages().views.length===0)return Promise.resolve();let l=new Promise(u=>{this.#g=()=>{document.visibilityState==="hidden"&&(u(),document.removeEventListener("visibilitychange",this.#g),this.#g=null)},document.addEventListener("visibilitychange",this.#g)});return Promise.race([this._onePageRenderedCapability.promise,l])}getAllText(){return ae(this,null,function*(){let l=[],u=[];for(let _=1,S=this.pdfDocument.numPages;_<=S;++_){if(this.#h)return null;u.length=0;let D=yield this.pdfDocument.getPage(_),{items:R}=yield D.getTextContent();for(let I of R)I.str&&u.push(I.str),I.hasEOL&&u.push(`
`);l.push((0,E.removeNullCharacters)(u.join("")))}return l.join(`
`)})}#y(l,u){let _=document.getSelection(),{focusNode:S,anchorNode:D}=_;if(D&&S&&_.containsNode(this.#s)){if(this.#c||l===E.TextLayerMode.ENABLE_PERMISSIONS){u.preventDefault(),u.stopPropagation();return}this.#c=!0;let R=this.container.style.cursor;this.container.style.cursor="wait";let I=G=>this.#h=G.key==="Escape";window.addEventListener("keydown",I),this.getAllText().then(G=>ae(this,null,function*(){G!==null&&(yield navigator.clipboard.writeText(G))})).catch(G=>{console.warn(`Something goes wrong when extracting the text: ${G.message}`)}).finally(()=>{this.#c=!1,this.#h=!1,window.removeEventListener("keydown",I),this.container.style.cursor=R}),u.preventDefault(),u.stopPropagation()}}setDocument(l){if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController?.setDocument(null),this._scriptingManager?.setDocument(null),this.#n&&(this.#n.destroy(),this.#n=null)),this.pdfDocument=l,!l)return;let u=l.numPages,_=l.getPage(1),S=l.getOptionalContentConfig(),D=this.#l?l.getPermissions():Promise.resolve();if(u>s.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");let R=this._scrollMode=E.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:R})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:u})},()=>{}),this._onBeforeDraw=R=>{let I=this._pages[R.pageNumber-1];I&&this.#e.push(I)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=R=>{R.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:R.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#g&&(document.removeEventListener("visibilitychange",this.#g),this.#g=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([_,D]).then(([R,I])=>{if(l!==this.pdfDocument)return;this._firstPageCapability.resolve(R),this._optionalContentConfigPromise=S;let{annotationEditorMode:G,annotationMode:z,textLayerMode:$}=this.#b(I);if($!==E.TextLayerMode.DISABLE){let f=this.#s=document.createElement("div");f.id="hiddenCopyElement",this.viewer.before(f)}if(G!==w.AnnotationEditorType.DISABLE){let f=G;l.isPureXfa?console.warn("Warning: XFA-editing is not implemented."):n(f)?(this.#n=new w.AnnotationEditorUIManager(this.container,this.viewer,this.#t,this.eventBus,l,this.pageColors),f!==w.AnnotationEditorType.NONE&&this.#n.updateMode(f)):console.error(`Invalid AnnotationEditor mode: ${f}`)}let Q=this.#u.bind(this),Y=this._scrollMode===E.ScrollMode.PAGE?null:this.viewer,B=this.currentScale,H=R.getViewport({scale:B*w.PixelsPerInch.PDF_TO_CSS_UNITS});this.viewer.style.setProperty("--scale-factor",H.scale),(this.pageColors?.foreground==="CanvasText"||this.pageColors?.background==="Canvas")&&this.viewer.style.setProperty("--hcm-highligh-filter",l.filterFactory.addHighlightHCMFilter("CanvasText","Canvas","HighlightText","Highlight"));for(let f=1;f<=u;++f){let m=new a.PDFPageView({container:Y,eventBus:this.eventBus,id:f,scale:B,defaultViewport:H.clone(),optionalContentConfigPromise:S,renderingQueue:this.renderingQueue,textLayerMode:$,annotationMode:z,imageResourcesPath:this.imageResourcesPath,isOffscreenCanvasSupported:this.isOffscreenCanvasSupported,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n,layerProperties:Q});this._pages.push(m)}let O=this._pages[0];O&&(O.setPdfPage(R),this.linkService.cachePageRef(1,R.ref)),this._scrollMode===E.ScrollMode.PAGE?this.#A():this._spreadMode!==E.SpreadMode.NONE&&this._updateSpreadMode(),this.#w().then(()=>ae(this,null,function*(){if(this.findController?.setDocument(l),this._scriptingManager?.setDocument(l),this.#s&&(this.#a=this.#y.bind(this,$),document.addEventListener("copy",this.#a)),this.#n&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:this.#i}),l.loadingParams.disableAutoFetch||u>s.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let f=u-1;if(f<=0){this._pagesCapability.resolve();return}for(let m=2;m<=u;++m){let v=l.getPage(m).then(T=>{let F=this._pages[m-1];F.pdfPage||F.setPdfPage(T),this.linkService.cachePageRef(m,T.ref),--f===0&&this._pagesCapability.resolve()},T=>{console.error(`Unable to get page ${m} to initialize viewer`,T),--f===0&&this._pagesCapability.resolve()});m%s.PAUSE_EAGER_PAGE_INIT===0&&(yield v)}})),this.eventBus.dispatch("pagesinit",{source:this}),l.getMetadata().then(({info:f})=>{l===this.pdfDocument&&f.Language&&(this.viewer.lang=f.Language)}),this.defaultRenderingQueue&&this.update()}).catch(R=>{console.error("Unable to initialize viewer",R),this._pagesCapability.reject(R)})}setPageLabels(l){if(this.pdfDocument){l?Array.isArray(l)&&this.pdfDocument.numPages===l.length?this._pageLabels=l:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let u=0,_=this._pages.length;u<_;u++)this._pages[u].setPageLabel(this._pageLabels?.[u]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=E.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new d(o),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=new w.PromiseCapability,this._onePageRenderedCapability=new w.PromiseCapability,this._pagesCapability=new w.PromiseCapability,this._scrollMode=E.ScrollMode.VERTICAL,this._previousScrollMode=E.ScrollMode.UNKNOWN,this._spreadMode=E.SpreadMode.NONE,this.#p={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#g&&(document.removeEventListener("visibilitychange",this.#g),this.#g=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.#s&&(document.removeEventListener("copy",this.#a),this.#a=null,this.#s.remove(),this.#s=null)}#A(){if(this._scrollMode!==E.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");let l=this._currentPageNumber,u=this.#p,_=this.viewer;if(_.textContent="",u.pages.length=0,this._spreadMode===E.SpreadMode.NONE&&!this.isInPresentationMode){let S=this._pages[l-1];_.append(S.div),u.pages.push(S)}else{let S=new Set,D=this._spreadMode-1;D===-1?S.add(l-1):l%2!==D?(S.add(l-1),S.add(l)):(S.add(l-2),S.add(l-1));let R=document.createElement("div");if(R.className="spread",this.isInPresentationMode){let I=document.createElement("div");I.className="dummyPage",R.append(I)}for(let I of S){let G=this._pages[I];G&&(R.append(G.div),u.pages.push(G))}_.append(R)}u.scrollDown=l>=u.previousPageNumber,u.previousPageNumber=l}_scrollUpdate(){this.pagesCount!==0&&this.update()}#S(l,u=null){let{div:_,id:S}=l;if(this._currentPageNumber!==S&&this._setCurrentPageNumber(S),this._scrollMode===E.ScrollMode.PAGE&&(this.#A(),this.update()),!u&&!this.isInPresentationMode){let D=_.offsetLeft+_.clientLeft,R=D+_.clientWidth,{scrollLeft:I,clientWidth:G}=this.container;(this._scrollMode===E.ScrollMode.HORIZONTAL||D<I||R>I+G)&&(u={left:0,top:0})}(0,E.scrollIntoView)(_,u),!this._currentScaleValue&&this._location&&(this._location=null)}#I(l){return l===this._currentScale||Math.abs(l-this._currentScale)<1e-15}#R(l,u,{noScroll:_=!1,preset:S=!1,drawingDelay:D=-1}){if(this._currentScaleValue=u.toString(),this.#I(l)){S&&this.eventBus.dispatch("scalechanging",{source:this,scale:l,presetValue:u});return}this.viewer.style.setProperty("--scale-factor",l*w.PixelsPerInch.PDF_TO_CSS_UNITS);let R=D>=0&&D<1e3;if(this.refresh(!0,{scale:l,drawingDelay:R?D:-1}),R&&(this.#_=setTimeout(()=>{this.#_=null,this.refresh()},D)),this._currentScale=l,!_){let I=this._currentPageNumber,G;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(I=this._location.pageNumber,G=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:I,destArray:G,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:l,presetValue:S?u:void 0}),this.defaultRenderingQueue&&this.update()}get#k(){return this._spreadMode!==E.SpreadMode.NONE&&this._scrollMode!==E.ScrollMode.HORIZONTAL?2:1}#v(l,u){let _=parseFloat(l);if(_>0)u.preset=!1,this.#R(_,l,u);else{let S=this._pages[this._currentPageNumber-1];if(!S)return;let D=E.SCROLLBAR_PADDING,R=E.VERTICAL_PADDING;this.isInPresentationMode?(D=R=4,this._spreadMode!==E.SpreadMode.NONE&&(D*=2)):this.removePageBorders?D=R=0:this._scrollMode===E.ScrollMode.HORIZONTAL&&([D,R]=[R,D]);let I=(this.container.clientWidth-D)/S.width*S.scale/this.#k,G=(this.container.clientHeight-R)/S.height*S.scale;switch(l){case"page-actual":_=1;break;case"page-width":_=I;break;case"page-height":_=G;break;case"page-fit":_=Math.min(I,G);break;case"auto":let z=(0,E.isPortraitOrientation)(S)?I:Math.min(G,I);_=Math.min(E.MAX_AUTO_SCALE,z);break;default:console.error(`#setScale: "${l}" is an unknown zoom value.`);return}u.preset=!0,this.#R(_,l,u)}}#M(){let l=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this.#v(this._currentScaleValue,{noScroll:!0}),this.#S(l)}pageLabelToPageNumber(l){if(!this._pageLabels)return null;let u=this._pageLabels.indexOf(l);return u<0?null:u+1}scrollPageIntoView({pageNumber:l,destArray:u=null,allowNegativeOffset:_=!1,ignoreDestinationZoom:S=!1}){if(!this.pdfDocument)return;let D=Number.isInteger(l)&&this._pages[l-1];if(!D){console.error(`scrollPageIntoView: "${l}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!u){this._setCurrentPageNumber(l,!0);return}let R=0,I=0,G=0,z=0,$,Q,Y=D.rotation%180!==0,B=(Y?D.height:D.width)/D.scale/w.PixelsPerInch.PDF_TO_CSS_UNITS,H=(Y?D.width:D.height)/D.scale/w.PixelsPerInch.PDF_TO_CSS_UNITS,O=0;switch(u[1].name){case"XYZ":R=u[2],I=u[3],O=u[4],R=R!==null?R:0,I=I!==null?I:H;break;case"Fit":case"FitB":O="page-fit";break;case"FitH":case"FitBH":I=u[2],O="page-width",I===null&&this._location?(R=this._location.left,I=this._location.top):(typeof I!="number"||I<0)&&(I=H);break;case"FitV":case"FitBV":R=u[2],G=B,z=H,O="page-height";break;case"FitR":R=u[2],I=u[3],G=u[4]-R,z=u[5]-I;let T=E.SCROLLBAR_PADDING,F=E.VERTICAL_PADDING;this.removePageBorders&&(T=F=0),$=(this.container.clientWidth-T)/G/w.PixelsPerInch.PDF_TO_CSS_UNITS,Q=(this.container.clientHeight-F)/z/w.PixelsPerInch.PDF_TO_CSS_UNITS,O=Math.min(Math.abs($),Math.abs(Q));break;default:console.error(`scrollPageIntoView: "${u[1].name}" is not a valid destination type.`);return}if(S||(O&&O!==this._currentScale?this.currentScaleValue=O:this._currentScale===E.UNKNOWN_SCALE&&(this.currentScaleValue=E.DEFAULT_SCALE_VALUE)),O==="page-fit"&&!u[4]){this.#S(D);return}let f=[D.viewport.convertToViewportPoint(R,I),D.viewport.convertToViewportPoint(R+G,I+z)],m=Math.min(f[0][0],f[1][0]),v=Math.min(f[0][1],f[1][1]);_||(m=Math.max(m,0),v=Math.max(v,0)),this.#S(D,{left:m,top:v})}_updateLocation(l){let u=this._currentScale,_=this._currentScaleValue,S=parseFloat(_)===u?Math.round(u*1e4)/100:_,D=l.id,R=this._pages[D-1],I=this.container,G=R.getPagePoint(I.scrollLeft-l.x,I.scrollTop-l.y),z=Math.round(G[0]),$=Math.round(G[1]),Q=`#page=${D}`;this.isInPresentationMode||(Q+=`&zoom=${S},${z},${$}`),this._location={pageNumber:D,scale:S,top:$,left:z,rotation:this._pagesRotation,pdfOpenParams:Q}}update(){let l=this._getVisiblePages(),u=l.views,_=u.length;if(_===0)return;let S=Math.max(o,2*_+1);this.#e.resize(S,l.ids),this.renderingQueue.renderHighestPriority(l);let D=this._spreadMode===E.SpreadMode.NONE&&(this._scrollMode===E.ScrollMode.PAGE||this._scrollMode===E.ScrollMode.VERTICAL),R=this._currentPageNumber,I=!1;for(let G of u){if(G.percent<100)break;if(G.id===R&&D){I=!0;break}}this._setCurrentPageNumber(I?R:u[0].id),this._updateLocation(l.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(l){return this.container.contains(l)}focus(){this.container.focus()}get _isContainerRtl(){return getComputedStyle(this.container).direction==="rtl"}get isInPresentationMode(){return this.presentationModeState===E.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===E.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){let l=this._scrollMode===E.ScrollMode.PAGE?this.#p.pages:this._pages,u=this._scrollMode===E.ScrollMode.HORIZONTAL,_=u&&this._isContainerRtl;return(0,E.getVisibleElements)({scrollEl:this.container,views:l,sortByVisibility:!0,horizontal:u,rtl:_})}cleanup(){for(let l of this._pages)l.renderingState!==E.RenderingStates.FINISHED&&l.reset()}_cancelRendering(){for(let l of this._pages)l.cancelRendering()}#P(l){return ae(this,null,function*(){if(l.pdfPage)return l.pdfPage;try{let u=yield this.pdfDocument.getPage(l.id);return l.pdfPage||l.setPdfPage(u),this.linkService._cachedPageNumber?.(u.ref)||this.linkService.cachePageRef(l.id,u.ref),u}catch(u){return console.error("Unable to get page for page view",u),null}})}#D(l){if(l.first?.id===1)return!0;if(l.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case E.ScrollMode.PAGE:return this.#p.scrollDown;case E.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}forceRendering(l){let u=l||this._getVisiblePages(),_=this.#D(u),S=this._spreadMode!==E.SpreadMode.NONE&&this._scrollMode!==E.ScrollMode.HORIZONTAL,D=this.renderingQueue.getHighestPriority(u,this._pages,_,S);return D?(this.#P(D).then(()=>{this.renderingQueue.renderView(D)}),!0):!1}get hasEqualPageSizes(){let l=this._pages[0];for(let u=1,_=this._pages.length;u<_;++u){let S=this._pages[u];if(S.width!==l.width||S.height!==l.height)return!1}return!0}getPagesOverview(){let l;return this._pages.map(u=>{let _=u.pdfPage.getViewport({scale:1}),S=(0,E.isPortraitOrientation)(_);if(l===void 0)l=S;else if(this.enablePrintAutoRotate&&S!==l)return{width:_.height,height:_.width,rotation:(_.rotation-90)%360};return{width:_.width,height:_.height,rotation:_.rotation}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(l){if(!(l instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${l}`);this.pdfDocument&&this._optionalContentConfigPromise&&(this._optionalContentConfigPromise=l,this.refresh(!1,{optionalContentConfigPromise:l}),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:l}))}get scrollMode(){return this._scrollMode}set scrollMode(l){if(this._scrollMode!==l){if(!(0,E.isValidScrollMode)(l))throw new Error(`Invalid scroll mode: ${l}`);this.pagesCount>s.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=l,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:l}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(l=null){let u=this._scrollMode,_=this.viewer;_.classList.toggle("scrollHorizontal",u===E.ScrollMode.HORIZONTAL),_.classList.toggle("scrollWrapped",u===E.ScrollMode.WRAPPED),!(!this.pdfDocument||!l)&&(u===E.ScrollMode.PAGE?this.#A():this._previousScrollMode===E.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#v(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(l,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(l){if(this._spreadMode!==l){if(!(0,E.isValidSpreadMode)(l))throw new Error(`Invalid spread mode: ${l}`);this._spreadMode=l,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:l}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(l=null){if(!this.pdfDocument)return;let u=this.viewer,_=this._pages;if(this._scrollMode===E.ScrollMode.PAGE)this.#A();else if(u.textContent="",this._spreadMode===E.SpreadMode.NONE)for(let S of this._pages)u.append(S.div);else{let S=this._spreadMode-1,D=null;for(let R=0,I=_.length;R<I;++R)D===null?(D=document.createElement("div"),D.className="spread",u.append(D)):R%2===S&&(D=D.cloneNode(!1),u.append(D)),D.append(_[R].div)}l&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this.#v(this._currentScaleValue,{noScroll:!0}),this._setCurrentPageNumber(l,!0),this.update())}_getPageAdvance(l,u=!1){switch(this._scrollMode){case E.ScrollMode.WRAPPED:{let{views:_}=this._getVisiblePages(),S=new Map;for(let{id:D,y:R,percent:I,widthPercent:G}of _){if(I===0||G<100)continue;let z=S.get(R);z||S.set(R,z||=[]),z.push(D)}for(let D of S.values()){let R=D.indexOf(l);if(R===-1)continue;let I=D.length;if(I===1)break;if(u)for(let G=R-1,z=0;G>=z;G--){let $=D[G],Q=D[G+1]-1;if($<Q)return l-Q}else for(let G=R+1,z=I;G<z;G++){let $=D[G],Q=D[G-1]+1;if($>Q)return Q-l}if(u){let G=D[0];if(G<l)return l-G+1}else{let G=D[I-1];if(G>l)return G-l+1}break}break}case E.ScrollMode.HORIZONTAL:break;case E.ScrollMode.PAGE:case E.ScrollMode.VERTICAL:{if(this._spreadMode===E.SpreadMode.NONE)break;let _=this._spreadMode-1;if(u&&l%2!==_)break;if(!u&&l%2===_)break;let{views:S}=this._getVisiblePages(),D=u?l-1:l+1;for(let{id:R,percent:I,widthPercent:G}of S)if(R===D){if(I>0&&G===100)return 2;break}break}}return 1}nextPage(){let l=this._currentPageNumber,u=this.pagesCount;if(l>=u)return!1;let _=this._getPageAdvance(l,!1)||1;return this.currentPageNumber=Math.min(l+_,u),!0}previousPage(){let l=this._currentPageNumber;if(l<=1)return!1;let u=this._getPageAdvance(l,!0)||1;return this.currentPageNumber=Math.max(l-u,1),!0}increaseScale({drawingDelay:l,scaleFactor:u,steps:_}={}){if(!this.pdfDocument)return;let S=this._currentScale;if(u>1)S=Math.round(S*u*100)/100;else{_??=1;do S=Math.ceil((S*E.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--_>0&&S<E.MAX_SCALE)}this.#v(Math.min(E.MAX_SCALE,S),{noScroll:!1,drawingDelay:l})}decreaseScale({drawingDelay:l,scaleFactor:u,steps:_}={}){if(!this.pdfDocument)return;let S=this._currentScale;if(u>0&&u<1)S=Math.round(S*u*100)/100;else{_??=1;do S=Math.floor((S/E.DEFAULT_SCALE_DELTA).toFixed(2)*10)/10;while(--_>0&&S>E.MIN_SCALE)}this.#v(Math.max(E.MIN_SCALE,S),{noScroll:!1,drawingDelay:l})}#E(l=this.container.clientHeight){l!==this.#d&&(this.#d=l,E.docStyle.setProperty("--viewer-container-height",`${l}px`))}#T(l){for(let u of l)if(u.target===this.container){this.#E(Math.floor(u.borderBoxSize[0].blockSize)),this.#r=null;break}}get containerTopLeft(){return this.#r||=[this.container.offsetTop,this.container.offsetLeft]}get annotationEditorMode(){return this.#n?this.#i:w.AnnotationEditorType.DISABLE}set annotationEditorMode({mode:l,editId:u=null}){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");if(this.#i!==l){if(!n(l))throw new Error(`Invalid AnnotationEditor mode: ${l}`);this.pdfDocument&&(this.#i=l,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:l}),this.#n.updateMode(l,u))}}set annotationEditorParams({type:l,value:u}){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");this.#n.updateParams(l,u)}refresh(l=!1,u=Object.create(null)){if(this.pdfDocument){for(let _ of this._pages)_.update(u);this.#_!==null&&(clearTimeout(this.#_),this.#_=null),l||this.update()}}}g.PDFViewer=h},(c,g,C)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFRenderingQueue=void 0;var w=C(4),E=C(2);let b=3e4;class a{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1,Object.defineProperty(this,"hasViewer",{value:()=>!!this.pdfViewer})}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(t)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),b)))}getHighestPriority(t,o,s,n=!1){let d=t.views,h=d.length;if(h===0)return null;for(let S=0;S<h;S++){let D=d[S].view;if(!this.isViewFinished(D))return D}let y=t.first.id,l=t.last.id;if(l-y+1>h){let S=t.ids;for(let D=1,R=l-y;D<R;D++){let I=s?y+D:l-D;if(S.has(I))continue;let G=o[I-1];if(!this.isViewFinished(G))return G}}let u=s?l:y-2,_=o[u];return _&&!this.isViewFinished(_)||n&&(u+=s?1:-1,_=o[u],_&&!this.isViewFinished(_))?_:null}isViewFinished(t){return t.renderingState===E.RenderingStates.FINISHED}renderView(t){switch(t.renderingState){case E.RenderingStates.FINISHED:return!1;case E.RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case E.RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case E.RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(o=>{o instanceof w.RenderingCancelledException||console.error(`renderView: "${o}"`)});break}return!0}}g.PDFRenderingQueue=a}],e={};function A(c){var g=e[c];if(g!==void 0)return g.exports;var C=e[c]={exports:{}};return M[c](C,C.exports,A),C.exports}var r={};return(()=>{var c=r;Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return E.AnnotationLayerBuilder}}),Object.defineProperty(c,"DownloadManager",{enumerable:!0,get:function(){return b.DownloadManager}}),Object.defineProperty(c,"EventBus",{enumerable:!0,get:function(){return a.EventBus}}),Object.defineProperty(c,"FindState",{enumerable:!0,get:function(){return g.FindState}}),Object.defineProperty(c,"GenericL10n",{enumerable:!0,get:function(){return i.GenericL10n}}),Object.defineProperty(c,"LinkTarget",{enumerable:!0,get:function(){return C.LinkTarget}}),Object.defineProperty(c,"NullL10n",{enumerable:!0,get:function(){return t.NullL10n}}),Object.defineProperty(c,"PDFFindController",{enumerable:!0,get:function(){return g.PDFFindController}}),Object.defineProperty(c,"PDFHistory",{enumerable:!0,get:function(){return o.PDFHistory}}),Object.defineProperty(c,"PDFLinkService",{enumerable:!0,get:function(){return C.PDFLinkService}}),Object.defineProperty(c,"PDFPageView",{enumerable:!0,get:function(){return s.PDFPageView}}),Object.defineProperty(c,"PDFScriptingManager",{enumerable:!0,get:function(){return n.PDFScriptingManager}}),Object.defineProperty(c,"PDFSinglePageViewer",{enumerable:!0,get:function(){return d.PDFSinglePageViewer}}),Object.defineProperty(c,"PDFViewer",{enumerable:!0,get:function(){return h.PDFViewer}}),Object.defineProperty(c,"ProgressBar",{enumerable:!0,get:function(){return w.ProgressBar}}),Object.defineProperty(c,"RenderingStates",{enumerable:!0,get:function(){return w.RenderingStates}}),Object.defineProperty(c,"ScrollMode",{enumerable:!0,get:function(){return w.ScrollMode}}),Object.defineProperty(c,"SimpleLinkService",{enumerable:!0,get:function(){return C.SimpleLinkService}}),Object.defineProperty(c,"SpreadMode",{enumerable:!0,get:function(){return w.SpreadMode}}),Object.defineProperty(c,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return y.StructTreeLayerBuilder}}),Object.defineProperty(c,"TextLayerBuilder",{enumerable:!0,get:function(){return l.TextLayerBuilder}}),Object.defineProperty(c,"XfaLayerBuilder",{enumerable:!0,get:function(){return u.XfaLayerBuilder}}),Object.defineProperty(c,"parseQueryString",{enumerable:!0,get:function(){return w.parseQueryString}});var g=A(1),C=A(5),w=A(2),E=A(6),b=A(8),a=A(9),i=A(10),t=A(7),o=A(12),s=A(13),n=A(21),d=A(24),h=A(25),y=A(16),l=A(19),u=A(20);let _="3.11.174",S="ce8716743"})(),r})())});var Pe=ei(wi(),1),Te=ei(Ci(),1);var cn=["pdfViewerContainer"];function hn(M,e){let A=new M.EventBus;return dn(A,e),A}function dn(M,e){ge(M,"documentload").pipe(ue(e)).subscribe(()=>{let A=document.createEvent("CustomEvent");A.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(A)}),ge(M,"pagerendered").pipe(ue(e)).subscribe(({pageNumber:A,cssTransform:r,source:c})=>{let g=document.createEvent("CustomEvent");g.initCustomEvent("pagerendered",!0,!0,{pageNumber:A,cssTransform:r}),c.div.dispatchEvent(g)}),ge(M,"textlayerrendered").pipe(ue(e)).subscribe(({pageNumber:A,source:r})=>{let c=document.createEvent("CustomEvent");c.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:A}),r.textLayerDiv?.dispatchEvent(c)}),ge(M,"pagechanging").pipe(ue(e)).subscribe(({pageNumber:A,source:r})=>{let c=document.createEvent("UIEvents");c.initEvent("pagechanging",!0,!0),c.pageNumber=A,r.container.dispatchEvent(c)}),ge(M,"pagesinit").pipe(ue(e)).subscribe(({source:A})=>{let r=document.createEvent("CustomEvent");r.initCustomEvent("pagesinit",!0,!0,null),A.container.dispatchEvent(r)}),ge(M,"pagesloaded").pipe(ue(e)).subscribe(({pagesCount:A,source:r})=>{let c=document.createEvent("CustomEvent");c.initCustomEvent("pagesloaded",!0,!0,{pagesCount:A}),r.container.dispatchEvent(c)}),ge(M,"scalechange").pipe(ue(e)).subscribe(({scale:A,presetValue:r,source:c})=>{let g=document.createEvent("UIEvents");g.initEvent("scalechange",!0,!0),g.scale=A,g.presetValue=r,c.container.dispatchEvent(g)}),ge(M,"updateviewarea").pipe(ue(e)).subscribe(({location:A,source:r})=>{let c=document.createEvent("UIEvents");c.initEvent("updateviewarea",!0,!0),c.location=A,r.container.dispatchEvent(c)}),ge(M,"find").pipe(ue(e)).subscribe(({source:A,type:r,query:c,phraseSearch:g,caseSensitive:C,highlightAll:w,findPrevious:E})=>{if(A===window)return;let b=document.createEvent("CustomEvent");b.initCustomEvent("find"+r,!0,!0,{query:c,phraseSearch:g,caseSensitive:C,highlightAll:w,findPrevious:E}),window.dispatchEvent(b)}),ge(M,"attachmentsloaded").pipe(ue(e)).subscribe(({attachmentsCount:A,source:r})=>{let c=document.createEvent("CustomEvent");c.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:A}),r.container.dispatchEvent(c)}),ge(M,"sidebarviewchanged").pipe(ue(e)).subscribe(({view:A,source:r})=>{let c=document.createEvent("CustomEvent");c.initCustomEvent("sidebarviewchanged",!0,!0,{view:A}),r.outerContainer.dispatchEvent(c)}),ge(M,"pagemode").pipe(ue(e)).subscribe(({mode:A,source:r})=>{let c=document.createEvent("CustomEvent");c.initCustomEvent("pagemode",!0,!0,{mode:A}),r.pdfViewer.container.dispatchEvent(c)}),ge(M,"namedaction").pipe(ue(e)).subscribe(({action:A,source:r})=>{let c=document.createEvent("CustomEvent");c.initCustomEvent("namedaction",!0,!0,{action:A}),r.pdfViewer.container.dispatchEvent(c)}),ge(M,"presentationmodechanged").pipe(ue(e)).subscribe(({active:A,switchInProgress:r})=>{let c=document.createEvent("CustomEvent");c.initCustomEvent("presentationmodechanged",!0,!0,{active:A,switchInProgress:r}),window.dispatchEvent(c)}),ge(M,"outlineloaded").pipe(ue(e)).subscribe(({outlineCount:A,source:r})=>{let c=document.createEvent("CustomEvent");c.initCustomEvent("outlineloaded",!0,!0,{outlineCount:A}),r.container.dispatchEvent(c)})}function Xt(M,e,A){M[e]=A}function dt(){return typeof window>"u"}dt()||Xt(Pe,"verbosity",Pe.VerbosityLevel.INFOS);var Yt=function(M){return M[M.DISABLED=0]="DISABLED",M[M.ENABLED=1]="ENABLED",M[M.ENHANCED=2]="ENHANCED",M}(Yt||{}),Mi=(()=>{class M{element;ngZone;static CSS_UNITS=96/72;static BORDER_WIDTH=9;pdfViewerContainer;eventBus;pdfLinkService;pdfFindController;pdfViewer;isVisible=!1;_cMapsUrl=typeof Pe<"u"?`https://unpkg.com/pdfjs-dist@${Pe.version}/cmaps/`:null;_imageResourcesPath=typeof Pe<"u"?`https://unpkg.com/pdfjs-dist@${Pe.version}/web/images/`:void 0;_renderText=!0;_renderTextMode=Yt.ENABLED;_stickToPage=!1;_originalSize=!0;_pdf;_page=1;_zoom=1;_zoomScale="page-width";_rotation=0;_showAll=!0;_canAutoResize=!0;_fitToPage=!1;_externalLinkTarget="blank";_showBorders=!1;lastLoaded;_latestScrolledPage;pageScrollTimeout=null;isInitialized=!1;loadingTask;destroy$=new Ne;afterLoadComplete=new Le;pageRendered=new Le;pageInitialized=new Le;textLayerRendered=new Le;onError=new Le;onProgress=new Le;pageChange=new Le(!0);src;set cMapsUrl(A){this._cMapsUrl=A}set page(A){A=parseInt(A,10)||1;let r=A;this._pdf&&(A=this.getValidPageNumber(A)),this._page=A,r!==A&&this.pageChange.emit(A)}set renderText(A){this._renderText=A}set renderTextMode(A){this._renderTextMode=A}set originalSize(A){this._originalSize=A}set showAll(A){this._showAll=A}set stickToPage(A){this._stickToPage=A}set zoom(A){A<=0||(this._zoom=A)}get zoom(){return this._zoom}set zoomScale(A){this._zoomScale=A}get zoomScale(){return this._zoomScale}set rotation(A){if(!(typeof A=="number"&&A%90===0)){console.warn("Invalid pages rotation angle.");return}this._rotation=A}set externalLinkTarget(A){this._externalLinkTarget=A}set autoresize(A){this._canAutoResize=!!A}set fitToPage(A){this._fitToPage=!!A}set showBorders(A){this._showBorders=!!A}static getLinkTarget(A){switch(A){case"blank":return Te.LinkTarget.BLANK;case"none":return Te.LinkTarget.NONE;case"self":return Te.LinkTarget.SELF;case"parent":return Te.LinkTarget.PARENT;case"top":return Te.LinkTarget.TOP}return null}constructor(A,r){if(this.element=A,this.ngZone=r,dt())return;let c,g=Pe.version,C=window[`pdfWorkerSrc${g}`];C?c=C:window.hasOwnProperty("pdfWorkerSrc")&&typeof window.pdfWorkerSrc=="string"&&window.pdfWorkerSrc?c=window.pdfWorkerSrc:c=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${g}/legacy/build/pdf.worker.min.js`,Xt(Pe.GlobalWorkerOptions,"workerSrc",c)}ngAfterViewChecked(){if(this.isInitialized)return;let A=this.pdfViewerContainer.nativeElement.offsetParent;if(this.isVisible===!0&&A==null){this.isVisible=!1;return}this.isVisible===!1&&A!=null&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})}))}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(A){if(!(dt()||!this.isVisible)){if("src"in A)this.loadPDF();else if(this._pdf){if(("renderText"in A||"showAll"in A)&&(this.setupViewer(),this.resetPdfDocument()),"page"in A){let{page:r}=A;if(r.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}}updateSize(){Ot(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(ue(this.destroy$)).subscribe({next:A=>{let r=this._rotation+A.rotate,c=A.getViewport({scale:this._zoom,rotation:r}).width*M.CSS_UNITS,g=this._zoom,C=!0;if(!this._originalSize||this._fitToPage&&c>this.pdfViewerContainer.nativeElement.clientWidth){let w=A.getViewport({scale:1,rotation:r});g=this.getScale(w.width,w.height),C=!this._stickToPage}this.pdfViewer.pagesPromise?.then(()=>{this.pdfViewer.currentScale=g,C&&this.pdfViewer.scrollPageIntoView({pageNumber:A.pageNumber,ignoreDestinationZoom:!0})})}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=void 0),this.pdfViewer&&this.pdfViewer.setDocument(null),this.pdfLinkService&&this.pdfLinkService.setDocument(null,null),this.pdfFindController&&this.pdfFindController.setDocument(null)}getPDFLinkServiceConfig(){let A=M.getLinkTarget(this._externalLinkTarget);return A?{externalLinkTarget:A}:{}}initEventBus(){this.eventBus=hn(Te,this.destroy$),ge(this.eventBus,"pagerendered").pipe(ue(this.destroy$)).subscribe(A=>{this.pageRendered.emit(A)}),ge(this.eventBus,"pagesinit").pipe(ue(this.destroy$)).subscribe(A=>{this.pageInitialized.emit(A)}),ge(this.eventBus,"pagechanging").pipe(ue(this.destroy$)).subscribe(({pageNumber:A})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=A,this.pageChange.emit(A)},100)}),ge(this.eventBus,"textlayerrendered").pipe(ue(this.destroy$)).subscribe(A=>{this.textLayerRendered.emit(A)})}initPDFServices(){this.pdfLinkService=new Te.PDFLinkService(Re({eventBus:this.eventBus},this.getPDFLinkServiceConfig())),this.pdfFindController=new Te.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:Yt.DISABLED,findController:this.pdfFindController,l10n:new Te.GenericL10n("en"),imageResourcesPath:this._imageResourcesPath,annotationEditorMode:Pe.AnnotationEditorType.DISABLE}}setupViewer(){Xt(Pe,"disableTextLayer",!this._renderText),this.initPDFServices(),this._showAll?this.pdfViewer=new Te.PDFViewer(this.getPDFOptions()):this.pdfViewer=new Te.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(A){return A<1?1:A>this._pdf.numPages?this._pdf.numPages:A}getDocumentParams(){let A=typeof this.src;if(!this._cMapsUrl)return this.src;let r={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return r.isEvalSupported=!1,A==="string"?r.url=this.src:A==="object"&&(this.src.byteLength!==void 0?r.data=this.src:Object.assign(r,this.src)),r}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src){this.update();return}this.clear(),this.setupViewer(),this.loadingTask=Pe.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=r=>{this.onProgress.emit(r)};let A=this.src;Ot(this.loadingTask.promise).pipe(ue(this.destroy$)).subscribe({next:r=>{this._pdf=r,this.lastLoaded=A,this.afterLoadComplete.emit(r),this.resetPdfDocument(),this.update()},error:r=>{this.lastLoaded=null,this.onError.emit(r)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(this._rotation!==0||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(A,r){let c=this._showBorders?2*M.BORDER_WIDTH:0,g=this.pdfViewerContainer.nativeElement.clientWidth-c,C=this.pdfViewerContainer.nativeElement.clientHeight-c;if(C===0||r===0||g===0||A===0)return 1;let w=1;switch(this._zoomScale){case"page-fit":w=Math.min(C/r,g/A);break;case"page-height":w=C/r;break;case"page-width":default:w=g/A;break}return this._zoom*w/M.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){dt()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){dt()||this.ngZone.runOutsideAngular(()=>{ge(window,"resize").pipe(ri(100),$e(()=>this._canAutoResize&&!!this._pdf),ue(this.destroy$)).subscribe(()=>{this.updateSize()})})}static \u0275fac=function(r){return new(r||M)(ze(rt),ze(Ze))};static \u0275cmp=qe({type:M,selectors:[["pdf-viewer"]],viewQuery:function(r,c){if(r&1&&vt(cn,5),r&2){let g;yt(g=At())&&(c.pdfViewerContainer=g.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[Lt],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(r,c){r&1&&(De(0,"div",1,0),lt(2,"div",2),xe())},styles:[`.ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--viewer-container-height: 0;--annotation-unfocused-field-background: url("data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>");--xfa-unfocused-field-background: var( --annotation-unfocused-field-background );--page-border-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=) 9 9 repeat;--scale-factor: 1;--focus-outline: solid 2px blue;--hover-outline: dashed 2px blue;--freetext-line-height: 1.35;--freetext-padding: 2px;--editorInk-editing-cursor: pointer}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 8px auto -1px;--page-border: 1px solid CanvasText;--page-border-image: none;--spreadHorizontalWrapped-margin-LR: 3.5px}}@media (forced-colors: active){[_nghost-%COMP%]    {--focus-outline: solid 3px ButtonText;--hover-outline: dashed 3px ButtonText}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;inset:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;inset:100% 0 0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}@media (forced-colors: active){[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .annotationLayer{position:absolute;top:0;left:0;pointer-events:none;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial;pointer-events:auto;box-sizing:border-box;transform-origin:0 0}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:rgb(255,255,0);box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font:calc(9px * var(--scale-factor)) sans-serif;height:100%;margin:0;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:required, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:required, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:required, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:required{outline:1.5px solid red}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid rgb(0,0,0)}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:CanvasText;content:"";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;appearance:none}[_nghost-%COMP%]     .annotationLayer .popupTriggerArea{height:100%;width:100%}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;font-size:calc(9px * var(--scale-factor));width:100%;min-width:calc(180px * var(--scale-factor));pointer-events:none}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;max-width:calc(180px * var(--scale-factor));background-color:#ff9;box-shadow:0 calc(2px * var(--scale-factor)) calc(5px * var(--scale-factor)) #888;border-radius:calc(2px * var(--scale-factor));padding:calc(6px * var(--scale-factor));margin-left:calc(5px * var(--scale-factor));cursor:pointer;font:message-box;white-space:normal;word-wrap:break-word;pointer-events:auto}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:calc(5px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid rgb(51,51,51);margin-top:calc(2px * var(--scale-factor));padding-top:calc(2px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap;font-size:calc(9px * var(--scale-factor))}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .annotationLayer section svg{position:absolute;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .annotationTextContent{position:absolute;width:100%;height:100%;opacity:0;color:transparent;-webkit-user-select:none;user-select:none;pointer-events:none}[_nghost-%COMP%]     .annotationLayer .annotationTextContent span{width:100%;display:inline-block}@media (forced-colors: active){[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid selectedItem}}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:rgb(0,0,255)}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer *:required{outline:1.5px solid red}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;appearance:none;text-indent:1px;text-overflow:""}}[_nghost-%COMP%]     [data-editor-rotation="90"]{transform:rotate(90deg)}[_nghost-%COMP%]     [data-editor-rotation="180"]{transform:rotate(180deg)}[_nghost-%COMP%]     [data-editor-rotation="270"]{transform:rotate(270deg)}[_nghost-%COMP%]     .annotationEditorLayer{background:transparent;position:absolute;top:0;left:0;font-size:calc(100px * var(--scale-factor));transform-origin:0 0}[_nghost-%COMP%]     .annotationEditorLayer .selectedEditor{outline:var(--focus-outline);resize:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor{position:absolute;background:transparent;border-radius:3px;padding:calc(var(--freetext-padding) * var(--scale-factor));resize:none;width:auto;height:auto;z-index:1;transform-origin:0 0;touch-action:none}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal{background:transparent;border:none;top:0;left:0;overflow:visible;white-space:nowrap;resize:none;font:10px sans-serif;line-height:var(--freetext-line-height)}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay{position:absolute;display:none;background:transparent;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .overlay.enabled{display:block}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:empty:before{content:attr(default-content);color:gray}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor .internal:focus{outline:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled{resize:none}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.disabled.selectedEditor{resize:horizontal}[_nghost-%COMP%]     .annotationEditorLayer .freeTextEditor:hover:not(.selectedEditor), [_nghost-%COMP%]     .annotationEditorLayer .inkEditor:hover:not(.selectedEditor){outline:var(--hover-outline)}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor{position:absolute;background:transparent;border-radius:3px;overflow:auto;width:100%;height:100%;z-index:1;transform-origin:0 0;cursor:auto}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor.editing{resize:none;cursor:var(--editorInk-editing-cursor),pointer}[_nghost-%COMP%]     .annotationEditorLayer .inkEditor .inkEditorCanvas{position:absolute;top:0;left:0;width:100%;height:100%;touch-action:none}[_nghost-%COMP%]     [data-main-rotation="90"]{transform:rotate(90deg) translateY(-100%)}[_nghost-%COMP%]     [data-main-rotation="180"]{transform:rotate(180deg) translate(-100%,-100%)}[_nghost-%COMP%]     [data-main-rotation="270"]{transform:rotate(270deg) translate(-100%)}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);border-image:var(--page-border-image);background-clip:content-box;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;inset:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}`]})}return M})(),rs=(()=>{class M{static \u0275fac=function(r){return new(r||M)};static \u0275mod=be({type:M});static \u0275inj=me({})}return M})();var pn=["*"];var gn=["dialog"];var Pi={animation:!0,transitionTimerDelayMs:5},_n=(()=>{let e=class e{constructor(){this.animation=Pi.animation}};e.\u0275fac=function(c){return new(c||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let M=e;return M})();function mn(M){let{transitionDelay:e,transitionDuration:A}=window.getComputedStyle(M),r=parseFloat(e),c=parseFloat(A);return(r+c)*1e3}function Di(M){return typeof M=="string"}function Kt(M){return M!=null}function bn(M){return M&&M.then}function xi(M){return(M||document.body).getBoundingClientRect()}function vn(M){return e=>new ti(A=>{let r=C=>M.run(()=>A.next(C)),c=C=>M.run(()=>A.error(C)),g=()=>M.run(()=>A.complete());return e.subscribe({next:r,error:c,complete:g})})}var yn=()=>{},{transitionTimerDelayMs:An}=Pi,Tt=new Map,Ke=(M,e,A,r)=>{let c=r.context||{},g=Tt.get(e);if(g)switch(r.runningTransition){case"continue":return ii;case"stop":M.run(()=>g.transition$.complete()),c=Object.assign(g.context,c),Tt.delete(e)}let C=A(e,r.animation,c)||yn;if(!r.animation||window.getComputedStyle(e).transitionProperty==="none")return M.run(()=>C()),Rt(void 0).pipe(vn(M));let w=new Ne,E=new Ne,b=w.pipe(ai(!0));Tt.set(e,{transition$:w,complete:()=>{E.next(),E.complete()},context:c});let a=mn(e);return M.runOutsideAngular(()=>{let i=ge(e,"transitionend").pipe(ue(b),$e(({target:o})=>o===e)),t=ni(a+An).pipe(ue(b));si(t,i,E).pipe(ue(b)).subscribe(()=>{Tt.delete(e),M.run(()=>{C(),w.next(),w.complete()})})}),w.asObservable()};var Oi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Ri=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Ii=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})(),ki=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var vr=(()=>{let M=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(M()||e()):!1})();var Sn=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Ni(M){let e=Array.from(M.querySelectorAll(Sn)).filter(A=>A.tabIndex!==-1);return[e[0],e[e.length-1]]}var En=(M,e,A,r=!1)=>{M.runOutsideAngular(()=>{let c=ge(e,"focusin").pipe(ue(A),It(g=>g.target));ge(e,"keydown").pipe(ue(A),$e(g=>g.key==="Tab"),Nt(c)).subscribe(([g,C])=>{let[w,E]=Ni(e);(C===w||C===e)&&g.shiftKey&&(E.focus(),g.preventDefault()),C===E&&!g.shiftKey&&(w.focus(),g.preventDefault())}),r&&ge(e,"click").pipe(ue(A),Nt(c),It(g=>g[1])).subscribe(g=>g.focus())})};var yr=new Date(1882,10,12),Ar=new Date(2174,10,25);var Sr=1e3*60*60*24;var Zt=1080,wn=24*Zt,Cn=12*Zt+793,Er=29*wn+Cn,wr=11*Zt+204;var Fi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Li=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})(),Tn=(()=>{let e=class e{constructor(){this._ngbConfig=Ae(_n),this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return this._animation??this._ngbConfig.animation}set animation(r){this._animation=r}};e.\u0275fac=function(c){return new(c||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let M=e;return M})(),et=class{constructor(e,A,r){this.nodes=e,this.viewRef=A,this.componentRef=r}};var Mn=(()=>{let e=class e{constructor(){this._document=Ae(Et)}hide(){let r=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),c=this._document.body,g=c.style,{overflow:C,paddingRight:w}=g;if(r>0){let E=parseFloat(window.getComputedStyle(c).paddingRight);g.paddingRight=`${E+r}px`}return g.overflow="hidden",()=>{r>0&&(g.paddingRight=w),g.overflow=C}}};e.\u0275fac=function(c){return new(c||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let M=e;return M})(),Pn=(()=>{let e=class e{constructor(){this._nativeElement=Ae(rt).nativeElement,this._zone=Ae(Ze),this._injector=Ae(Je)}ngOnInit(){Ut(()=>Ke(this._zone,this._nativeElement,(r,c)=>{c&&xi(r),r.classList.add("show")},{animation:this.animation,runningTransition:"continue"}),{injector:this._injector,phase:Bt.MixedReadWrite})}hide(){return Ke(this._zone,this._nativeElement,({classList:r})=>r.remove("show"),{animation:this.animation,runningTransition:"stop"})}};e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=qe({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(c,g){c&2&&(bt("modal-backdrop"+(g.backdropClass?" "+g.backdropClass:"")),Gt("show",!g.animation)("fade",g.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[jt],decls:0,vars:0,template:function(c,g){},encapsulation:2});let M=e;return M})(),tt=class{update(e){}close(e){}dismiss(e){}},Dn=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],xn=["animation","backdropClass"],Qt=class{_applyWindowOptions(e,A){Dn.forEach(r=>{Kt(A[r])&&(e[r]=A[r])})}_applyBackdropOptions(e,A){xn.forEach(r=>{Kt(A[r])&&(e[r]=A[r])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ue(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ue(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}constructor(e,A,r,c){this._windowCmptRef=e,this._contentRef=A,this._backdropCmptRef=r,this._beforeDismiss=c,this._closed=new Ne,this._dismissed=new Ne,this._hidden=new Ne,e.instance.dismissEvent.subscribe(g=>{this.dismiss(g)}),this.result=new Promise((g,C)=>{this._resolve=g,this._reject=C}),this.result.then(null,()=>{})}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(!this._beforeDismiss)this._dismiss(e);else{let A=this._beforeDismiss();bn(A)?A.then(r=>{r!==!1&&this._dismiss(e)},()=>{}):A!==!1&&this._dismiss(e)}}_removeModalElements(){let e=this._windowCmptRef.instance.hide(),A=this._backdropCmptRef?this._backdropCmptRef.instance.hide():Rt(void 0);e.subscribe(()=>{let{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef?.viewRef?.destroy(),this._windowCmptRef=null,this._contentRef=null}),A.subscribe(()=>{if(this._backdropCmptRef){let{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),gt(e,A).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}},Jt=function(M){return M[M.BACKDROP_CLICK=0]="BACKDROP_CLICK",M[M.ESC=1]="ESC",M}(Jt||{}),On=(()=>{let e=class e{constructor(){this._document=Ae(Et),this._elRef=Ae(rt),this._zone=Ae(Ze),this._injector=Ae(Je),this._closed$=new Ne,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new Le,this.shown=new Ne,this.hidden=new Ne}get fullscreenClass(){return this.fullscreen===!0?" modal-fullscreen":Di(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(r){this.dismissEvent.emit(r)}ngOnInit(){this._elWithFocus=this._document.activeElement,Ut(()=>this._show(),{injector:this._injector,phase:Bt.MixedReadWrite})}ngOnDestroy(){this._disableEventHandling()}hide(){let{nativeElement:r}=this._elRef,c={animation:this.animation,runningTransition:"stop"},g=Ke(this._zone,r,()=>r.classList.remove("show"),c),C=Ke(this._zone,this._dialogEl.nativeElement,()=>{},c),w=gt(g,C);return w.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),w}_show(){let r={animation:this.animation,runningTransition:"continue"},c=Ke(this._zone,this._elRef.nativeElement,(C,w)=>{w&&xi(C),C.classList.add("show")},r),g=Ke(this._zone,this._dialogEl.nativeElement,()=>{},r);gt(c,g).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){let{nativeElement:r}=this._elRef;this._zone.runOutsideAngular(()=>{ge(r,"keydown").pipe(ue(this._closed$),$e(g=>g.key==="Escape")).subscribe(g=>{this.keyboard?requestAnimationFrame(()=>{g.defaultPrevented||this._zone.run(()=>this.dismiss(Jt.ESC))}):this.backdrop==="static"&&this._bumpBackdrop()});let c=!1;ge(this._dialogEl.nativeElement,"mousedown").pipe(ue(this._closed$),li(()=>c=!1),oi(()=>ge(r,"mouseup").pipe(ue(this._closed$),kt(1))),$e(({target:g})=>r===g)).subscribe(()=>{c=!0}),ge(r,"click").pipe(ue(this._closed$)).subscribe(({target:g})=>{r===g&&(this.backdrop==="static"?this._bumpBackdrop():this.backdrop===!0&&!c&&this._zone.run(()=>this.dismiss(Jt.BACKDROP_CLICK))),c=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){let{nativeElement:r}=this._elRef;if(!r.contains(document.activeElement)){let c=r.querySelector("[ngbAutofocus]"),g=Ni(r)[0];(c||g||r).focus()}}_restoreFocus(){let r=this._document.body,c=this._elWithFocus,g;c&&c.focus&&r.contains(c)?g=c:g=r,this._zone.runOutsideAngular(()=>{setTimeout(()=>g.focus()),this._elWithFocus=null})}_bumpBackdrop(){this.backdrop==="static"&&Ke(this._zone,this._elRef.nativeElement,({classList:r})=>(r.add("modal-static"),()=>r.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}};e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=qe({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(c,g){if(c&1&&vt(gn,7),c&2){let C;yt(C=At())&&(g._dialogEl=C.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(c,g){c&2&&(di("aria-modal",!0)("aria-labelledby",g.ariaLabelledBy)("aria-describedby",g.ariaDescribedBy),bt("modal d-block"+(g.windowClass?" "+g.windowClass:"")),Gt("fade",g.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[jt],ngContentSelectors:pn,decls:4,vars:2,consts:[["dialog",""],["role","document"],[1,"modal-content"]],template:function(c,g){c&1&&(ui(),De(0,"div",1,0)(2,"div",2),fi(3),xe()()),c&2&&bt("modal-dialog"+(g.size?" modal-"+g.size:"")+(g.centered?" modal-dialog-centered":"")+g.fullscreenClass+(g.scrollable?" modal-dialog-scrollable":"")+(g.modalDialogClass?" "+g.modalDialogClass:""))},styles:[`ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}
`],encapsulation:2});let M=e;return M})(),Rn=(()=>{let e=class e{constructor(){this._applicationRef=Ae(pi),this._injector=Ae(Je),this._environmentInjector=Ae(Ft),this._document=Ae(Et),this._scrollBar=Ae(Mn),this._activeWindowCmptHasChanged=new Ne,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new Le;let r=Ae(Ze);this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){let c=this._windowCmpts[this._windowCmpts.length-1];En(r,c.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(c.location.nativeElement)}})}_restoreScrollBar(){let r=this._scrollBarRestoreFn;r&&(this._scrollBarRestoreFn=null,r())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(r,c,g){let C=g.container instanceof HTMLElement?g.container:Kt(g.container)?this._document.querySelector(g.container):this._document.body;if(!C)throw new Error(`The specified modal container "${g.container||"body"}" was not found in the DOM.`);this._hideScrollBar();let w=new tt;r=g.injector||r;let E=r.get(Ft,null)||this._environmentInjector,b=this._getContentRef(r,E,c,w,g),a=g.backdrop!==!1?this._attachBackdrop(C):void 0,i=this._attachWindowComponent(C,b.nodes),t=new Qt(i,b,a,g.beforeDismiss);return this._registerModalRef(t),this._registerWindowCmpt(i),t.hidden.pipe(kt(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(this._document.body.classList.remove("modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),w.close=o=>{t.close(o)},w.dismiss=o=>{t.dismiss(o)},w.update=o=>{t.update(o)},t.update(g),this._modalRefs.length===1&&this._document.body.classList.add("modal-open"),a&&a.instance&&a.changeDetectorRef.detectChanges(),i.changeDetectorRef.detectChanges(),t}get activeInstances(){return this._activeInstances}dismissAll(r){this._modalRefs.forEach(c=>c.dismiss(r))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(r){let c=St(Pn,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(c.hostView),r.appendChild(c.location.nativeElement),c}_attachWindowComponent(r,c){let g=St(On,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:c});return this._applicationRef.attachView(g.hostView),r.appendChild(g.location.nativeElement),g}_getContentRef(r,c,g,C,w){return g?g instanceof hi?this._createFromTemplateRef(g,C):Di(g)?this._createFromString(g):this._createFromComponent(r,c,g,C,w):new et([])}_createFromTemplateRef(r,c){let g={$implicit:c,close(w){c.close(w)},dismiss(w){c.dismiss(w)}},C=r.createEmbeddedView(g);return this._applicationRef.attachView(C),new et([C.rootNodes],C)}_createFromString(r){let c=this._document.createTextNode(`${r}`);return new et([[c]])}_createFromComponent(r,c,g,C,w){let E=Je.create({providers:[{provide:tt,useValue:C}],parent:r}),b=St(g,{environmentInjector:c,elementInjector:E}),a=b.location.nativeElement;return w.scrollable&&a.classList.add("component-host-scrollable"),this._applicationRef.attachView(b.hostView),new et([[a]],b.hostView,b)}_setAriaHidden(r){let c=r.parentElement;c&&r!==this._document.body&&(Array.from(c.children).forEach(g=>{g!==r&&g.nodeName!=="SCRIPT"&&(this._ariaHiddenValues.set(g,g.getAttribute("aria-hidden")),g.setAttribute("aria-hidden","true"))}),this._setAriaHidden(c))}_revertAriaHidden(){this._ariaHiddenValues.forEach((r,c)=>{r?c.setAttribute("aria-hidden",r):c.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(r){let c=()=>{let g=this._modalRefs.indexOf(r);g>-1&&(this._modalRefs.splice(g,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(r),this._activeInstances.emit(this._modalRefs),r.result.then(c,c)}_registerWindowCmpt(r){this._windowCmpts.push(r),this._activeWindowCmptHasChanged.next(),r.onDestroy(()=>{let c=this._windowCmpts.indexOf(r);c>-1&&(this._windowCmpts.splice(c,1),this._activeWindowCmptHasChanged.next())})}};e.\u0275fac=function(c){return new(c||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let M=e;return M})(),In=(()=>{let e=class e{constructor(){this._injector=Ae(Je),this._modalStack=Ae(Rn),this._config=Ae(Tn)}open(r,c={}){let g=Re(Ue(Re({},this._config),{animation:this._config.animation}),c);return this._modalStack.open(this._injector,r,g)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(r){this._modalStack.dismissAll(r)}hasOpenModals(){return this._modalStack.hasOpenModals()}};e.\u0275fac=function(c){return new(c||e)},e.\u0275prov=Qe({token:e,factory:e.\u0275fac,providedIn:"root"});let M=e;return M})(),Bi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({providers:[In]});let M=e;return M})();var Ui=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Vi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Gi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Hi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var ji=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Wi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var zi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var $i=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var qi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Cr=new ci("live announcer delay",{providedIn:"root",factory:()=>100});var Xi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})();var Yi=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({});let M=e;return M})(),kn=[Oi,Ri,Ii,ki,Fi,Li,Bi,Ui,Yi,Vi,Gi,Hi,ji,Wi,zi,$i,qi,Xi],Tr=(()=>{let e=class e{};e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=be({type:e}),e.\u0275inj=me({imports:[kn,Oi,Ri,Ii,ki,Fi,Li,Bi,Ui,Yi,Vi,Gi,Hi,ji,Wi,zi,$i,qi,Xi]});let M=e;return M})();function Fn(M,e){if(M&1){let A=Ht();De(0,"div",8)(1,"div",9),lt(2,"pdf-viewer",10),xe(),De(3,"div",11)(4,"input",12),Xe("change",function(){_t(A);let c=ct();return mt(c.aceptaPoliticaTratamientoDatos())}),xe(),De(5,"label",13),Ye(6," Autorizaci\xF3n y cesi\xF3n de derechos de imagen "),xe()(),De(7,"div",11)(8,"input",14),Xe("change",function(){_t(A);let c=ct();return mt(c.aceptaPoliticaTratamientoDatos())}),xe(),De(9,"label",15),Ye(10," Autorizaci\xF3n para el tratamiento y transferencia de datos personales "),xe()()()}if(M&2){let A=ct();at(2),ot("src",A.pdfSrc)("rotation",0)("original-size",!1)("show-all",!0)("fit-to-page",!1)("zoom",1)("zoom-scale","page-width")("stick-to-page",!1)("render-text",!0)("external-link-target","blank")("autoresize",!0)("show-borders",!1)}}var Or=(()=>{class M{activeModal;alertaServicio;route;aceptaPoliticaDatosPersonales=!1;pdfSrc="assets/terminos-condiciones/autorizacion-datos.pdf";aceptaCesionImagen=!1;aceptaTratamientoDatosPersonales=!1;permitirRegistrar=!1;constructor(A,r,c){this.activeModal=A,this.alertaServicio=r,this.route=c}close(){this.activeModal.dismiss()}aceptaPoliticaTratamientoDatos(){this.aceptaCesionImagen=document.getElementById("aceptaCesionImagen").checked,this.aceptaTratamientoDatosPersonales=document.getElementById("aceptaTratamientoDatosPersonales").checked,this.permitirRegistrar=this.aceptaCesionImagen&&this.aceptaTratamientoDatosPersonales}registroUsuario(){this.alertaServicio.alertaOpcionesRegistro().then(A=>{A!==void 0&&(this.activeModal.dismiss(),this.route.navigate([A]))})}static \u0275fac=function(r){return new(r||M)(ze(tt),ze(mi),ze(_i))};static \u0275cmp=qe({type:M,selectors:[["app-aceptacion-tratamiento-datos"]],decls:11,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["class","container contenedor-pdf",4,"ngIf"],[1,"modal-footer","justify-content-center"],[1,"btn","btn-primary","btn-cancelar-tratamiento-datos",3,"click","disabled"],["type","button",1,"btn","btn-primary","btn-cancelar-tratamiento-datos",3,"click"],[1,"container","contenedor-pdf"],[1,"pdf-container"],[2,"width","100%","height","80vh",3,"src","rotation","original-size","show-all","fit-to-page","zoom","zoom-scale","stick-to-page","render-text","external-link-target","autoresize","show-borders"],[1,"d-flex","justify-content-center","align-items-center","mt-3"],["type","checkbox","id","aceptaCesionImagen",1,"form-check-input","me-2",3,"change"],["for","aceptaCesionImagen",1,"form-check-label"],["type","checkbox","id","aceptaTratamientoDatosPersonales",1,"form-check-input","me-2",3,"change"],["for","aceptaTratamientoDatosPersonales",1,"form-check-label"]],template:function(r,c){r&1&&(De(0,"div",0)(1,"h5",1),Ye(2,"Congreso Internacional Iberoamericano de Startups"),xe(),De(3,"button",2),Xe("click",function(){return c.close()}),xe()(),De(4,"div",3),Vt(5,Fn,11,12,"div",4),xe(),De(6,"div",5)(7,"button",6),Xe("click",function(){return c.registroUsuario()}),Ye(8,"Reg\xEDstrarse"),xe(),De(9,"button",7),Xe("click",function(){return c.close()}),Ye(10,"Cerrar"),xe()()),r&2&&(at(5),ot("ngIf",!c.aceptaPoliticaDatosPersonales),at(2),ot("disabled",!c.permitirRegistrar))},dependencies:[gi,Mi],styles:[".btn-cancelar-tratamiento-datos[_ngcontent-%COMP%]{background:#2c5c85}.btn-cancelar-tratamiento-datos[_ngcontent-%COMP%]:hover{background-color:#659ccc;border-color:#659ccc}"]})}return M})();export{In as a,Tr as b,rs as c,Or as d};
